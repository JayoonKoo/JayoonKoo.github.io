<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"jayoonkoo.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="티끌모아 태산">
<meta property="og:url" content="https://jayoonkoo.github.io/page/12/index.html">
<meta property="og:site_name" content="티끌모아 태산">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="JayoonKoo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jayoonkoo.github.io/page/12/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/12/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>티끌모아 태산</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">티끌모아 태산</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">작은 조각 모음</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">21</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">17</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">156</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">JayoonKoo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">156</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/JayoonKoo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JayoonKoo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:rnwkdbs12@gmail.com" title="E-Mail → mailto:rnwkdbs12@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/JayoonKoo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210909-fetch-abort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210909-fetch-abort/" class="post-title-link" itemprop="url">fetch-abort</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Fetch-Abort"><a href="#Fetch-Abort" class="headerlink" title="Fetch: Abort"></a>Fetch: Abort</h1><p>fetch 는 promise를 반환하고 자바스크립트에서는 fetch를 중단하는 개념이 없다. 이런 목적을 위해 내장된 객체인 <code>AbortController</code>가 있다.<br>이것은 fetch 뿐만 아니라 비동기 작업에서도 사용될 수 있다.</p>
<h2 id="The-AbortController-object"><a href="#The-AbortController-object" class="headerlink" title="The AbortController object"></a>The AbortController object</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br></pre></td></tr></table></figure>

<p>반환하는 객체는 간단하다.</p>
<ul>
<li><code>abort()</code> 메서드를 갖는다.</li>
<li>이벤트 등록을 위한 <code>signal</code> 프로퍼티를 갖는다.</li>
</ul>
<p><code>abort()</code>가 호출되었을 때</p>
<ul>
<li><code>controller.signal</code> 은 <code>abort</code> 이벤트를 내보낸다.</li>
<li><code>controller.signal.aborted</code> 프로퍼티가 <code>true</code>가 된다.</li>
</ul>
<p>취소 가능한 작업을 <code>controller.signal</code>에 리스너로 등록한다. <code>controller.abort()</code>를 호출할때 리스너가 트리거 된다.</p>
<p>fetch를 포함하지 않은 예제는 다음과 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"><span class="keyword">let</span> signal = controller.signal;</span><br><span class="line"></span><br><span class="line"><span class="comment">// teh party that performs a cancelable operation</span></span><br><span class="line"><span class="comment">// gets &quot;signal&quot; object</span></span><br><span class="line"><span class="comment">// and sets the listener to trigger when controller.abort() is called</span></span><br><span class="line">signal.addEventListener(<span class="string">&quot;abort&quot;</span>, <span class="function">() =&gt;</span> alert(<span class="string">&quot;abort!!&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// the other party, that cancels (at any point later)</span></span><br><span class="line">controller.abort(); <span class="comment">// abort!!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//the event triggers and signal.aborted becomes true</span></span><br><span class="line">alert(signal.aborted); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>코드에서 AbortController 없이 비슷한 작업을 할 수 있지만 fecth 가 AbortController 객체와 함께 작동하고 통합된다는것이 중요하다.</p>
<h2 id="Using-with-fetch"><a href="#Using-with-fetch" class="headerlink" title="Using with fetch"></a>Using with fetch</h2><p><code>AbortController</code>에 <code>signal</code>프로퍼티를 <code>fetch</code>에 옵션으로 전달해 주면 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line">fetch(url, &#123;</span><br><span class="line">  <span class="attr">signal</span>: controller.signal,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>fetch가 중단되면 <code>AbortError</code>를 던진다. <code>try..catch</code>를 통해서 에러를 잡을 수 있다.</p>
<p>전체 예제</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// abort in 1 second</span></span><br><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbofrtController();</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> controller.abort(), <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&quot;/article/fetch-abort/demo/hang&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">signal</span>: controller.signal,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.name == <span class="string">&quot;AbortError&quot;</span>) &#123;</span><br><span class="line">    alert(<span class="string">&quot;Aborted!&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="AbortController-is-scalable"><a href="#AbortController-is-scalable" class="headerlink" title="AbortController is scalable"></a>AbortController is scalable</h2><p><code>AbortController</code>은 확장가능햇 한번에 여러 fetch를 중단시킬 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> urls = [...];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"></span><br><span class="line"><span class="comment">// an array of fetch promises</span></span><br><span class="line"><span class="keyword">let</span> fetchJobs = urls.map(<span class="function"><span class="params">url</span> =&gt;</span> fetch(url, &#123;</span><br><span class="line">	<span class="attr">signal</span>: controller.signal</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> results = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(fetchJobs);</span><br><span class="line"></span><br><span class="line"><span class="comment">// if controller.abort() is called from elsewhere, it aborts all fetches</span></span><br></pre></td></tr></table></figure>

<p>다른 비동기 작업도 <code>fetch</code>와 함께 하나의 <code>AbortController</code>로 멈출 수 있다.</p>
<p>우린 단지 <code>abort</code> 이벤트를 들으면 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> urls = [...];</span><br><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ourJob = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>  &#123;</span><br><span class="line">	<span class="comment">// our task</span></span><br><span class="line">	controller.signal.addEventListener(<span class="string">&#x27;abort&#x27;</span>, reject);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fetchJobs = urls.map(<span class="function"><span class="params">url</span> =&gt;</span> fetch(url, &#123;</span><br><span class="line">	<span class="attr">signal</span>: controller.signal</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Wait for feches and our tast in parallel</span></span><br><span class="line"><span class="keyword">let</span> results = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([...fetchJobs, ourJob]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// if controller.abort() is called from elsewhere, it aborts all fetches and our Job</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210910-fetch%EC%99%80%20cross-origin%EC%9A%94%EC%B2%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210910-fetch%EC%99%80%20cross-origin%EC%9A%94%EC%B2%AD/" class="post-title-link" itemprop="url">fetch와 cross-origin요청</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="fetch와-Cross-Origin-요청"><a href="#fetch와-Cross-Origin-요청" class="headerlink" title="fetch와 Cross-Origin 요청"></a>fetch와 Cross-Origin 요청</h1><p>도메인이나 서브도메인, 프로토콜, 포트가 다른 곳에 요청을 보내는 것을 Croww-Origin Request(크로스 오리진 요청) 이라고 한다. 크로스 오리진 요청을 보내려면 리모트 오리진에서 전송받은 특별한 헤더가 필요하다. 이러한 정책을 CORS라고 부른다.</p>
<h2 id="왜-CORS-가-필요한가에-대한-짧은-역사"><a href="#왜-CORS-가-필요한가에-대한-짧은-역사" class="headerlink" title="왜 CORS 가 필요한가에 대한 짧은 역사"></a>왜 CORS 가 필요한가에 대한 짧은 역사</h2><p>과거 수 년 동안, 한 사이트의 스크립트에서 다른 사이트에 있는 콘텐츠에 접근할 수 없다는 제약이 있었다. 더 강력한 작업을 위해서 다른 웹사이트로에 요청이 필요했다.</p>
<p>여러가지 트릭이 있었지만, 오랜 논의 끝에 크로스 오리진 요청을 허용 하기로 결정했다. 대신 크로스 오리진 요청은 서버에서 명시적으로 크로스 오리진 요청을 ‘허가’ 했다는 것을 알려주는 특별한 헤더를 전송받았을 때만 가능하도록 제약을 걸었다.</p>
<h2 id="안전한-요청"><a href="#안전한-요청" class="headerlink" title="안전한 요청"></a>안전한 요청</h2><p>안전한 요청은 다음과 같은 두 가지 조건 모두를 충족한다.</p>
<ol>
<li>안전한 메서드 - GET이나 POST, HEAD를 사용한 요청</li>
<li>안전한 헤더 - 다음 목록에 속하는 헤더<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>값이 application/x-www-form-urlencoded나 multipart/form-data, text/plain 인 Content-Type</li>
</ul>
</li>
</ol>
<p>표준이 아닌 헤더가 들어있거나 안전하지 않은 메서드를 사용한 요청은 안전한 요청이 될 수 없다. 그런데 시간이 지나고 개발자가 스크립트를 사용해 안전하지 않은 요청을 보낼 수 있게되자, 브라우저는 안전하지 않은 요청을 서버에 전송하기 전에 preflight 요청을 먼저 전송해 서버가 크로스 오리진 요청을 받을 준비가 되어있는지 확인한다.</p>
<p>이때 서버에서 크로스 오리진 요청은 허용하지 않는다는 정보를 담은 헤더를 브라우저에 응답하면 안전하지 않은 요청은 서버에 전송되지 않는다.</p>
<h2 id="CORS와-안전한-요청"><a href="#CORS와-안전한-요청" class="headerlink" title="CORS와 안전한 요청"></a>CORS와 안전한 요청</h2><p>크로스 오리진 요청을 보낼 경우 브라우저는 항상 <code>Origin</code>이라는 헤더를 요청에 추가해서 자신에 도메인을 적는다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET /request</span><br><span class="line">Host: anywhere.com</span><br><span class="line">Origin: https://javascript.info</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>서버는 <code>Origin</code>을 검사하고 요청을 받아들이기로 동의한 상태라면 특별한 헤더 <code>Access-Control-Allow-Origin</code>을 응답에 추가한다. 여기에 오리진 정보나 * 를 붙히면 응답에 성공하고 그렇지 않으면 실패하게 된다.</p>
<p>이때 브라우저는 중재인의 역할을 수행한다.<br>서버에서 크로스 오리진 요청을 수행한 경우, prefilght 요청에 응답은 다음과 같은 형태를 뛴다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br><span class="line">Content-Type:text/html; charset=UTF-8</span><br><span class="line">Access-Control-Allow-Origin: https://javascript.info</span><br></pre></td></tr></table></figure>

<img src="/images/210910-fetch와 cross-origin요청/1.png" width="500">

<h2 id="응답-헤더"><a href="#응답-헤더" class="headerlink" title="응답 헤더"></a>응답 헤더</h2><p>크로스 오리진 요청이 이루어진 경우, 자바스크립트는 기본적으로 안전한 응답 헤더로 분류되는 헤더에만 접속할 수 있다.</p>
<ul>
<li>Cache-Control</li>
<li>Content-Language</li>
<li>Content-Type</li>
<li>Expires</li>
<li>Last-Modified</li>
<li>Pragma</li>
</ul>
<p>이 외의 응답 헤더에 접근하면 에러가 발생한다.</p>
<blockquote>
<p>위 리스트엔 <code>Contnet-Length</code>헤더는 없다.</p>
</blockquote>
<p>안전하지 않는 응답 헤더에 접근하려면 서버에서 <code>Access-Contorol-Expose-Headers</code>라는 헤더를 보내줘야 한다. 여기에 자바스크립트 접근을 허용하는 안전하지 않은 헤더 목록이 담겨 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">200</span> OK</span><br><span class="line">Content-Type:text/html; charset=UTF-<span class="number">8</span></span><br><span class="line">Content-Length: <span class="number">12345</span></span><br><span class="line">API-Key: 2c9de507f2c54aa1</span><br><span class="line">Access-Control-Allow-Origin: https:<span class="comment">//javascript.info</span></span><br><span class="line">Access-Control-Expose-Headers: Content-Length,API-Key</span><br></pre></td></tr></table></figure>

<h2 id="안전하지-않은-요청"><a href="#안전하지-않은-요청" class="headerlink" title="안전하지 않은 요청"></a>안전하지 않은 요청</h2><p>요츰엔 <code>GET</code>, <code>POST</code> 뿐만 아니라 <code>PATCH</code>, <code>DELETE</code> 등 어떤 메서드도 사용할 수 있다.</p>
<p>과거에는 get 과 post 만 가능한 웹서버만 있었고 요즘도 종종 있다. 혼란스런 상황을 방지하기 위해서 안전하지 않은 요청( 위에서 안전한 요청에 조건을 벗어나는 요청) 을 보낼 때는 바로 요청을 보내지 않고 <code>preflight</code> 요청을 사전에 보낸다.</p>
<p>preflight 요청은 <code>OPTIONS</code> 메서드를 사용하고 두 헤더가 함께 들어가며, 본문은 비어있다.</p>
<ul>
<li><code>Access-Control-Request-Method</code> - 안전하지 않은 요청에 사용하는 메서드 정보</li>
<li><code>Access-Contorl-Request-Header</code> - 안전하지 않은 요청에 사용하는 헤더 목록</li>
</ul>
<p>안전하지 않은 요청을 허용하기로 협의했다면 서버는 본문이 비어있고 상태 코드가 200인 응답을 다음과 같은 헤더와 함께 브라우저로 보낸다.</p>
<ul>
<li><code>Access-Contorl-Allow-Origin</code> - <code>*</code>나 요청을 보낸 오리진</li>
<li><code>Access-Control-Allow-Method</code> - 허용된 메서드 정보</li>
<li><code>Access-Control-Allow-Headers</code> - 허용된 헤더 목록</li>
<li><code>Access-Control-Max-Age</code> - 퍼미션 체크 여부를 몇 초간 캐싱해 놓을지를 명시. 이렇게 캐싱해 놓으면 브라우저는 일정 기간 동안 preflight 요청을 생략하고 안전하지 않은 요청을 보낼수 있다.</li>
</ul>
<img src="/images/210910-fetch와 cross-origin요청/2.png" width="500">

<p>실제 <code>PATCH</code> 메서드를 사욭하는 예시를 통해서 확인해 본다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&quot;https://site.com/service.json&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;PATCH&quot;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">    <span class="string">&quot;API-Key&quot;</span>: <span class="string">&quot;secret&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>위 요청은 안전한 요청에 조건을 벗어나므로 안전하지 않은 요청이다.</p>
<h3 id="1-단계-priflight-요청"><a href="#1-단계-priflight-요청" class="headerlink" title="1 단계 priflight 요청"></a>1 단계 priflight 요청</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS /service.json</span><br><span class="line">Host: site.com</span><br><span class="line">Origin: https://javascript.info</span><br><span class="line">Access-Control-Request-Method: PATCH</span><br><span class="line">Access-Control-Request-Headers: Content-Type,API-Key</span><br></pre></td></tr></table></figure>

<h3 id="2-단계-priflight-응답"><a href="#2-단계-priflight-응답" class="headerlink" title="2 단계 priflight 응답"></a>2 단계 priflight 응답</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br><span class="line">Access-Control-Allow-Origin: https://javascript.info</span><br><span class="line">Access-Control-Allow-Methods: PUT,PATCH,DELETE</span><br><span class="line">Access-Control-Allow-Headers: API-Key,Content-Type,If-Modified-Since,Cache-Control</span><br><span class="line">Access-Control-Max-Age: 86400</span><br></pre></td></tr></table></figure>

<h3 id="3-단계-실제-요청"><a href="#3-단계-실제-요청" class="headerlink" title="3 단계 실제 요청"></a>3 단계 실제 요청</h3><p>이제 부터는 안전한 요청에 대한 프로세스와 동일하다. 본 요청은 크로스 오리진 요청이기 때문에 <code>Origin</code> 헤더가 붙는다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PATCH /service.json</span><br><span class="line">Host: site.com</span><br><span class="line">Content-Type: application/json</span><br><span class="line">API-Key: secret</span><br><span class="line">Origin: https://javascript.info</span><br></pre></td></tr></table></figure>

<h3 id="4단계-실제-응답"><a href="#4단계-실제-응답" class="headerlink" title="4단계 실제 응답"></a>4단계 실제 응답</h3><p>서버에서 본 응답에 <code>Access-Contorl-Allow-Origin</code> 헤더를 반드시 붙여야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: https://javascript.info</span><br></pre></td></tr></table></figure>

<blockquote>
<p>preflight 요청은 자바스크립트를 사용해 관찰 할 수 없다. preflight 요청이 거부된 경우 에러만 확인할 수 있다.</p>
</blockquote>
<h2 id="자격-증명"><a href="#자격-증명" class="headerlink" title="자격 증명"></a>자격 증명</h2><p>크로스 오리진 요청은 기본적으로 자격 증명이 함께 전송되지 않는다. 이렇게 한 이유는 크로스 오리진 요청 시 자격 증명을 함께 전송할 수 있으면 사용자 동의 없이 자바스크립트로 민감한 정보에 접근할 수 있기 때문이다.</p>
<p>그럼에도 불구하고 자걱 증명이 담긴 헤더를 명시적으로 허용하겠다는 세팅을 서버에 해줄 수 있다.</p>
<p><code>fetch</code> 메서드에 자격 정보를 함께 전송하려면 다음과 같이 <code>credentials: &quot;include&quot;</code> 옵션을 추가하면 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;http://another.com&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&quot;include&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>서버에서 자격 증명 정보가 담긴 요청을 받아들이기로 했다면 응답에 <code>Access-Control-Allow-Origin</code> 헤더와 함께 <code>Access-Conrol-Allow-Credentials: true</code> 헤더를 추가해서 보낸다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br><span class="line">Access-Control-Allow-Origin: https://javascript.info</span><br><span class="line">Access-Control-Allow-Credentials: true</span><br></pre></td></tr></table></figure>

<p>이때, <code>Access-Contorl-Allow-Origin</code>에 *를 쓸 수 없다. 정확한 오리진 정보만 명시되어야 서버에서 신뢰할 수 있기 때문이다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210914-URL%20objects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210914-URL%20objects/" class="post-title-link" itemprop="url">URL objects</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="URL-objects"><a href="#URL-objects" class="headerlink" title="URL objects"></a>URL objects</h1><p>URL 객체를 사용할 수 있다. 물론 string을 사용해도 충분 하지만 유요한 기능을 제공 하기도 한다.</p>
<h2 id="Creating-a-URL"><a href="#Creating-a-URL" class="headerlink" title="Creating a URL"></a>Creating a URL</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> URL(url, [base]);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>url</code> - full url 이나 베이스가 설정되어 있다면 패스 만</li>
<li><code>base</code> - base가 설정 되어 있으면 base와 관련지어서 생성된다.</li>
</ul>
<p>다음에 두가지 url은 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url1 = <span class="keyword">new</span> URL(<span class="string">&quot;https://javascript.info/profile/admin&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> url2 = <span class="keyword">new</span> URL(<span class="string">&quot;/profile/admin&quot;</span>, <span class="string">&quot;https://javascript.info&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>url 객체를 사용하면 객체에 구성소에 바로 접근할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> URL(<span class="string">&quot;https://javascript.info/url&quot;</span>);</span><br><span class="line"></span><br><span class="line">alert(url.protocol); <span class="comment">// https:</span></span><br><span class="line">alert(url.host); <span class="comment">// javascript.info</span></span><br><span class="line">alert(url.pathname); <span class="comment">// /url</span></span><br></pre></td></tr></table></figure>

<p>url에 구조는 다음과 같다.</p>
<img src="/images/210914-URL objects/1.png" width="500">

<blockquote>
<p>네트워킹 메서드에 문자열 대신에 URL Object를 전달할 수 있다.<br>예를 들면 <code>fetch</code>나 <code>XMLHttpRequest</code>에서</p>
</blockquote>
<h2 id="SearchParams-“-”"><a href="#SearchParams-“-”" class="headerlink" title="SearchParams “?..”"></a>SearchParams “?..”</h2><p>파라미터는 만약 공백이 포함되어 있거나 라틴 글자가 아니면 인코딩이 필요하다.</p>
<p>글새 <code>url.searchParams</code>는 유용한 메서드를 제공한다.</p>
<ul>
<li><code>append(name, value)</code> - name에 해당하는 파라미터를 추가한다.</li>
<li><code>delete(name)</code> - name 에 해당하는 파라미터를 제거한다.</li>
<li><code>get(name)</code> - name 에 해당하는 파라미터를 얻는다.</li>
<li><code>getAll(name)</code> - name 에 해당하는 파라미터를 모두 얻는다.(여러개일 경우)</li>
<li><code>has(name)</code> - name에 해당하는 파리머터가 있는지 체크한다.</li>
<li><code>set(name, value)</code> - set/relace 파리미터</li>
<li><code>sort()</code> - 이름으로 정렬한다, 드물게 필요하다.</li>
</ul>
<p>사용 예시는 다음과 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> URL(<span class="string">&quot;https://google.com/search&quot;</span>);</span><br><span class="line"></span><br><span class="line">url.searchParams.set(<span class="string">&quot;q&quot;</span>, <span class="string">&quot;test me!&quot;</span>); <span class="comment">// added parameter with a space and !</span></span><br><span class="line"></span><br><span class="line">alert(url); <span class="comment">// https://google.com/search?q=test+me%21</span></span><br><span class="line"></span><br><span class="line">url.searchParams.set(<span class="string">&quot;tbs&quot;</span>, <span class="string">&quot;qdr:y&quot;</span>); <span class="comment">// added parameter with a colon :</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// parameters are automatically encoded</span></span><br><span class="line">alert(url); <span class="comment">// https://google.com/search?q=test+me%21&amp;tbs=qdr%3Ay</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// iterate over search parameters (decoded)</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [name, value] <span class="keyword">of</span> url.searchParams) &#123;</span><br><span class="line">  alert(<span class="string">`<span class="subst">$&#123;name&#125;</span>=<span class="subst">$&#123;value&#125;</span>`</span>); <span class="comment">// q=test me!, then tbs=qdr:y</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Encoding"><a href="#Encoding" class="headerlink" title="Encoding"></a>Encoding</h2><p>url에 가능한 글자가 RFC3986에 정의 되어 있다. 제공되지 않는 문자열에 경우 인코딩이 필요하다.</p>
<p>다행인건, URL Object를 사용하면 자동으로 이 작업을 해준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> URL(<span class="string">&quot;https://ru.wikipedia.org/wiki/Тест&quot;</span>);</span><br><span class="line"></span><br><span class="line">url.searchParams.set(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;ъ&quot;</span>);</span><br><span class="line">alert(url); <span class="comment">//https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D1%81%D1%82?key=%D1%8A</span></span><br></pre></td></tr></table></figure>

<h3 id="Encoding-String"><a href="#Encoding-String" class="headerlink" title="Encoding String"></a>Encoding String</h3><p>URL Object가 아니라 문자열을 사용하는 경우 특수 문자를 수동으로 인코딩/ 디코딩 해야 한다.</p>
<p>몇가지 내장된 메소드는 다음과 같다.</p>
<ul>
<li><code>encodeURI</code></li>
<li><code>decodeURI</code></li>
<li><code>encodeURIComponent</code> - 파라미터나 헤쉬 값 같은 것</li>
<li><code>decodeURIComponent</code></li>
</ul>
<p><code>encodeURI</code>와 <code>encodeURIComponent</code>에 차이는 무엇일까?</p>
<p>예시 url</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://site.com:8080/path/page?p1=v1&amp;p2=v2#hash</span><br></pre></td></tr></table></figure>

<p><code>:</code>, <code>?</code>, <code>=</code>, <code>&amp;</code>, <code>#</code>와 같은 문자가 url에서 허용된다. 파라미터로 사용되는 문자열에는 이런 문자열이 포함되어야 하는데 url에 허용되는 문자열이기 때문에 인코딩 되지 않는 문제가 있다.</p>
<p>따라서 이러한 문자는 형식을 깨드리지 않고 인코딩되어야 한다.</p>
<p>전체 URL은 <code>encodeURI</code>를 사용한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// using cyrillic characters in url path</span></span><br><span class="line"><span class="keyword">let</span> url = <span class="built_in">encodeURI</span>(<span class="string">&quot;http://site.com/привет&quot;</span>);</span><br><span class="line"></span><br><span class="line">alert(url); <span class="comment">// http://site.com/%D0%BF%D1%80%D0%B8%D0%B2%D0%B5%D1%82</span></span><br></pre></td></tr></table></figure>

<p>매개변수를 사용하는 경우 <code>encodeURIComponent</code>를 대신해서 사용해야 한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> music = <span class="built_in">encodeURIComponent</span>(<span class="string">&quot;Rock&amp;Roll&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> url = <span class="string">`https://google.com/search?q=<span class="subst">$&#123;music&#125;</span>`</span>;</span><br><span class="line">alert(url); <span class="comment">// https://google.com/search?q=Rock%26Roll</span></span><br></pre></td></tr></table></figure>

<p><code>encodeURI</code>와 비교하면 다음과 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> music = <span class="built_in">encodeURI</span>(<span class="string">&quot;Rock&amp;Roll&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> url = <span class="string">`https://google.com/search?q=<span class="subst">$&#123;music&#125;</span>`</span>;</span><br><span class="line">alert(url); <span class="comment">// https://google.com/search?q=Rock&amp;Roll</span></span><br></pre></td></tr></table></figure>

<p>&amp; 은 Rock 그리고 Roll 이라는 파라미터를 의미하고 이는 적절히 인코딩 되어야 한다. 그런데 encdoeURI를 사용하면 &amp;를 허용하기 때문에 인코딩 되지 않는 문제가 있다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/git/210721-git-basic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/git/210721-git-basic/" class="post-title-link" itemprop="url">git-basic</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-20 21:39:38" itemprop="dateCreated datePublished" datetime="2021-09-20T21:39:38+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="git-basic"><a href="#git-basic" class="headerlink" title="git basic"></a>git basic</h1><ul>
<li>리눅스에 대해서 간략히 공부했다.</li>
<li>git의 대한 기본적인 설정방법과 사용법을 알아보고 리뷰어와 조를 이루어 풀리퀘스트를 요청화는 과정을 연습해 보았다.</li>
</ul>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>리눅스는 unix 기반에 오픈소스 운영체제로서 수많은 배포 버전이 있다. 헬싱키 대학생이던 리누스 토발즈가 앤디 타넨 비우의 MINX를 개조한 Linux를 배포했다.</p>
<h3 id="Kernel"><a href="#Kernel" class="headerlink" title="Kernel"></a>Kernel</h3><p>커널은 하드웨어와 응용 프로그램을 이어주는 운영체제의 핵심 소프트 웨어이다.</p>
<h3 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h3><p>쉘은 운영체제의 커널과 사용자를 이어주는 소프트웨어로서 사용자가 Kernel를 제어하기 위해 새용한다.</p>
<h2 id="git-object"><a href="#git-object" class="headerlink" title="git object"></a>git object</h2><p>git에는 3가지의 객체가 있다.</p>
<ol>
<li>Blob: 파일 하나의 대한 정보로서 사진으로 비유하자면 사진 파일 자체인 .jpg 파일이 될 수 있다.</li>
<li>Tree: Blob 이나 subtree 의 메타데이터로서 사진으로 비유하자면 찍히 날짜에 대한 정보라던지, 저장된 위치 같은 정보가 될 수 있다.</li>
<li>Commit: 커밋 순간의 스냅샷으로서 버전으로 저장하려고 압축한 파일들과 같다.</li>
</ol>
<h2 id="git-저장소"><a href="#git-저장소" class="headerlink" title="git 저장소"></a>git 저장소</h2><p>git repo 에는 크게 Local 저장소와 remote 저장소가 있다. 흔히 사용하는 github과 같은 서비스가 remote 저장소라고 할 수 있다.</p>
<p>Local 저장소는 크게 3가지 상태로 나눌 수 있다.</p>
<ol>
<li>Working Directory : 지금 작업하고 있는 폴더이다. <code>git init</code>을 통해 git repo를 만들거나 clone 받은 폴더가 될 수 있다.</li>
<li>staging area : <code>git add</code> 를 통해 추가한 파일들에 상태를 말한다. 아직 커밋을 하기 전 상태이며 add를 해야지 git 에서 버전을 추적할 수 있다.</li>
<li>localrepo : <code>git commit</code>을 수행해서 버전이 등록한 파일들에 상태이다. <code>git push</code>를 통해 remote 저장소로 파일을 올리거나 <code>git pull</code>을 통해 받아올 수 있다.</li>
</ol>
<img src="/images/img/git-process.png" width="500">

<h2 id="configure"><a href="#configure" class="headerlink" title="configure"></a>configure</h2><p>깃을 사용하기전 환경 설정으로 해주면 좋을 것들을 알아본다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;당신의유저네임&quot;</span><br><span class="line">$ git config --global user.email &quot;당신의메일주소&quot;</span><br><span class="line">$ git config --global core.editor &quot;vim&quot;</span><br><span class="line">$ git config --global core.pager &quot;cat&quot;</span><br><span class="line">$ git config --global init.defaultBranch &quot;main&quot;</span><br></pre></td></tr></table></figure>

<p>commit 을 입력할 editor을 vim으로 설정하는 설정과 default branch를 main으로 바꾸는 설정이 포함되어 있다. 필수적인 사항은 아니다.</p>
<p>만약 환경변수 설정을 내리고 싶다면 <code>--unset</code> 플래그를 추가하면된다.</p>
<p><code>git config --global --unset core.editor</code></p>
<h2 id="Commit-Convention"><a href="#Commit-Convention" class="headerlink" title="Commit Convention"></a>Commit Convention</h2><p>commit을 한번에 알기쉽게 하기위해서 보편적으로 사용하는 규칙들이 있다.</p>
<ul>
<li>feat: features (기능 개발에 대한 커밋)</li>
<li>docs: documentations (문서 작업에 대한 커밋)</li>
<li>conf: configurations (환경 변수 설정에 대한 커밋 ex)node pakage)</li>
<li>test: test (test 코드에 대한 수정 생성에 대한 커밋)</li>
<li>fix: bug-fix (버그를 고치거나 에러를 고친 커밋)</li>
<li>refactor: refactoring (같은 기능을 하나 보기 좋고 효율적인 코드로 대체했을때)</li>
<li>ci: Continuous Integration</li>
<li>build: Build</li>
<li>perf: Performance</li>
</ul>
<p>이 외에도 제목은 50자 이내로 간결하게 작성하고 내용은 되도록 상세히 작성하도록 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">feat: add back button</span><br><span class="line"></span><br><span class="line">add back button using &lt;buuton&gt; tag</span><br><span class="line"></span><br><span class="line">TODO</span><br><span class="line">- create page</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="작업의-단위"><a href="#작업의-단위" class="headerlink" title="작업의 단위"></a>작업의 단위</h2><p>commit 작업의 단위는 어떻게 될까?</p>
<p>commit 을 하는 단위는 어떤 동작을 기준으로 한다고 보면된다. JS에서 예를 들자면 어떤 함수를 만들고 동작까지 확인했다면 그때를 commit 기점으로 생각하면된다.</p>
<p>작업 최소 단위로 생각하고 세세하게 작성하도록 한다.</p>
<h2 id="staging-area가-있는-이유"><a href="#staging-area가-있는-이유" class="headerlink" title="staging area가 있는 이유?"></a>staging area가 있는 이유?</h2><p>만약 staging area 가 없다면 어떻게 될까?</p>
<p>우리는 모든 파일에 변경에 커밋을 한번에 날려야할 것이다. 만약 문서화 작업에대한 변경과 기능 추가에 대한 변경이 존재한다면 이를 한꺼번에 커밋해야 되는 것이다.</p>
<p>stging area 가 있기 때문에 하나의 파일을 올려두고 staging area 에 있는 파일을 commit 대상으로 삼을 수 있다.</p>
<h2 id="pull-request-실습"><a href="#pull-request-실습" class="headerlink" title="pull request 실습"></a>pull request 실습</h2><p>github repo &gt; Settings &gt; Mnage access &gt; Invate a collaborator 를 통해 코드 리뷰어를 초대한다.</p>
<p>새로운 브렌치를 만들어 기능을 만든다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git branch [new branch name]</span><br><span class="line">$ git checkout [new branch name]</span><br><span class="line">$ git add [수정한 파일]</span><br><span class="line">$ git commit</span><br><span class="line">$ git push -u origin [new branch name]</span><br></pre></td></tr></table></figure>

<p>새로운 브랜치를 로컬에서 생성했다면 remote repo 에는 새로운 브랜치가 없을 것이다. -u 플래그를 통해 새로운 브랜치를 remote repo 에 생성하면서 push 할 수 있다.</p>
<p>github 저장소로 이동하여 pull request를 요청한다.</p>
<p>이제 코드 리뷰어가 코드를 보고 수정할 것을 요청할 것이다. 그럼 다시 로컬 저장소로 돌아와서 파일을 수정하고 push 하는 과정까지 진행하면된다.</p>
<p>코드리뷰어가 확인하고 문제가 없다 판단하면 승인을 해줄 것이다. 그럼 merge 를 클릭하여 remote repo 에 브랜치를 머지하면된다.</p>
<p>로컬 저장소에는 아직 머지 되지 않은 상태 이기 때문에 머지명령어를 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout main</span><br><span class="line">$ git fecth origin main</span><br><span class="line">$ git merge FETCH_HEAD</span><br></pre></td></tr></table></figure>

<p>사실 <code>git pull origin main</code> 을 통해서도 동일한 과정을 진행할 수 있다. 내부적으로 보자면 git pull을 통한 머지가 위에 코드블럭에서 설명한 것을 똑같이 수행한다.</p>
<p>차이점은 fetch를 통해 이시적으로 받아올 수 있기 때문에 변경사항을 확인하면서 머지할 수 있다는 것이다. 복잡한 코드를 머지해야 할때나 다시한번 확인이 필요할 경우가 있을 수 있으니 fetch를 사용하도록 하자.</p>
<h2 id="다음에-배울-것"><a href="#다음에-배울-것" class="headerlink" title="다음에 배울 것"></a>다음에 배울 것</h2><p>branch 를 더 배울 예정이다.</p>
<p>풀 리퀘스트하는 과정을 더 연습해서 익숙해 지도록 해야 겠다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/git/210728-git-branch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/git/210728-git-branch/" class="post-title-link" itemprop="url">git-branch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-20 21:39:38" itemprop="dateCreated datePublished" datetime="2021-09-20T21:39:38+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h1><p>분기점을 생성하여 독립적으로 코드를 변경할 수 있도록 도와주는 모델</p>
<p>모든 작업을 시작할때에는 브랜치를 만들어서 작업 하기를 권장.</p>
<p>기능 구현이 완료 되었으면 해당 브랜치를 main 브렌치로 머지하고 해당 브랜치를 삭제 하는 것으로 작업을 하면 된다.</p>
<br/>

<h2 id="git-flow"><a href="#git-flow" class="headerlink" title="git flow"></a>git flow</h2><p>대표적인 branchg models 중에 하나이다.</p>
<p>git flow 는 branch 를</p>
<ul>
<li>master</li>
<li>develop</li>
<li>hotfix</li>
<li>release</li>
<li>feature</li>
</ul>
<p>로 나누어서 관리한다.</p>
<img src="/images/img/210728-git-branch-1.png" >

<p>메인 스트림 브렌치는 master(main) 과 devlop 으로 나뉜다.</p>
<p>프로젝트를 생성하면 main 브렌치와 devlop 브렌치로 나뉘고 각각 팀원들은 devlop 브렌치에서 작업을 수행한다.</p>
<p>새로운 기능을 구현해야 할때에는 feature 브렌치를 만든다.</p>
<p>feature 브렌치에서 기능이 완료 된 후 develop 브렌치로 머지하고 feature 브렌치는 삭제한다.</p>
<p>기능이 어느정도 개발이 완료되서 새로운 버전을 출시해도 되겠다 싶으면 release 브렌치를 만든다.</p>
<p>release 브렌치에서는 어떤 기능을 개발해서는 안되고 버전을 올리기 전에 문서를 정리한더 던지 사용자에게 보이지 말하야 할 부분을 가린다던지에 기능 개발 외적인 작업을 수행한다.</p>
<p>작업이 완료되면 relesae를 끝내면 되는데 이때 작업한 내용은 각각 main 브렌치와 develop 브렌치로 병합된다.</p>
<p>hotfix 는 버그가 생겼다던지 빠른 시일내에 고쳐야 하는 긴급한 이슈가 생겼을때 만든다.</p>
<p>긴급히 수정한 이후에는 release 와 같이 main 과 develop 브렌치로 병합된다.</p>
<h3 id="git-flow-command"><a href="#git-flow-command" class="headerlink" title="git flow command"></a>git flow command</h3><p>홈 브루를 이용하여 git flow를 설치한다.</p>
<p><code>brew install git-flow-avh</code></p>
<h4 id="초기화"><a href="#초기화" class="headerlink" title="초기화"></a>초기화</h4><p>깃 레포에서 실행.</p>
<p><code>git flow init</code></p>
<h4 id="feature"><a href="#feature" class="headerlink" title="feature"></a>feature</h4><p>새기능 브렌치 만들고 브렌치로 switch</p>
<p><code>git flow feature start MYFEATURE</code></p>
<p>기능 개발 완료</p>
<p><code>git flow feature finish MYFEATRUE</code></p>
<p>기능을 공동으로 개발하고 있을 때 (게시)</p>
<p><code>git flow feature publish MYFEATURE</code></p>
<p>게시된 기능 가져오기</p>
<p><code>git flow feature pull origin MYFEATURE</code></p>
<h4 id="릴리즈"><a href="#릴리즈" class="headerlink" title="릴리즈"></a>릴리즈</h4><p>릴리즈 시작</p>
<p><code>git flow release start version</code></p>
<p>릴리즈 완료</p>
<p><code>git flow release finish version</code></p>
<p>릴리즈 완료후 테그에 대한 정보도 확인해야 한다.</p>
<p>테그가 있는지 확인하려면</p>
<p><code>git tag</code></p>
<p>tag 를 원격 저장소로 push 하려면</p>
<p><code>git push --tags</code></p>
<h4 id="핫-픽스"><a href="#핫-픽스" class="headerlink" title="핫 픽스"></a>핫 픽스</h4><p>핫 픽스 시작</p>
<p><code>git flow hitfix start version</code></p>
<p>핫 픽스 완료</p>
<p><code>git flow hotfix finish version</code></p>
<br/>

<h2 id="충돌-되돌리기"><a href="#충돌-되돌리기" class="headerlink" title="충돌, 되돌리기"></a>충돌, 되돌리기</h2><p>충돌이 발생하면 충돌이 발생한 파일에 구분선을 통해서 어느 부분이 다른지 표시해 준다.</p>
<p>해당 파일을 열어서 몇가지 선택 하면 된다.</p>
<ol>
<li>현재 로컬 코드로 만든다.</li>
<li>리모트 코드로 만든다.</li>
<li>로컬과 리모트 코드를 섞는다.</li>
</ol>
<p>만약 파일에 이름을 변경 하고 싶다거나 이동하고 싶다면?</p>
<p>그냥 하게 되면 파일이 삭제되고 다시 생성하는것과 같게 된다.</p>
<p>따라서 그동안의 변경 이력이 다 날라가게 됨으로 git 명령어를 이용한다.</p>
<p><code>git mv ~</code></p>
<h3 id="되돌리기"><a href="#되돌리기" class="headerlink" title="되돌리기"></a>되돌리기</h3><ol>
<li>reset</li>
<li>revert</li>
</ol>
<p>어느 한 시점만 삭제하는것은 불가능하다.</p>
<p>그 시점으로 돌아가서 다시 시작하는 것은 가능하다.</p>
<p>reset을 통해 되돌아 가면 되돌아간 내역들이 모두 삭제됨으로 권장하는 방법은 아니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~3</span><br></pre></td></tr></table></figure>

<p>revert 를 통해서 돌아가기를 권장함.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git revert --no-commit HEAD~3.행</span><br><span class="line"></span><br><span class="line">git commit</span><br></pre></td></tr></table></figure>

<p>HEAD 에서 3개의 commit을 순서대로 올라가 해당 내역에 대한 commit, push 수행</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/git/210817-Git%EC%9D%98%20%EA%B8%B0%EC%B4%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/git/210817-Git%EC%9D%98%20%EA%B8%B0%EC%B4%88/" class="post-title-link" itemprop="url">Git의 기초</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-20 21:39:38" itemprop="dateCreated datePublished" datetime="2021-09-20T21:39:38+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="git-기초"><a href="#git-기초" class="headerlink" title="git 기초"></a>git 기초</h1><p>모르고 있었던 내용을 추가해서 정리한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line"> M README</span><br><span class="line">MM Rakefile</span><br><span class="line">A  lib/git.rb</span><br><span class="line">M  lib/simplegit.rb</span><br><span class="line">?? LICENSE.txt</span><br></pre></td></tr></table></figure>

<p>아직 추적하고 있지 않는 파일은 <code>??</code> 로 뜬다. <code>README</code> 파일은 아직 <code>staged</code> 상태가 안된 파일이여서 오른쪽에만 <code>M</code>이 붙는다. <code>Rakefile</code> 같은 경우는 수정 후 한번 add 했다가 다시 수정해서 왼쪽에 staged 된 변경사항이라는 정보와 오늘쪽에 staged 안된 변경 사항이라는 정보가 같이 적힌다(<code>MM</code>). staged 상태로 추가한 파일 중 새로 생성한 파일 앞에는 <code>A</code> 표시가 붙난다.</p>
<h2 id="Staged와-Unstaged-상태의-변경-내용을-보기"><a href="#Staged와-Unstaged-상태의-변경-내용을-보기" class="headerlink" title="Staged와 Unstaged 상태의 변경 내용을 보기"></a>Staged와 Unstaged 상태의 변경 내용을 보기</h2><p><code>git diff</code> 명령을 수행하면 수정했지만 아직 staged 상태가 아닌 파일을 비교해 볼 수 있다.</p>
<p>만약 커밋하려고 Staging Area에 넣은 파일의 변경 부분을 보고 싶으면 <code>git diff --staged</code> 옵션을 사용한다.</p>
<h2 id="commit-하기"><a href="#commit-하기" class="headerlink" title="commit 하기"></a>commit 하기</h2><p><code>git commit -v</code> 옵션을 추가하면 편집기에 diff 메세지도 추가된다. 기본적으로넌 <code>git status</code> 명령의 결과가 채워진다.</p>
<h2 id="파일-삭제하기"><a href="#파일-삭제하기" class="headerlink" title="파일 삭제하기"></a>파일 삭제하기</h2><p><code>git rm</code> 명령으로 Tracked 상태의 파일을 삭제한 후 (Staging Area에서 삭제 하는 것) 커밋을 실시. 그냥 제거 하게 되면 Unstaged 상태로 파일이 지워 졌다고 표시함.<br>반면에, <code>git rm</code> 명령어를 사용하면 파일이 지워졌다는 메세지와 함께 staged 된다(파일도 함께 지워짐). 만약 변경하고 Staging Area 에 추가했다면 <code>-f</code> 옵션을 주어 강제로 삭제 해야 한다.</p>
<p><code>Staging Area</code>에서만 제거하고 워킹 디렉토리에 있는 파일은 지우지 않고 남겨두고 싶다면 <code>--cached</code> 옵션을 사용한다.</p>
<p><code>git rm -- cached README</code></p>
<h2 id="파일-이름-변경하기"><a href="#파일-이름-변경하기" class="headerlink" title="파일 이름 변경하기"></a>파일 이름 변경하기</h2><p>이름을 바꿀 때에는 <code>git mv</code>명령을 사용한다.<br><code>git mv file_from file_to</code></p>
<p>이것은 다음 세가지에 명령을 단축한 명령어이다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mv README.md README</span><br><span class="line">$ git rm README.md</span><br><span class="line">$ git add README</span><br></pre></td></tr></table></figure>

<h2 id="커밋-히스토리-조회하기"><a href="#커밋-히스토리-조회하기" class="headerlink" title="커밋 히스토리 조회하기"></a>커밋 히스토리 조회하기</h2><p><code>git log</code></p>
<p>옵션</p>
<p><code>-p</code>, <code>--patch</code> : 각 커밋의 diff 결과를 보여준다. 다른 유용한 옵션으로는 <code>-2</code>가 있는데 최근 두 개의 결과만 보여주는 옵션이다.</p>
<p><code>--stat</code> : 각 커밋의 통계 정보를 조회할 수 있다.</p>
<p><code>--pretty</code> : 히스토리 내용을 보여주는 형식, <code>online</code>, <code>short</code>, <code>full</code>, <code>fuller</code>, <code>format</code> <code>--prety=format: &quot;%h -%an, %ar: %s&quot;</code> 와 같은 방법으로 사용함.</p>
<p><code>--oneline</code> : <code>--pretty=oneline --abbrev-commit</code> 두 옵션을 함께 사용한 것과 같다.</p>
<p><code>--graph</code> : 브랜치와 머지 히스토리를 보여주는 마스키 그래프를 출력한다.</p>
<h3 id="조회-제한-조건"><a href="#조회-제한-조건" class="headerlink" title="조회 제한 조건"></a>조회 제한 조건</h3><p><code>--since</code> 나 <code>--until</code> 같은 시간을 기준으로 조회하는 옵션도 있다.</p>
<p><code>--author</code> 옵션이나 <code>--grep</code> 옵션도 있는데 각각 저자 , 커밋메세지 키워드 기준으로 검색할 수 있다. 두 가지 모두를 만족하는 커밋을 찾으려면 <code>--all-match</code>옵션도 반드시 함깨 사용해야 한다.</p>
<p><code>-S</code> 코드에서 제거되거나 추가된 내용 중에 특정 텍스트가 포함되어 있는지를 검색한다.</p>
<h2 id="되돌리기"><a href="#되돌리기" class="headerlink" title="되돌리기"></a>되돌리기</h2><p>git을 사용하면 우리가 저지른 실수는 대부분 복구할 수 있지만 되돌린 것은 복구할 수 없다.<br>만약 커밋 메세지를 되돌리고 싶다면 파일을 수정하고 staging area에 추가한 다음 <code>--amend</code> 명령어를 추가해서 수정하면된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure>

<p>만약 파일 수정 내용 없이 해당 내용을 입력하면 마지막 커밋 메세지만 수정된다. 명령어를 입력하면 편집기가 열릴때 전에 커밋한 내용이 포함된체로 열린다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &#x27;initail commit&#x27;</span><br><span class="line">$ git add forgotten_file</span><br><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure>

<p>첫번째 커밋은 무시 된다.</p>
<h2 id="파일-상태를-Unstage로-변경하기"><a href="#파일-상태를-Unstage로-변경하기" class="headerlink" title="파일 상태를 Unstage로 변경하기"></a>파일 상태를 Unstage로 변경하기</h2><p>실수로 <code>git add .</code> 같은 명령어를 수행했는데 내려야 한다면 어떻게 해야 할까?</p>
<p><code>git reset HEAD &lt;file&gt;</code> 명령을 수행하면 된다. 만약 잘못 Staging area 에 올린 파일이 README.md 파일이였다면 <code>git reset HEAD README.me</code> 이렇게 입력하면 된다.</p>
<blockquote>
<p>사실 git reset 명령어는 매우 위험하다. 특히 <code>--hard</code> 옵션과 같이 사용할때는 더더욱 그렇다. 하지만 위에서 처럼 옵션 없이 사용하면 워킹 디렉토리의 파일은 건드리지 않는다.</p>
</blockquote>
<h2 id="Modified-파일-되돌리기"><a href="#Modified-파일-되돌리기" class="headerlink" title="Modified 파일 되돌리기"></a>Modified 파일 되돌리기</h2><p>Staging area 에 올리지는 않았는데, modifed 된 상태라면 어떻게 전 상태로 돌릴 수 있을까?</p>
<p><code>git checkout -- &lt;file&gt;</code>을 입력하면 된다. 정상적으로 복원된다.</p>
<blockquote>
<p><code>git checkout - [file]</code>은 꽤 위험한 명령이다. 원래 파일을 덮어 쓰우기 때문에 수정한 내용이 모두 사라진다. 정말 수정한 내용이 필요 없을때만 사용해야 한다.</p>
</blockquote>
<h2 id="리모트-관련-명령어"><a href="#리모트-관련-명령어" class="headerlink" title="리모트 관련 명령어"></a>리모트 관련 명령어</h2><p><code>git remote -v</code> 리모트 저장소에 대한 정보를 표시해 줌.</p>
<p><code>git remote add &lt;저장소 별칭&gt; &lt;url&gt;</code> 저장소 별칭으로 url에 해당하는 저장소를 remote 저장소로 추가한다.</p>
<p><code>git remote remove &lt;저장소 별칭&gt;</code> remote 저장소를 제거한다.</p>
<p><code>git remote rename &lt;이전&gt; &lt;이후&gt;</code> 이전 저장소에 해당하는 remote 저장소에 이름을 이후 저장소로 바꿈</p>
<p><code>git remote show &lt;저장소 별칭&gt;</code> 저장소 별칭에 해당하는 다양한 정보를 출력해 준다.</p>
<h2 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h2><p><code>git tag</code> tag 목록을 확인할 수 있다.</p>
<p><code>git tag -l</code> 와일드 카드로 검색하려 한다면 필수적인 옵션으로 <code>-l</code>을 사용해야 한다.</p>
<p><code>git tag -a &lt;tagname&gt;</code> annotated tag를 추가한다. 명령어를 입력하면 편집기가 생성되서 메세지를 적을 수 있다.</p>
<p><code>git show &lt;tagname&gt;</code> tag에 대한 정보를 확인할 수 있다.</p>
<h3 id="lightweight-tag-annotated-tag"><a href="#lightweight-tag-annotated-tag" class="headerlink" title="lightweight tag, annotated tag"></a>lightweight tag, annotated tag</h3><p>git 에 태그에는 두 종류가 있다. <code>lightweigth tag</code>는 단순히 커밋에 포인터와 같고, <code>annotated tag</code>는 git 저장소에 지정된 메세지 서명정보 등이 포함된다. 일반적으로 <code>annotated tag</code>를 사용한다.</p>
<h3 id="lightweight-tag"><a href="#lightweight-tag" class="headerlink" title="lightweight tag"></a>lightweight tag</h3><p><code>git tag &lt;버전&gt;</code> 옵션을 사용하지 않고 추가하면 lightweight tag 로 추가 할 수 있다.</p>
<h3 id="나중에-테그하기"><a href="#나중에-테그하기" class="headerlink" title="나중에 테그하기"></a>나중에 테그하기</h3><p><code>git tag -a &lt;체크섬&gt;</code> 특정 체크섬으로 tag 를 생성할 수 있다.</p>
<h3 id="테그-공유하기"><a href="#테그-공유하기" class="headerlink" title="테그 공유하기"></a>테그 공유하기</h3><p>git push 명령으로 remote 저장소에 tag 정보까지 올라가지는 않는다.</p>
<p><code>git push orgin &lt;tagname&gt;</code>으로 remote 저장소에 올린다.</p>
<p><code>git push origin --tags</code> 를 이용하여 저장소에 내에서 태그 내용 중에서 remote 저장소에 없는 태그를 저장소로 올린다.</p>
<blockquote>
<p>lightweight tag 만 저장소로 올리는 방법은 없다. 무조건 annotated tag 와 같이 저장소로 올라간다. 다만 annotated tag 만 저장소로 올리고 싶다면 <code>git push &lt;remote&gt; --folww-tags</code> 를 사용하면 된다.</p>
</blockquote>
<h3 id="태그-삭제하기"><a href="#태그-삭제하기" class="headerlink" title="태그 삭제하기"></a>태그 삭제하기</h3><p><code>git tag -d &lt;tagname&gt;</code>을 통해서 특정 태그를 삭제할 수 있다. 이는 작업하고 있는 저장소에 tag 만 삭제하는 것이여서 remote 서버에 push 해야 한다.</p>
<p>두가지 방법 중 하나를 선택한다.</p>
<ol>
<li><code>git push &lt;remote&gt; :refs/tags/&lt;tagname&gt;</code> 올리기 전에 tag를 null 로 설정해서 비워 주는것과 같다.</li>
<li><code>git push origin --delete &lt;tagname&gt;</code></li>
</ol>
<h3 id="특정-버전으로-checkout"><a href="#특정-버전으로-checkout" class="headerlink" title="특정 버전으로 checkout"></a>특정 버전으로 checkout</h3><p><code>git checktou &lt;tagname&gt;</code>으로 특정 tag로 checkout 할 수 있다. 이렇게 checktout 하면 detached HEAD 상태가 된다. 이상태에서 작업한 내용을 커밋해도 도달할수 없는 상태가 된다.</p>
<p>따라서 버그를 고친다 같은 작업을 수행할 때는 특정 브랜치를 만들어서 작업해야 한다. 이렇게 작업해도 tag 에서 작업한 내용과 커밋한 내용간의 차이가 존재함에 주의해야 한다.</p>
<h2 id="alias-사용하기"><a href="#alias-사용하기" class="headerlink" title="alias 사용하기"></a>alias 사용하기</h2><p><code>git config --global alias.ci commit</code> 이렇게 사용하면 commit 에 대한 별칭을 사요할 수 있다.</p>
<p><code>git ci</code> 로 사용한다.</p>
<p>외부 명령어를 사용할 때는 <code>!</code>를 붙힌다.</p>
<p><code>git config --global alias.visual &#39;!gitk&#39;</code></p>
<p><code>git visual</code>를 입력하면 <code>gitk</code>가 실행된다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/git/210918-3.1-Branches%20in%20a%20Nutshell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/git/210918-3.1-Branches%20in%20a%20Nutshell/" class="post-title-link" itemprop="url">3.1-Branches in a Nutshell</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-20 21:39:38" itemprop="dateCreated datePublished" datetime="2021-09-20T21:39:38+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="3-1-Branches-in-a-Nutshell"><a href="#3-1-Branches-in-a-Nutshell" class="headerlink" title="3.1 Branches in a Nutshell"></a>3.1 Branches in a Nutshell</h1><h2 id="간단히-말해서"><a href="#간단히-말해서" class="headerlink" title="간단히 말해서 .."></a>간단히 말해서 ..</h2><p>깃은 데이터를 변경 사항에 세트나 다른점으로 저장하지 않고 snapshot으로 저장한다. 커밋을 수행하게 되면 깃은 commit object를 생성한다. 각 파일에 대한 blobs를 생성하고, 파일과 디렉터리 구조를 나타내는 tree 객체를 생성한다. 커밋 객체는 루트 트리와 각 메타 데이터에 대한 포인터를 포함한다.</p>
<img src="/images/210918-3.1-Branches in a Nutshell/1.png" width="500">

<p>다른 변경사항을 커밋하면 커밋 객체는 그 바로 전에 커밋 객체를 가르키는 포인터를 갖는다.</p>
<img src="/images/210918-3.1-Branches in a Nutshell/2.png" width="500">

<p>깃의 디폴드 브랜치 이름은 main이다. 처음 커밋을 하면 main 브랜치는 너가 만든 커밋을 가르킨다. 매번 커밋할때마다 main 브랜치는 자동으로 마지막으로 변경한 커밋을 가르키게 된다.</p>
<img src="/images/210918-3.1-Branches in a Nutshell/3.png" width="500">

<h2 id="새-브랜치-생성"><a href="#새-브랜치-생성" class="headerlink" title="새 브랜치 생성"></a>새 브랜치 생성</h2><p>새로운 브랜치를 생성하면 작업한 마지막 커밋을 가르키는 브랜치가 생성된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch testing</span><br></pre></td></tr></table></figure>

<img src="/images/210918-3.1-Branches in a Nutshell/4.png" width="500">

<p>깃은 <code>HEAD</code>라는 포인터를 사용해서 현제 어떤 브랜치에 있는지 가르킨다. 이는 다른 버전관리 시스템과 다른 특징이다. 이것은 로컬 브랜치에서 현제 작업하고 있는 포인터이다. 브랜치를 생성해도 다른 브랜치로 스위칭 되는 것은 아니다.</p>
<img src="/images/210918-3.1-Branches in a Nutshell/5.png" width="500">

<p><code>git log</code>에 <code>--decorate</code> 옵션을 붙혀서 브랜치가 어떤 커밋을 가르키는지 확인할 수 있다.</p>
<blockquote>
<p>git log 는 항상 모든 분기를 표시하지 않는다. 깃은 우리가 관심 있을만한 커밋에 대한 log만 보여주기 때문에 현제 작업하고 있는 브랜치에 대한 log 를 보여준다. 따라서 명시적으로 다른 브랜치에 대한 로그를 보려면 <code>git log testing</code> 같이 입력해야 한다. 또는, <code>git log --all</code> 옵션을 사용한다.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --decorate</span><br><span class="line">f30ab (HEAD -&gt; master, testing) Add feature #32 - ability to add new formats to the central interface</span><br><span class="line">34ac2 Fix bug #1328 - stack overflow under certain conditions</span><br><span class="line">98ca9 Initial commit</span><br></pre></td></tr></table></figure>

<h2 id="Switching-Branches"><a href="#Switching-Branches" class="headerlink" title="Switching Branches"></a>Switching Branches</h2><p><code>git checkout</code> 명령어로 존재하는 브랜치로 바꿀 수 있다. 최신 버전에 깃에 경우 <code>git switch</code>를 통해서 바꾼다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git switch testing</span><br></pre></td></tr></table></figure>

<p>이 명령어는 <code>HEAD</code>를 master 브랜치에서 testing 브랜치로 옮긴다.</p>
<img src="/images/210918-3.1-Branches in a Nutshell/6.png" width="500">

<p>이제 다른 커밋을 하면</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim test.rb</span><br><span class="line">$ git commit -a -m &#x27;made a change&#x27;</span><br></pre></td></tr></table></figure>

<p>master 브랜치와 testing 브랜치가 가르키는 곳이 다르고 현제 작업하고 있는 포인터인 HEAD에 위치도 testing 브랜치에서 변경한 마지막 커밋으로 바뀐다.</p>
<img src="/images/210918-3.1-Branches in a Nutshell/7.png" width="500">

<p>이제 다시 <code>switch</code> 명령을 통해 브랜치를 master로 바꿔 보자.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git switch master</span><br></pre></td></tr></table></figure>

<img src="/images/210918-3.1-Branches in a Nutshell/8.png" width="500">

<p>이 명령을 입력하면 HEAD를 master 브랜치로 옮기고 파일을 마스터 브랜치가 있는 시점으로 복구한다. 이것은 예전 버전으로 복구 하는 것의 분기를 나눈 것과 같다. 또한 testing 브랜치에서 작업한 내용을 저장하고 있기 때문에 언제든지 작업한 내용으로 이동할 수 있다.</p>
<blockquote>
<p>브랜치를 이동하면 워킹 디렉토리에 파일이 변경된다.</p>
</blockquote>
<p>커밋을 한번 더 해보자.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim test.rb</span><br><span class="line">$ git commit -a -m &#x27;made other changes&#x27;</span><br></pre></td></tr></table></figure>

<p>그러면 다른 작업으로 독립되어 분리된다. 이것은 testing 에서 작업하던것을 임시로 미루고 main에서 작업한 다음 다시 testing 브랜치로 돌아와 작업할 수 있음을 의미한다. 이렇게 작업하고 필요할때 merge 하는 등에 작업을 해서 하나로 합치면 된다.</p>
<img src="/images/210918-3.1-Branches in a Nutshell/9.png" width="500">

<p><code>git log --oneline --decorate --graph --all</code>를 사용하면 브랜치, 분기, 포인터 history등에 정보를 한눈에 볼 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --decorate --graph --all</span><br><span class="line">* c2b9e (HEAD, master) Made other changes</span><br><span class="line">| * 87ab2 (testing) Made a change</span><br><span class="line">|/</span><br><span class="line">* f30ab Add feature #32 - ability to add new formats to the central interface</span><br><span class="line">* 34ac2 Fix bug #1328 - stack overflow under certain conditions</span><br><span class="line">* 98ca9 initial commit of my project</span><br></pre></td></tr></table></figure>

<p>실제로 Git의 브랜치는 어떤 한 커밋을 가리키는 40글자의 SHA-1 체크섬 파일에 불과하기 때문에 만들기도 쉽고 지우기도 쉽다. 새로 브랜치를 하나 만드는 것은 41바이트 크기의 파일을(40자와 줄 바꿈 문자) 하나 만드는 것에 불과하다.</p>
<p>부모 정보도 알고 있어서 merge base를 어떤걸로 해서 merge 할지 자돋으로 알기 때문에 머지도 가볍게 잘 된다.많이 생성하고 많이 병합하세요.</p>
<blockquote>
<p><code>git checkout -b &lt;newbranchname&gt;</code> 명령어를 사용해서 한번에 생성과 switch 가지 할 수 있다.</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210809-AWS%20%EB%A6%AC%EB%88%85%EC%8A%A4%20%EC%82%AC%EC%9A%A9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210809-AWS%20%EB%A6%AC%EB%88%85%EC%8A%A4%20%EC%82%AC%EC%9A%A9/" class="post-title-link" itemprop="url">AWS 리눅스 사용</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="리눅스-사용법-익히기"><a href="#리눅스-사용법-익히기" class="headerlink" title="리눅스 사용법 익히기"></a>리눅스 사용법 익히기</h1><h2 id="리눅스-설치-방법"><a href="#리눅스-설치-방법" class="headerlink" title="리눅스 설치 방법"></a>리눅스 설치 방법</h2><ol>
<li>가상 머신 소프트 웨어 <ul>
<li>PC 환경에 따라 문제들이 다름.</li>
</ul>
</li>
<li>클라우드 컴퓨팅 서비스 활용 <ul>
<li>최신 기술에 익숙해 짐. </li>
<li>동일한 환경에서 사용이 가능 </li>
</ul>
</li>
</ol>
<h2 id="클라우드-컴퓨팅"><a href="#클라우드-컴퓨팅" class="headerlink" title="클라우드 컴퓨팅"></a>클라우드 컴퓨팅</h2><p>서버 환경을 미리 구축해 놓고, 간단한 설정으로 바로 사용할 수 있도록 만든 서비스.</p>
<ul>
<li>이전 : 미리 서버 컴퓨터를 구축해야 함. 예측해서 구축해야 되는 문제 </li>
<li>현재 : 클라우드 컴퓨팅 환경 사용 </li>
</ul>
<h2 id="AWS-회원-가입"><a href="#AWS-회원-가입" class="headerlink" title="AWS 회원 가입"></a>AWS 회원 가입</h2><p>무료로 1년간 사용 가능 함. </p>
<p>해외 결제 가능한 신용카드가 필요하다. </p>
<h2 id="AWS-클라우드-컴퓨팅-설정"><a href="#AWS-클라우드-컴퓨팅-설정" class="headerlink" title="AWS 클라우드 컴퓨팅 설정"></a>AWS 클라우드 컴퓨팅 설정</h2><ol>
<li>EC2 또는 인스턴스(서버) 생성</li>
<li>Elastic IP (탄력적 IP) 생성 <ul>
<li>고정 IP로 만들어야 함. </li>
</ul>
</li>
<li>자기 PC(클라이언트) 에서 EC2(서버) 접속</li>
</ol>
<p>EC2 &gt; 인스턴스 &gt; 인스턴스 시작 &gt; 우분투 18.04 &gt; 옵션 선택 후 생성</p>
<p>태그 추가? 실제 현업에서는 다수의 서버를 운용하니까 태그로 이름 구분</p>
<h2 id="고정-IP-생성-및-연결"><a href="#고정-IP-생성-및-연결" class="headerlink" title="고정 IP 생성 및 연결"></a>고정 IP 생성 및 연결</h2><p>AWS 콘솔에서 탄력젹 IP 선택 후 새로운 IP 할당.<br>할당한 IP와 새로운 기존에 인스턴스를 연결 .</p>
<p>터미널을 통한 우분투 접속.<br>기존에 받아 놓은 pem 이 있는 폴더로 이동 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 400 &lt;user-key.pem&gt;</span><br></pre></td></tr></table></figure>
<p>받아놓은 키에 권한을 변경해 줌.</p>
<p>ssh 를 이요한 접속. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i &lt;user-key.pem&gt; ubuntu@&lt;IP&gt;</span><br></pre></td></tr></table></figure>
<p>ubuntn 란 사용자로 해당 IP로 접속…</p>
<p>참고로 고정 IP는 할당만 하고 연결 안하면 비용이 청구 된다.<br>또 연결 했더라도 실행을 시키지 않으면 비용이 청구 되고 여러개의 고정 IP를 할당해도 비용이 청구된다. </p>
<h2 id="리눅스와-파일"><a href="#리눅스와-파일" class="headerlink" title="리눅스와 파일"></a>리눅스와 파일</h2><p>모든 것은 파일이라는 철학을 따름</p>
<ul>
<li><p>모든 인터렉션은 파일을 읽고, 스는 것처럼 이루어짐. (마우스, 키보드와 같은 모든 디바이스 관련 동작도)</p>
</li>
<li><p>파일 네임 스페이스 </p>
<ul>
<li>전역 네임스페이스를 사용함 (/media/floofy/dave.jpg)</li>
</ul>
</li>
<li><p>파일은 inode 고유값과 자료구조에 의해 주요 정보를 관리한다. </p>
</li>
</ul>
<h2 id="리눅스와-프로세스"><a href="#리눅스와-프로세스" class="headerlink" title="리눅스와 프로세스"></a>리눅스와 프로세스</h2><ul>
<li>리눅스는 ELF 실행 파일 포멧을 갖는다. </li>
<li>다양한 시스템 리소스와 관련 되어 있다. </li>
<li>가상메모리를 지원한다. </li>
<li>프로세스는 PID 기반으로 구분된다. </li>
<li>init 프로세스를 기반으로 fork() 시스템콜을 사용해서, 신규 프로세스가 생성 된다. </li>
</ul>
<h2 id="리눅스와-권한"><a href="#리눅스와-권한" class="headerlink" title="리눅스와 권한"></a>리눅스와 권한</h2><p>운영체제는 사용자 리소스 권한을 관리한다.<br>리눇는 사용자 / 그룹으로 권한을 관리한다.<br>root는 슈퍼 관리자이다.<br>파일마다 소유자, 소유자 그룹, 모든 사용자에 대한 읽고, 쓰고, 실행되는 권한을 관리한다.<br>접근 권한 정보는 inode의 자료구조에 저장된다. </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210809-%EB%A6%AC%EB%88%85%EC%8A%A4(%EC%9C%A0%EB%8B%89%EC%8A%A4)%20%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210809-%EB%A6%AC%EB%88%85%EC%8A%A4(%EC%9C%A0%EB%8B%89%EC%8A%A4)%20%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/" class="post-title-link" itemprop="url">리눅스(유닉스) 운영체제</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="리눅스"><a href="#리눅스" class="headerlink" title="리눅스"></a>리눅스</h1><p>서버에 많이 사용되는 운영체제 </p>
<p>프로그래밍 할때에도 많이 사용 된다.<br>컴파일 시간이 줄어든다. </p>
<p>클라우드 컴퓨팅 (AWS) 에도 많이 사용됨</p>
<p>운영체제, 소프트웨어의 대부 UNIX 계열 운영체제이다.<br>완전 프로그래머 스타일이다. </p>
<p>plain 하게 프로그래밍 가능하다.<br>ANSI C - C 언어 표준 (표준으로 코딩이 가능하다.)</p>
<br/>

<h2 id="리눅스의-역사와-배경"><a href="#리눅스의-역사와-배경" class="headerlink" title="리눅스의 역사와 배경"></a>리눅스의 역사와 배경</h2><h3 id="리눅스-시작"><a href="#리눅스-시작" class="headerlink" title="리눅스 시작"></a>리눅스 시작</h3><p>리누스 토발즈가 개발.<br>대학에 있는 UNIX 컴퓨터를 집에서 쓰고 싶었다.<br>다중 사용자, 다중 작업(시분할 시스템, 멀티 태스킹) 을 지원할 수 있도록 만들었다. </p>
<h3 id="GNU-프로젝트"><a href="#GNU-프로젝트" class="headerlink" title="GNU 프로젝트"></a>GNU 프로젝트</h3><p>GNU = Gnu is Not Unix</p>
<p>유닉스 운영체제를 여러 회사에서 개발했는데, 소스를 공유하지 않았다.<br>리차드 스톨만이 초기 컴퓨터 개발 공동체의 상호협력적인 문화로 돌아가자고 1985년 GNU 선언문을 발표했다.<br>기술을 공유 되어야 한다고 주장.</p>
<p>GNU 프로젝트를 지원하기 위해 자유 소프트웨어 재단 설립 GNU 공개 라이선스(GPL) 규약을 제공.<br>이 소스를 사용할수 있지만 해당 기술을 사용했다면 기술은 공유 되어야 한다는 규약.</p>
<h4 id="GPL-라이선스"><a href="#GPL-라이선스" class="headerlink" title="GPL 라이선스"></a>GPL 라이선스</h4><p>GPL 프로그램은 어떤 형태로든 사용할 수 있지만, 다시 배포하기 위해서 동일한 GPL 라이선스 사용해야 함.</p>
<h3 id="GNU-Hurd"><a href="#GNU-Hurd" class="headerlink" title="GNU Hurd"></a>GNU Hurd</h3><p>운영체제 커널 개발 시도 - GNU Hurd</p>
<p>운영체제의 필요한 쉘 응용 프로그램, API, 라이브러리 System Call 개발, 컴파일러 개발</p>
<img src="images/210809-리눅스(유닉스)%20운영체제/1.png" width="300">

<h3 id="GNU-프로젝트와-리눅스"><a href="#GNU-프로젝트와-리눅스" class="headerlink" title="GNU 프로젝트와 리눅스"></a>GNU 프로젝트와 리눅스</h3><p>GNU Hurd 개발 지연</p>
<p>리누스 토발즈가 리눅스 커널 소스 오픈 소식 들음. GNU Hurd 를 개발 안해도 되겠네? </p>
<p>GNU 프로젝트 산출물과 리눅스 커널이 통합 개발 되기 시작. </p>
<p>GNU/ Linux 라고 부르기를 희망함. 리차드 스톨만이 (GNU 창시자.)</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210810-shell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210810-shell/" class="post-title-link" itemprop="url">shell</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h1><p>쉘 - 사용자와 컴퓨터 하드웨어 또는 운영체제 간의 인터페이스 </p>
<h2 id="쉘-종류"><a href="#쉘-종류" class="headerlink" title="쉘 종류"></a>쉘 종류</h2><ul>
<li>bash</li>
<li>sh</li>
<li>csh</li>
<li>ksh </li>
</ul>
<h2 id="다중-사용자-관련-명령어"><a href="#다중-사용자-관련-명령어" class="headerlink" title="다중 사용자 관련 명령어"></a>다중 사용자 관련 명령어</h2><p><code>whoami</code> - 사용자 이름 출력</p>
<p><code>passwd</code> - 새로운 패스워드 설정<br>(aws 에서 만들었으면 이미 설정된 아이디 사용하므로 패스워드가 없음)<br>root 권한만 사용할 수 있음. </p>
<p><code>useradd</code>는 사용자 기본 설정 자동으로 하지 않음.</p>
<p><code>adduser</code>는 사용자 기본 설정을 자동으로 함. (이거 사용해) - root 사용자가 만들 수 있음 </p>
<p><code>sudo</code> root 권한으로 실행하기<br>(해당 id 가 sudo 를 사용할수 있도록 미리 설정되어야 함.)</p>
<p><code>su</code> 사용자 변경 </p>
<pre><code>- `su root`  현재 사용자의 설정 파일을 기반으로 id만 바
- `su - root` 변경되는 사용자의 환경설정을 기반으로 id도 바뀜 
</code></pre>
<h3 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h3><p><code>/etc/sudoers</code> 설정 파일에서 설정을 해주어야 함.<br>root 권한이어야 읽을 수 있고 수정할 수 있음.<br>새로 생성한 id에 sudo 사용 권한을 주고 싶다면<br><code>dave2        ALL=(ALL:ALL) ALL</code></p>
<blockquote>
<ol>
<li>특정 사용자가 sudo를 사용할 수 있도록 <code>userid        ALL=(ALL)        ALL</code></li>
<li>특정 그룹에 포함된 모든 사용자가 sudo를 사용할 수 있도록 <code>%group        ALL=(ALL)        ALL</code></li>
<li>패스워드 생략 설정 <code>%group        ALL=(ALL)        NOPASSWD: ALL</code></li>
</ol>
</blockquote>
<p><code>pwd</code> 현재 디렉토리 위치</p>
<p><code>cd</code> 디렉토리 이동 <code>cd - </code> 바로 전 디렉토리로 이동 </p>
<p><code>dir</code> 파일 목록 <code>ls</code> 랑 똑타음 플래그 사용하려면 <code>ls</code> 사용하는게 나음.</p>
<p>와일드 카드 </p>
<ul>
<li><code>*</code> 는 임의 문자열</li>
<li><code>?</code> 는 문자 하나 </li>
</ul>
<p><code>man</code> man 띄고 명령어 입력하면 플래그 정보를 알 수 있음. </p>
<h3 id="ls와-파일-권한"><a href="#ls와-파일-권한" class="headerlink" title="ls와 파일 권한"></a>ls와 파일 권한</h3><p>리눅스는 파일마다 소유자, 소유자 그룹, 모든 사용대한 읽고, 쓰고, 실행하는 권한을 설정한다.</p>
<p><code>- rwx rx- r-x</code></p>
<ul>
<li>처음 1칸 데이터가 파일이면 -, 폴더면 d</li>
<li>다음 3칸 소유자의 권한 </li>
<li>다음 3칸 그룹의 권한 </li>
<li>다음 3칸 기타 상자의 권한 </li>
</ul>
<p>r : 읽고, 카피 (ls 명령어 가능)</p>
<p>w : 수정 (파일 생성 가능)</p>
<p>x : 실행 (cd 접근 가능)</p>
<p><code>chmod</code> : 파일 권한 변경</p>
<img src="images/210810-shell/1.png" width="400">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod g+rx test.c</span><br><span class="line">chmod u+rx test.c</span><br><span class="line">chmod ug+rx test.c</span><br><span class="line">chmod u=rwx, g=rw, o=rx test.c</span><br></pre></td></tr></table></figure>

<p>숫자를 사용하는 방법</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rwx rwx rwx = 777</span><br><span class="line">r-x r-x r-x = 555</span><br><span class="line">r-- --- --- = 400</span><br><span class="line">rwx --- --- = 700</span><br></pre></td></tr></table></figure>

<p><code>chown</code> 소유자 변경</p>
<p><code>cat</code> 파일 내용 보기 </p>
<p><code>head</code> 앞부분 보기</p>
<p><code>tail</code> 끝 부분만 보기 </p>
<p><code>more</code> 화면에 보일 수 있는 부분만 보고 나머지는 스크롤 하면서 보겠다. </p>
<p><code>rm</code> remove 에 약자 </p>
<ul>
<li>r: 하위 디렉토리를 포함한 모든 파일 삭제 </li>
<li>f: 강제로 파일이나 디릭토리 삭제 </li>
</ul>
<p><code>rm -rf [dir]</code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/11/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/13/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JayoonKoo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
