<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"jayoonkoo.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="티끌모아 태산">
<meta property="og:url" content="https://jayoonkoo.github.io/page/11/index.html">
<meta property="og:site_name" content="티끌모아 태산">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="JayoonKoo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jayoonkoo.github.io/page/11/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/11/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>티끌모아 태산</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">티끌모아 태산</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">작은 조각 모음</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">16</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">12</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">141</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">JayoonKoo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">141</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/JayoonKoo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JayoonKoo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:rnwkdbs12@gmail.com" title="E-Mail → mailto:rnwkdbs12@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/JayoonKoo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210813-%EB%A6%AC%EB%88%85%EC%8A%A4%20%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B0%8F%20%EC%89%98%20%EB%AA%85%EB%A0%B9%EC%96%B4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210813-%EB%A6%AC%EB%88%85%EC%8A%A4%20%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B0%8F%20%EC%89%98%20%EB%AA%85%EB%A0%B9%EC%96%B4/" class="post-title-link" itemprop="url">리눅스 파일시스템 및 쉘 명령어</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="리눅스-파일-시스템과-쉘-명령어"><a href="#리눅스-파일-시스템과-쉘-명령어" class="headerlink" title="리눅스 파일 시스템과 쉘 명령어"></a>리눅스 파일 시스템과 쉘 명령어</h1><h2 id="리눅스는-I-O-를-파일-처럼-처리한다"><a href="#리눅스는-I-O-를-파일-처럼-처리한다" class="headerlink" title="리눅스는 I/O 를 파일 처럼 처리한다."></a>리눅스는 I/O 를 파일 처럼 처리한다.</h2><p>가상 파일 시스템을 사용한다. </p>
<p>예를들어, tty 는 가상파일 시스템 인퍼에스로 가상 터미널 환경과 연결되어 있다.<br>키보드 인풋을 받는다. </p>
<h2 id="슈퍼-블록-inode와-파일"><a href="#슈퍼-블록-inode와-파일" class="headerlink" title="슈퍼 블록, inode와 파일"></a>슈퍼 블록, inode와 파일</h2><p>슈퍼 블록 : 파일 시스템의 정보 </p>
<p>파일 : inode 고유값과 자료구조에 의해 주요 정보를 관리한다. </p>
<ul>
<li>파일 이름:inode 파일이름은 inode 번호와 매칭</li>
<li>파일 시스템에서는 inode를 기반으로 파일 엑세스 </li>
<li>inode 기반 메타 데이터 저장. (프로세스에서 PCB와 비슷하다.)</li>
</ul>
<p>메타 데이터에는 파일 권한, 소유자 정보, 파일 사이즈, 생성 시간등 시간 관련 정보, 데이터 저장 위치 같은 정보가 적힌다. </p>
<img src="images/210821-리눅스%20프로세스/1.png" width="400">

<h2 id="파일과-inode"><a href="#파일과-inode" class="headerlink" title="파일과 inode"></a>파일과 inode</h2><p>각 디렉토리에는 dentry 리 라고 하는 엔트리 정보가 있음.<br><code>/home/ubuntu/link.txt</code> 파일의 경우 / dentry 에서 home 서브 디릭토리를 찾고, home 에서 unbuntu를 찾고, ununtu에서 link.txt를 찾음.</p>
<p>디렉토리도 마찬가지로 inode를 갖고 있으므로 이를 통해 구별할 수 있다. </p>
<h2 id="하드-링크와-소프트-링크"><a href="#하드-링크와-소프트-링크" class="headerlink" title="하드 링크와 소프트 링크"></a>하드 링크와 소프트 링크</h2><p><code>cp</code> 파일 복사 : <code>-rf</code> 옵션을 많이 사용함. 폴더 안쪽 까지 모두 복사함.<br><code>cp -rf programing/ programing2</code></p>
<p><code>rm</code> : 파일 삭제. <code>rm -rf </code> 로 많이 사용함. </p>
<p>바로가기 처럼 만들고 싶다? -&gt; 링크 하고 싶다. </p>
<h3 id="하드링크"><a href="#하드링크" class="headerlink" title="하드링크"></a>하드링크</h3><p><code>ln link.txt hard.txt</code> link.txt를 링크하는 hard.txt</p>
<p>하드 링크는 또다른 파일을 만드는 것인데 inode 구조체는 동일하게 된다. 복사와 다른 점은 복사는 inode 구조체까지 복사한다. </p>
<p><code>ls -i</code> 로 inode 값 확인 링크로 만들면 inode id 값이 같다. </p>
<p>만약 link.txt를 변경하면 hard.txt 도 똑같이 변경된다. </p>
<p>하드링크에 경우에는 원본 파일이 사라지는 경우에도 파일 내용은 그대로이다. 이것은 실제 파일 하고 가르키고 있는 inode 구조체가 분리 되어 있기 때문이다.</p>
<img src="images/210813-리눅스%20파일시스템%20및%20쉘%20명령어/1.png" width="500">

<p>이렇게 하면 좋은점? inode를 공유 하면서도 파일 복사 같이 되기 때문에 inode 구조체를 또 복사할 필요가 없다. </p>
<h3 id="소프트-링크-심볼릭-링크"><a href="#소프트-링크-심볼릭-링크" class="headerlink" title="소프트 링크 (심볼릭 링크)"></a>소프트 링크 (심볼릭 링크)</h3><p>윈도우에 바로가기 아이콘과 같다고 할 수 있다.<br>원본 파일이 없어지면 접근이 안된다. </p>
<p>소프트 링크는 indoe 값이 다르다. 소프트 링크는 l로 시작한다. 링크 파일임으로 원본 파일에 내용이 바뀌면 소프트 링크에 내용 도 바뀐다. but, 원본이 삭제되면 소프트 링크 파일도 사라진다. </p>
<p>소프트 링크 같은 경우에는 별도의 inode structure을 갖는다. 다만, address 로 direct Block 을 갖는 것이 아니라 원본 파일을 가르키는 redirected path 를 갖는다. </p>
<img src="images/210813-리눅스%20파일시스템%20및%20쉘%20명령어/2.png" width="500">

<h2 id="특수-파일"><a href="#특수-파일" class="headerlink" title="특수 파일"></a>특수 파일</h2><p>리눅스는 모든것을 파일처럼 다루기 때문에 디바이스도 파일처럼 다룬다. </p>
<ul>
<li>블록 디바이스 (Block Device) : 저장 매체 등은 블록 단위로 데이터를 읽거나 써야 효율적이다. I/O 송수신 속도가 높다.</li>
<li>캐릭터 디바이스 (Charcter Device) : 캐릭터 디바이스는 굳이 블록단위로 데이터를 보내지 않아도 되는 경우로 byte 단위로 데이터를 전송하고 키보드나 마우스 같은 경우가 있다. I/O 송수신 속도가 낮음. </li>
</ul>
<p>b 로 시작하면 블록 디바이스 이다. </p>
<p>c 로 시작하면 캐릭터 디바이스 이다. </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210817-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EA%B4%80%EB%A6%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210817-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EA%B4%80%EB%A6%AC/" class="post-title-link" itemprop="url">프로세스 관리</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="프로세스-관리"><a href="#프로세스-관리" class="headerlink" title="프로세스 관리"></a>프로세스 관리</h1><h2 id="프로세스-ID"><a href="#프로세스-ID" class="headerlink" title="프로세스 ID"></a>프로세스 ID</h2><p>각각의 프로세스는 proess id 라고 하는 PID 를 갖는다. </p>
<ul>
<li>pid : 해당 시점에 unique한 pid</li>
<li>최대 값은 2의 15승인 32768( 부호형 16비트 정수값)</li>
<li>ppid : 부모 프로세스의 pid 값</li>
</ul>
<p><code>ps -ef</code>를 통해 pid, ppid 및 프로세스스 정보 확인</p>
<p><code>vi /etc/passwd</code>를 프로세스와 소유자를 관리함. </p>
<p>예시</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>
<ul>
<li>사용자명 : root</li>
<li>패스워드 : x (없음)</li>
<li>사용자 ID : 0</li>
<li>그룹 ID : 0</li>
<li>사용자 정보 : root</li>
<li>홈 디렉토리 : /root</li>
<li>쉘 환경 : /bin/bash</li>
</ul>
<h2 id="pid-및-ppid-확인"><a href="#pid-및-ppid-확인" class="headerlink" title="pid 및 ppid 확인"></a>pid 및 ppid 확인</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;pid=%d\n&quot;</span>, getpid());</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;ppid=%d\n&quot;</span>, getppid());</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ gcc test.c -o test</span><br><span class="line">$ ./test</span><br><span class="line"></span><br><span class="line">pid=22440</span><br><span class="line">ppid=22164</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210817-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EC%83%9D%EC%84%B1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210817-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EC%83%9D%EC%84%B1/" class="post-title-link" itemprop="url">프로세스 생성</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="프로세스-생성"><a href="#프로세스-생성" class="headerlink" title="프로세스 생성"></a>프로세스 생성</h1><p>기본 프로세스는 text, data, bss, heap, stack의 공간을 생성 한 후 프로세스 이미지를 해당 공간에 업로드하고 실행을 시작한다.</p>
<h2 id="fork-와-exec-시스템콜"><a href="#fork-와-exec-시스템콜" class="headerlink" title="fork() 와 exec() 시스템콜"></a>fork() 와 exec() 시스템콜</h2><ul>
<li>fork() : 새로운 프로세스 공간을 별도로 만들고, fork() 시스템 콜을 호출한 프로세스 (부모 프로세스) 공간을 모두 복사<ul>
<li>별도의 프로세스 공간을 만들고, 부모 프로세스 공간의 데이터를 그대로 복사( 부모 프로세스는 그대로 살아 있음.)</li>
</ul>
</li>
<li>exec() : 호출한 현재 프로세스 공간의 text, data, bss 영역을 새로운 프로세스의 이미지로 덮어씌움<ul>
<li>별도의 프로세스 공간을 만들지 않음. (덮어 씌워 지는 거라 부모 프로세스 없음.)</li>
</ul>
</li>
</ul>
<h2 id="fork"><a href="#fork" class="headerlink" title="fork"></a>fork</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">pid_t</span> pid;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Before fork() call\n&quot;</span>);</span><br><span class="line">        pid = fork();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (pid == <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;this is Child process. PID is %d\n&quot;</span>, pid);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;this is Parent process. PID is %d\n&quot;</span>, pid);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;fork() is failed\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>fork()가 실행되면 부모 프로세스와 동일한 자식 프로세를 별도의 메모리 공간에 생성한다. 자식 프로세스에 pid 값은 0으로 리턴된다. 이때 동일한 pc 값을 가지기 때문에 이후에 코드가 실행되고 위에서 예시에선 pid &gt; 0 일때 코드 가 출력되고 다음으로 pid == 0 일때 코드가 출력된다.</p>
<h2 id="exec"><a href="#exec" class="headerlink" title="exec()"></a>exec()</h2><p>인자로 덮어씌워질 프로세스 정보를 넘겨준다. exec는 여러가지 함수 패밀리들이 있다. pc 다음부터는 코드가 덮어씌워지기 때문에 제대로 동작했으면 exec를 후출한 다음줄 부터는 실행이 안될 것이다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;execute ls\n&quot;</span>);</span><br><span class="line">        execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-l&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">        perror(<span class="string">&quot;execl is failed\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>execl</code>은 첫번재 인수로 디렉토리 이름이 명시된 명령어를 받고 다음부터 명령어 플래그등을 인수로 받는다. 갯수는 상관 없이 받을 수 있지만 마지막 인수는 NULL 로 끝나야 한다.<br>실행 시키면 perror 부분에 코드는 실행되지 않고 덮어씌워진 ls 명령이 실행된다.</p>
<p><code>execlp</code> 디폴트 환경변수 패스 값을 사용하기 때문에 명령어만 넘겨주면 된다. <code>execlp(&quot;ls&quot;, &quot;ls&quot;, &quot;-l&quot;, NULL)</code></p>
<p><code>execle()</code> 환경변수를 지정하고 넘겨준다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> *envp[] = &#123;<span class="string">&quot;user=dave&quot;</span>, <span class="string">&quot;PATH=/bin&quot;</span>, (<span class="keyword">char</span> *)<span class="number">0</span>&#125;;</span><br><span class="line">execle(<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-al&quot;</span>, <span class="literal">NULL</span>, envp);</span><br></pre></td></tr></table></figure>

<p><code>execv</code>는 인자로 변수로 만들어서 넣을 수 있다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> *arg[] = &#123;<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-al&quot;</span>, <span class="literal">NULL</span>&#125;;</span><br><span class="line">execv(<span class="string">&quot;/bin/ls&quot;</span>, arg);</span><br></pre></td></tr></table></figure>

<h2 id="fork와-exec"><a href="#fork와-exec" class="headerlink" title="fork와 exec"></a>fork와 exec</h2><p>fork : 부모 프로세스로부터 새로운 프로세스 공간을 만들고 부모 프로세스 데이터를 복사(fork)</p>
<p>exec : 새로운 프로세스를 위한 바이너리를 새로운 프로세스 공간에 덮어 씌움 (exec)</p>
<h2 id="wait-시스템-콜"><a href="#wait-시스템-콜" class="headerlink" title="wait() 시스템 콜"></a>wait() 시스템 콜</h2><p><code>wait()</code> 함수를 사용하면, <code>fork()</code> 함수 호출시, 자식 프로세스가 종료할 때까지, 부모 프로세스가 기다림. 브모 프로세스가 자식 프로세스보다 먼저 죽는 경우를 막기 위해 사용된다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pid;</span><br><span class="line">        <span class="keyword">int</span> child_pid;</span><br><span class="line">        <span class="keyword">int</span> status;</span><br><span class="line">        pid = fork();</span><br><span class="line">        <span class="keyword">switch</span>(pid) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">-1</span>:</span><br><span class="line">                        perror(<span class="string">&quot;fork is failed\n&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-la&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">                        perror(<span class="string">&quot;execl is failed\n&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                        child_pid = wait(<span class="literal">NULL</span>);</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;ls is complete\n&quot;</span>);</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;Parent PID (%d), Child PID (%d)\n&quot;</span>, getpid(), child_pid);</span><br><span class="line">                        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>execl</code>를 호출하면 부모 프로세스가 덮어씌어 지니까 <code>fork</code>를 통해 자식 프로세스 생성. case 0 인 경우는 자식 프로세스 인 겨으로 여기에 ls 명령어를 덮어씌움.</p>
<p>ls 명령어 출력</p>
<p><code>wait()</code>를 통해서 자식 프로세스가 끝나기를 기다렸다가 부모 프로세스를 실행 시킬 수 있음.</p>
<h2 id="copy-on-write"><a href="#copy-on-write" class="headerlink" title="copy-on-write"></a>copy-on-write</h2><p>리눅스에 프로세스 크기는 4GB에 크기를 가지는데 <code>fork()</code>로 복제할때마다 전체를 복사하려고 하면 오래 걸린다.<br>따라서 자식 프로세스를 생성했다면 우선은 부모 프로세스에 페이지를 같이 굥유하는 방법으로 생성한다.<br>그리고 페이지를 읽는 것이 아니라 써야 할때 페이지를 복사하고 분리하는 방법을 사용한다.</p>
<p>장점</p>
<ul>
<li>프로세스 생성 시간을 줄일 수 있다.</li>
<li>새로 생성된 프로세스에 새롭게 할당되어야 하는 페이지 수도 최소화 된다.</li>
</ul>
<img src="./images/210817-프로세스 생성/1.png" widht="500">

<h2 id="프로세스-종료"><a href="#프로세스-종료" class="headerlink" title="프로세스 종료"></a>프로세스 종료</h2><p>exit() 세스템콜 : 프로세스 종료</p>
<p>c 언어에서 main 함수에서 return 을 호출하는 것과 exit()을 호출하는 것에는 어떤 차이가 있을까?</p>
<p>c 언어 실행 파일은 우선 _start() 함수를 호출하고 그 안에서 main() 함수를 호출함. return 하면 main 함수가 끝나고 다음 exit()함수를 호출함.</p>
<p>만약 main 함수에서 exit() 함수를 호출했다면 바로 프로세스를 종료시키는 것임.</p>
<h2 id="exit-시스템-콜"><a href="#exit-시스템-콜" class="headerlink" title="exit() 시스템 콜"></a>exit() 시스템 콜</h2><p>부모 프로세스는 status &amp; 0377 계산 값으로 자식 프로세스 종료 상태 확인 가능</p>
<p>기본 사용</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span>(EXIT_SUCCESS);</span><br><span class="line"><span class="built_in">exit</span>(EXIT_FAILURE);</span><br></pre></td></tr></table></figure>

<p>주요 동작</p>
<ul>
<li>atexit() 에 등록된 함수 실행</li>
<li>열려 있는 모든 입출력 스트림 버퍼 삭제</li>
<li>프로세스가 오픈한 파일을 모두 닫음</li>
<li>tempfile() 함수를 생성한 임시 파일 삭제</li>
</ul>
<h2 id="atexit-함수"><a href="#atexit-함수" class="headerlink" title="atexit() 함수"></a>atexit() 함수</h2><p>프로세스 종료시 실행될 함수를 등록하기 위해 사용한다. 등록된 함수를 등록된 역순서대로 실행한다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">exithandling</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">goodbymessage</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> ret;</span><br><span class="line"></span><br><span class="line">    ret = atexit(exithandling);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">0</span>) perror(<span class="string">&quot;Error in atexit\n&quot;</span>);</span><br><span class="line">    ret = atexit(goodbymessage);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">0</span>) perror(<span class="string">&quot;Error in atexit\n&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(EXIT_SUCCESS);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exithandling</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;exit handling\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbymessage</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;see you again!\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>역순이기 때문에 goodbymessage 가 먼저 호출 됨.</p>
<h2 id="wait-시스템-콜-1"><a href="#wait-시스템-콜-1" class="headerlink" title="wait() 시스템 콜"></a>wait() 시스템 콜</h2><ul>
<li>wait() 함수를 사용하면 fork()로 생성된 자식 프로세스가 종료될때까지 부모 프로세스가 기다림</li>
<li>자식 프로세스가 완전히 끝나면 좀비 프로세스가 가지고 있던 최소 정보도 삭제하고 부모 프로세스에 SIGCHLD 시그널이 보내짐</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pid;</span><br><span class="line">    <span class="keyword">int</span> child_pid;</span><br><span class="line">    <span class="keyword">int</span> status;</span><br><span class="line">    pid = fork();</span><br><span class="line">    <span class="keyword">switch</span> (pid) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">-1</span>:</span><br><span class="line">            perror(<span class="string">&quot;fork is failed\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-al&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">            perror(<span class="string">&quot;execl is failed\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            child_pid = wait(&amp;status);</span><br><span class="line">            <span class="keyword">if</span> (WIFEXITED(status)) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Child process is normally terminated\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>wait의 리턴값은 종료된 자식 프로세스의 pid 값임.</p>
<p><code>status</code> 정보를 통해 기본적인 자식 프로세스 관련 정보를 확인할 수 있음</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">WIFEXITED</span><span class="params">(status)</span></span>;</span><br></pre></td></tr></table></figure>

<p>자식 프로세스가 정상 종료 시 리턴값은 0 이 아닌 값이 됨.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210819-IPC%EA%B8%B0%EB%B2%95%20%EC%A0%95%EB%A6%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210819-IPC%EA%B8%B0%EB%B2%95%20%EC%A0%95%EB%A6%AC/" class="post-title-link" itemprop="url">IPC기법 정리</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="IPC-기법관련-시스템콜-사용법-이해"><a href="#IPC-기법관련-시스템콜-사용법-이해" class="headerlink" title="IPC 기법관련 시스템콜 사용법 이해"></a>IPC 기법관련 시스템콜 사용법 이해</h1><h2 id="파이프"><a href="#파이프" class="headerlink" title="파이프"></a>파이프</h2><p>파이프를 통한 부모 -&gt; 자식 간 단방향 통신</p>
<h3 id="예제"><a href="#예제" class="headerlink" title="예제"></a>예제</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MSGSIZE 255</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span>* msg = <span class="string">&quot;Hello Child Process!&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">255</span>];</span><br><span class="line">    <span class="keyword">int</span> fd[<span class="number">2</span>], pid, nbytes;</span><br><span class="line">    <span class="keyword">if</span> (pipe(fd) &lt; <span class="number">0</span>) <span class="comment">// pipe(fd) 로 파이프 생성</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    pid = fork(); <span class="comment">// 이 함수 실행 다음 코드부터 부모/ 자식 프로세스로 나뉘어짐</span></span><br><span class="line">    <span class="keyword">if</span> (pid &gt;<span class="number">0</span>) &#123; <span class="comment">// 부모 프로세스에는 자식 프로세스 pid 값이 들어감</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;parent PID:%d, child PID%d\n&quot;</span>, getpid(), pid);</span><br><span class="line">        write(fd[<span class="number">1</span>], msg, MSGSIZE); <span class="comment">// fd[1] 에 씁니다.</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="comment">// 자식 프로세스에는 pid 값이 0이 됨.</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child PID: %d\n&quot;</span>, getpid());</span><br><span class="line">        nbytes = read(fd[<span class="number">0</span>], buf, MSGSIZE); <span class="comment">// fd[0] 으로 읽음</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %s\n&quot;</span>, nbytes, buf);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="메시지-큐-message-queue"><a href="#메시지-큐-message-queue" class="headerlink" title="메시지 큐(message queue)"></a>메시지 큐(message queue)</h2><p>FIFO 정책을 데이터 전송.</p>
<p>전송하는 코드</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/msg.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">msgbuf</span> &#123;</span></span><br><span class="line">    <span class="keyword">long</span> type;</span><br><span class="line">    <span class="keyword">char</span> text[<span class="number">50</span>];</span><br><span class="line">&#125; MsgBuf;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> msgid, len;</span><br><span class="line">    MsgBuf msg;</span><br><span class="line">    <span class="keyword">key_t</span> key = <span class="number">1234</span>;</span><br><span class="line">    msgid = msgget(key, IPC_CREAT|<span class="number">0644</span>);</span><br><span class="line">    <span class="keyword">if</span>(msgid == <span class="number">-1</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;msgget&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    msg.type = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">strcpy</span>(msg.text, <span class="string">&quot;Hello Message Queue\n&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(msgsnd(msgid, (<span class="keyword">void</span> *)&amp;msg, <span class="number">50</span>, IPC_NOWAIT) == <span class="number">-1</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;msgsnd&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>동일한 <code>key</code>를 사용해야 함.</li>
<li><code>msgget</code> 으로 msgid 를 얻음.</li>
<li><code>msgsnd</code> 으로 큐에 메세지 전송</li>
</ul>
<p>받는 코드</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/msg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">msgbuf</span> &#123;</span></span><br><span class="line">    <span class="keyword">long</span> type;</span><br><span class="line">    <span class="keyword">char</span> text[<span class="number">50</span>];</span><br><span class="line">&#125; MsgBuf;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    MsgBuf msg;</span><br><span class="line">    <span class="keyword">int</span> msgid, len;</span><br><span class="line">    <span class="keyword">key_t</span> key = <span class="number">1234</span>;</span><br><span class="line">    <span class="keyword">if</span>((msgid = msgget(key, IPC_CREAT|<span class="number">0644</span>))&lt;<span class="number">0</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;msgget&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    len = msgrcv(msgid, &amp;msg, <span class="number">50</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Received Message is [%d] %s\n&quot;</span>, len, msg.text);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>동일한 key 사용</li>
<li>msgid 를 얻음</li>
<li><code>msgrcv</code>를 통해 메세지큐에 데이터 받음.</li>
</ul>
<h2 id="공유-메모리-shared-memory"><a href="#공유-메모리-shared-memory" class="headerlink" title="공유 메모리(shared memory)"></a>공유 메모리(shared memory)</h2><p>커널 공간에 메모리 공간을 만들고, 해당 공간을 변수처럼 쓰는 방식. mesage queue 처럼 FIFO 방식이 아니라, 해당 메모리 주소를 마치 변수처럼 접근하는 방식이다. 공유 메모리 key를 가지고 여러 프로세스가 접근 가능하다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ipc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> shmid, pid;</span><br><span class="line">    <span class="keyword">char</span> *shmaddr_parent, *shmaddr_child;</span><br><span class="line">    shmid = shmget((<span class="keyword">key_t</span>)<span class="number">1234</span>, <span class="number">10</span>, IPC_CREAT|<span class="number">0644</span>);</span><br><span class="line">    <span class="keyword">if</span>(shmid == <span class="number">-1</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;shmget error\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    pid = fork();</span><br><span class="line">    <span class="keyword">if</span> (pid &gt;<span class="number">0</span>) &#123;</span><br><span class="line">        wait(<span class="number">0</span>);</span><br><span class="line">        shmaddr_parent = (<span class="keyword">char</span> *)shmat(shmid, (<span class="keyword">char</span> *)<span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, shmaddr_parent);</span><br><span class="line">        shmdt((<span class="keyword">char</span> *)shmaddr_parent);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        shmaddr_child = (<span class="keyword">char</span> *)shmat(shmid, (<span class="keyword">char</span> *)<span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">strcpy</span>((<span class="keyword">char</span> *)shmaddr_child, <span class="string">&quot;Hello Parent!&quot;</span>);</span><br><span class="line">        shmdt((<span class="keyword">char</span> *)shmaddr_child); <span class="comment">// 해당 프로세스에서 메모리에 올라간 변수 삭제</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    shmctl(shmid, IPC_RMID, (struct shmid_ds *)<span class="literal">NULL</span>); <span class="comment">// 공유 메모리에서 삭제</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210820-%EC%89%98%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210820-%EC%89%98%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/" class="post-title-link" itemprop="url">쉘 스크립트</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="쉘로-시작하는-시스템-프로그래밍-기본"><a href="#쉘로-시작하는-시스템-프로그래밍-기본" class="headerlink" title="쉘로 시작하는 시스템 프로그래밍 기본"></a>쉘로 시작하는 시스템 프로그래밍 기본</h1><h2 id="쉘-스크립트"><a href="#쉘-스크립트" class="headerlink" title="쉘 스크립트"></a>쉘 스크립트</h2><p>쉘을 사용한 프로그래밍 작업으로서 서버 작업 자동화 및 운영(DevOps)를 위해서 기본적으로 익혀둘 필요가 있다.</p>
<p>로그가 많이 쌓여서 서버가 죽을 경우 스크립트를 생성해서 로그를 주기적으로 삭제 하도록 하는 등의 작업을 들 수 있다.</p>
<h2 id="기본-문법"><a href="#기본-문법" class="headerlink" title="기본 문법"></a>기본 문법</h2><p><code>#!/bin/bash</code>로 시작해야 하고 실행 권한을 가지고 있어야 한다. 파일 이름은 일반적으로 <code>파일이름.sh</code>와 같은 형태로작성한다.</p>
<h3 id="실습"><a href="#실습" class="headerlink" title="실습"></a>실습</h3><p>echo 함수를 이용하여 화면에 <code>Hello bash!&quot;</code>를 출력 할 수 있도록 스크립트 작성</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;Hello bash&quot;</span><br></pre></td></tr></table></figure>

<p>실행 권한이 있어야 한다. <code>chmod +x test.sh</code></p>
<p>실행은 <code>test.sh</code>가 있는 폴더로 들어간 후 <code>./test.sh</code> 입력.</p>
<h2 id="주석"><a href="#주석" class="headerlink" title="주석"></a>주석</h2><p><code>#</code>으로 시작하면 주석이다.</p>
<h2 id="변수"><a href="#변수" class="headerlink" title="변수"></a>변수</h2><p>선언</p>
<ul>
<li><code>변수명=데이터</code>로 사용한다. 띄어씌기는 허용되지 않는다.</li>
</ul>
<p>사용</p>
<ul>
<li><code>$변수명</code> 으로 사용된다.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">mysql_id=&#x27;root&#x27;</span><br><span class="line">mysql_directory=&#x27;/etc/mysql&#x27;</span><br><span class="line"></span><br><span class="line">echo $mysql_id</span><br><span class="line">echo $mysql_directory</span><br></pre></td></tr></table></figure>

<h3 id="실습-1"><a href="#실습-1" class="headerlink" title="실습"></a>실습</h3><p>아이디 관련 정보 변수만들기 (실제 이름, 나이, 직업)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">name=&#x27;koo&#x27;</span><br><span class="line">age=27</span><br><span class="line">job=&#x27;no job&#x27;</span><br><span class="line"></span><br><span class="line">echo $name $age $job</span><br></pre></td></tr></table></figure>

<h2 id="리스트"><a href="#리스트" class="headerlink" title="리스트"></a>리스트</h2><p>선언</p>
<ul>
<li>변수명=(데이터1 데이터2 데이터3 …)</li>
</ul>
<p>사용</p>
<ul>
<li><code>$&#123;변수명[인덱스번호]&#125;</code> 로 사용한다.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">daemons=(&quot;httpd&quot; &quot;mysqld&quot; &quot;vsftpd&quot;)</span><br><span class="line">echo $&#123;daemons[1]&#125;</span><br><span class="line">echo $&#123;daemons[@]&#125;    # $daemons 배열의 모든 데이터 출력</span><br><span class="line">echo $&#123;daemons[*]&#125;    # $daemons 배열의 모든 데이터 출력</span><br><span class="line">echo $&#123;#daemons[@]&#125;   # daemons 배열 크기 출력</span><br><span class="line"></span><br><span class="line">filelist=( $(ls) )    # 해당 쉘스크립트 실행 디렉토리의 파일 리스트를 배열로 $filelist 변수에 받음.</span><br><span class="line">echo $&#123;filelist[*]&#125;</span><br></pre></td></tr></table></figure>

<h3 id="실습-2"><a href="#실습-2" class="headerlink" title="실습"></a>실습</h3><p>아이디 관련 정보 리스트 변수로 만들고, 각 정보 출력하기</p>
<h2 id="사전에-정의된-지역-변수"><a href="#사전에-정의된-지역-변수" class="headerlink" title="사전에 정의된 지역 변수"></a>사전에 정의된 지역 변수</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$$ : 쉘의 프로세스 번호</span><br><span class="line">$0 : 쉘스크립트 이름</span><br><span class="line">$1 ~ $9 : 명령줄 인수</span><br><span class="line">$* : 모든 명령줄 인수리스트</span><br><span class="line">$# : 인수의 개수</span><br><span class="line">$? : 최근 실행한 명령어의 종료 값</span><br><span class="line">	- 0 (성공), 1~125 (에러)</span><br><span class="line">	- 126(파일이 실행가능하지 않음),</span><br><span class="line">	- 128~255 (시그널 발생)</span><br></pre></td></tr></table></figure>

<h3 id="실습-3"><a href="#실습-3" class="headerlink" title="실습"></a>실습</h3><p>쉘 프로세스 번호, 쉘 스크립트 이름, 명령줄 인수, 모든 명령줄 인수리스트, 인수 개수 출력해보기</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo $$ $0 $1 $* $#</span><br></pre></td></tr></table></figure>

<h2 id="연산자"><a href="#연산자" class="headerlink" title="연산자"></a>연산자</h2><p><code>expr</code>: 숫자 계산</p>
<p><code>expr</code>를 사용하는 경우 백틱을 사용해야 함. 연산자 *와 괄호 앞에는 역슬래시를 넣어야 한. 연산자와 숫자, 변수 사이에는 space를 넣어야 함.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">num=`expr \( 10 + 20 \) / 8 - 8`</span><br><span class="line">echo $num</span><br></pre></td></tr></table></figure>

<h2 id="조건문-문법"><a href="#조건문-문법" class="headerlink" title="조건문 문법"></a>조건문 문법</h2><p>기본 if 구문</p>
<ul>
<li>명령문을 꼭 탭으로 띄워야 하는 것은 아님(then과 if 안에만 들어가 있으면 됨.)</li>
</ul>
<p>두 인자값을 받아서 두 인자값이 다르면 <code>differnt values</code> 출력</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ $1 != $2 ]</span><br><span class="line">then</span><br><span class="line">    echo &#x27;different values&#x27;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>조건 문에 띄어쓰기를 주의한다.</p>
<p>조건 작성이 다른 프로그래밍 언어와 달리 가동성이 현저히 떨어짐, 필요할때마다 찾아보길..</p>
<h2 id="파일-검사"><a href="#파일-검사" class="headerlink" title="파일 검사"></a>파일 검사</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-e 파일명 # 파일이 존재하면 참</span><br><span class="line">-d 파일명 # 파일이 디렉토리면 참</span><br><span class="line">-h 파일명 # 심볼릭 링크파일</span><br><span class="line">-f 파일명 # 파일이 일반파일이면 참</span><br><span class="line">-r 파일명 # 파일 읽기 가능이면 참</span><br><span class="line">-s 파일명 # 0 파일 크기가 0이 아니면 참</span><br><span class="line">-u 파일명 # 파일이 set-user-id가 설정되면 참</span><br><span class="line">-w 파일명 # 파일 쓰기 가능 상태이면 참</span><br><span class="line">-x 파일명 # 파일이 실행 가능 상태이면 참</span><br></pre></td></tr></table></figure>

<h3 id="해당-파일이-있는지-없는지-출력하는-쉘-스크립트-작성해-보기"><a href="#해당-파일이-있는지-없는지-출력하는-쉘-스크립트-작성해-보기" class="headerlink" title="해당 파일이 있는지 없는지 출력하는 쉘 스크립트 작성해 보기"></a>해당 파일이 있는지 없는지 출력하는 쉘 스크립트 작성해 보기</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ -e $1 ]</span><br><span class="line">then</span><br><span class="line">    echo &quot;file exist&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ $1 == $2 ]</span><br><span class="line">then</span><br><span class="line">    echo &#x27;same values&#x27;</span><br><span class="line">else</span><br><span class="line">    echo &#x27;different values&#x27;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="쉘-크립트-해석하기"><a href="#쉘-크립트-해석하기" class="headerlink" title="쉘 크립트 해석하기"></a>쉘 크립트 해석하기</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">ping -c 1 192.168.0.1 1&gt; /dev/null</span><br><span class="line">if [ $? == 0 ]</span><br><span class="line">then</span><br><span class="line">    echo &quot;게이트웨이 핑 성공!&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;게이트웨이 핑 실패!&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><code>ping -c 1 192.168.0.1 1&gt; /dev/null</code> 응답 확인 요청 <code>-c 1</code>를 통해 1번만 요청, <code>1&gt; /dev/null</code>를 통해 응답 결과 표준 출력을 버림,</p>
<h2 id="반복문"><a href="#반복문" class="headerlink" title="반복문"></a>반복문</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for database in $(ls)</span><br><span class="line">do</span><br><span class="line">    echo $database</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>for 문을 while로 바꿔서 사용도 가능. (일반적인 프로그래밍 언어처럼 사용 가능.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210820-%EC%8B%9C%EA%B7%B8%EB%84%90%20%EB%8F%99%EC%9E%91%20%EB%A9%94%EC%BB%A4%EB%8B%88%EC%A6%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210820-%EC%8B%9C%EA%B7%B8%EB%84%90%20%EB%8F%99%EC%9E%91%20%EB%A9%94%EC%BB%A4%EB%8B%88%EC%A6%98/" class="post-title-link" itemprop="url">시그널 동작 메커니즘</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="시그널-동작-메커니즘"><a href="#시그널-동작-메커니즘" class="headerlink" title="시그널 동작 메커니즘"></a>시그널 동작 메커니즘</h1><p>본래는 다른 용도 이지만 IPC 로도 사용 가능한 기법</p>
<ul>
<li>시그널(signal) - 프로세스에 이벤트 전달.</li>
<li>소켓(socket) - 네트워크</li>
</ul>
<h2 id="시그널"><a href="#시그널" class="headerlink" title="시그널"></a>시그널</h2><p>유닉스에서 오래전부터 사용되온 기술이다. 커널 또는 프로세스에서 다른 프로세스에서 어떤 이벤트가 발생되었는지를 알려주는 기법이다.</p>
<h2 id="시그널-동작"><a href="#시그널-동작" class="headerlink" title="시그널 동작"></a>시그널 동작</h2><p>프로그램에서 특정 시그널의 기본 동작 대신 다른 동작을 하도록 구현 가능하다.</p>
<p>각 프로세스에서 시그널 처리에 대해 다음과 같은 동작 설정이 가능하다.</p>
<ul>
<li>시그널 무시</li>
<li>시그널 블록</li>
<li>프로그램 안에 등록된 시그널 핸들러로 재정의한 특정 동작 수행</li>
<li>등록된 시그널 핸들러가 없다면, 커널에서 기본 동작 수행</li>
</ul>
<h2 id="시그널과-프로세스"><a href="#시그널과-프로세스" class="headerlink" title="시그널과 프로세스"></a>시그널과 프로세스</h2><p>프로세스는 PCB 에서 해당 프로세스가 블록 또는 처리해야하는 시그널 관련 정보를 관리한다. 커널 모드에서 사용자 모드 전환시 시그널 정보를 확인해서 해당 처리를 한다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210821-%EB%A6%AC%EB%88%85%EC%8A%A4%20%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210821-%EB%A6%AC%EB%88%85%EC%8A%A4%20%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4/" class="post-title-link" itemprop="url">리눅스 프로세스</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="리눅스-프로세스"><a href="#리눅스-프로세스" class="headerlink" title="리눅스 프로세스"></a>리눅스 프로세스</h1><h2 id="프로세스-vs-바이너리"><a href="#프로세스-vs-바이너리" class="headerlink" title="프로세스 vs 바이너리"></a>프로세스 vs 바이너리</h2><p>바이너리 - 코드 이미지 (실행 파일)<br>실행 중인 프로그램을 프로세스라고 한다. </p>
<h2 id="리눅스는-다양한-프로세스-실행-환경"><a href="#리눅스는-다양한-프로세스-실행-환경" class="headerlink" title="리눅스는 다양한 프로세스 실행 환경"></a>리눅스는 다양한 프로세스 실행 환경</h2><p>유닉스 철학 : 여러 프로그램이 유기적으로 각자의 일을 수행하면서 전체 시스템이 동작하도록 하는 모델</p>
<h2 id="foreground-process-background-process"><a href="#foreground-process-background-process" class="headerlink" title="foreground process / background process"></a>foreground process / background process</h2><p>foreground process: 쉘 에서 해당 프로세스가 실행되고 있으면 수행 종료 전까지 다른 입력을 하지 못하는 프로세스 </p>
<p>background process: 사용자 입력과 상관 없이 실행되는 프로세스.<br>쉘(shell) 에서 해당 프로세스 실행시, 맨 뒤에 &amp;를 붙여줌.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find / -name &#x27;*.py&#x27; &gt; list.txt &amp;</span><br><span class="line">[1] 57</span><br></pre></td></tr></table></figure>
<p><code>[1]</code>은 작업 번호 57은 pid를 나타냄. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kill -9 [pid번호]</span><br><span class="line"></span><br><span class="line">jobs</span><br></pre></td></tr></table></figure>
<p>kill 명령어를 통해 프로세스를 종료시키고, jobs 명령어를 통해 background process로 실행중인 프로세스를 확인한다. </p>
<h2 id="foreground-process-제어하기"><a href="#foreground-process-제어하기" class="headerlink" title="foreground process 제어하기"></a>foreground process 제어하기</h2><p>컨트롤 +  z : foreground 프로세스를 실행 중지 상태로 변경</p>
<p>맨 마지막 컨트롤 + z 로 중지된 프로세스는 bg 명령으로 background로 실행될 수 있다. </p>
<p>jobs 명령어를 통해 진행 또는 중지된 프로세스를 보여준다. </p>
<p>컨트롤 + c : 프로세스를 완전히 종료 시킴</p>
<h3 id="프로세스-상태-확인"><a href="#프로세스-상태-확인" class="headerlink" title="프로세스 상태 확인"></a>프로세스 상태 확인</h3><p><code>ps</code> 프로세스 상태 확인 </p>
<p>데몬 프로세스(daemon process) : 사용자 모르게 시스템 관리를 위해 실행되는 프로세스로 보통 시스템이 부팅될 때 자동 실행. </p>
<p>보통 <code>ps aux</code>를 많이 사용한다.</p>
<p>USER: 소유자 정보</p>
<p>PID : process id</p>
<p>%CPU : CPU 사용하고 있는 퍼센트</p>
<p>%MEM : memory 사용하고 있는 퍼센트 </p>
<p>VSZ : 가상메모리에서 실제로 쓰고 있는 메모리</p>
<p>RSS : 페이징 시스템을 사용해서 실제 물리 메모리에서 사용하고 있는 사이즈</p>
<p>TTY : 어떤 터미널과 연결되 있는가? 하드웨어 리소스 </p>
<p>STAT : 상태 </p>
<h3 id="프로세스-죽이기"><a href="#프로세스-죽이기" class="headerlink" title="프로세스 죽이기"></a>프로세스 죽이기</h3><p><code>kill -9 &lt;pid&gt;</code> -9 강제로 죽이기 </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/08/30/typeScript/210809-Basic%20Type/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/30/typeScript/210809-Basic%20Type/" class="post-title-link" itemprop="url">Basic Type</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-30 02:32:06" itemprop="dateCreated datePublished" datetime="2021-08-30T02:32:06+09:00">2021-08-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/typeScript/" itemprop="url" rel="index"><span itemprop="name">typeScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Basic-Type"><a href="#Basic-Type" class="headerlink" title="Basic Type"></a>Basic Type</h1><p>JavaScript 는 다이나믹 타입으로서 실행되는 도중에 타입이 바뀐다. </p>
<p>TypeScript 는 static 타입으로서 실행되기 전에 타입을 정한다.</p>
<h2 id="제공되는-타입"><a href="#제공되는-타입" class="headerlink" title="제공되는 타입"></a>제공되는 타입</h2><h3 id="기본-자료형"><a href="#기본-자료형" class="headerlink" title="기본 자료형"></a>기본 자료형</h3><ul>
<li>Boolean</li>
<li>Number</li>
<li>String</li>
<li>Null</li>
<li>Undefined</li>
<li>Symbol</li>
<li>Array: object</li>
</ul>
<h3 id="프로그래밍을-도울-몇가지-타입"><a href="#프로그래밍을-도울-몇가지-타입" class="headerlink" title="프로그래밍을 도울 몇가지 타입"></a>프로그래밍을 도울 몇가지 타입</h3><ul>
<li>Any, Void, Never, Unknown</li>
<li>Enum</li>
<li>Tuple: object</li>
</ul>
<h2 id="Primitive-Types"><a href="#Primitive-Types" class="headerlink" title="Primitive Types"></a>Primitive Types</h2><p>오브젝트나 레퍼런스 형태가 아닌 실제 값을 저장하는 자료형</p>
<ul>
<li>boolean</li>
<li>number</li>
<li>string</li>
<li>symbol</li>
<li>null</li>
<li>undefined</li>
</ul>
<p>literal 값으로 Primitive 타입의 서브 타입을 나타낼 수 있다. </p>
<p>또는 래퍼 객체로 만들 수 있다. </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>) <span class="comment">// typeof : object</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;world&#x27;</span>) <span class="comment">// typeof: object</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">42</span>) <span class="comment">// typeof: object</span></span><br></pre></td></tr></table></figure>
<p>but, 이렇게 만든건 객체임 primitive type 이 아니다. </p>
<p>TypeScript primitives type은 모두 소문자 이다. 따라서 TypeScirpt 에서 type을 명시할때 래퍼 객체를 사용하면 안된다. </p>
<h2 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h2><p>래퍼 객체로 타입을 정하 지 않는다. </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isDone: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">isDone = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> isDone); <span class="comment">// boolean</span></span><br></pre></td></tr></table></figure>

<h2 id="number"><a href="#number" class="headerlink" title="number"></a>number</h2><p>10진수 , 16진수, 8진수, 2진수, 모두 가능. </p>
<p>NaN 가능. </p>
<p>1_000_000과 같은 표현 가능.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decimal: <span class="built_in">number</span> = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hex: <span class="built_in">number</span> = <span class="number">0xf00d</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> binary: <span class="built_in">number</span> = <span class="number">0b1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> octal: <span class="built_in">number</span> = <span class="number">0o744</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> NotANumber: <span class="built_in">number</span> = <span class="literal">NaN</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> underscoreNum: <span class="built_in">number</span> = <span class="number">1_000_000</span>;</span><br></pre></td></tr></table></figure>

<h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fullName: <span class="built_in">string</span> = <span class="string">&quot;JayoonKoo&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> age: <span class="built_in">number</span> = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sentence: <span class="built_in">string</span> = <span class="string">`Hello, My name is <span class="subst">$&#123;fullName&#125;</span>.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">I&#x27;ll be <span class="subst">$&#123;age + <span class="number">1</span>&#125;</span> years old next month.`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sentence);</span><br></pre></td></tr></table></figure>

<h2 id="symbol"><a href="#symbol" class="headerlink" title="symbol"></a>symbol</h2><p><code>new Symbol</code>로 사용할 수 없다.<br>Symbol 함수를 사용해서 만들어야 한다. </p>
<p>기본 설정으로 tsc를 만들었다면 오류가 날 수 있다.<br><code>tsconfig.json</code>으로 이동한 후에 <code>lib</code>를 열어서 ES2015, DOM을 추가해 준다. </p>
<p>Symbol 은 프리미티브 타입의 값을 담아서 사용한다.<br>고유하고 수정 불가능한 값을 만들어 주는데 주로 접근을 제어하는 용도로 사용하는 경우가 많다. </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>(<span class="string">&quot;foo&quot;</span>) === <span class="built_in">Symbol</span>(<span class="string">&quot;foo&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sym = <span class="built_in">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  [sym]: <span class="string">&quot;value&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj[sym]);</span><br></pre></td></tr></table></figure>

<h2 id="undefined-null"><a href="#undefined-null" class="headerlink" title="undefined, null"></a>undefined, null</h2><p>undefined 로 선언한 변수는 undefined, void만, null 로 선언한 변수는 null 만 받을 수 있다.<br>따라서 변수 자체로는 할 수 있는게 별로 없다. </p>
<p>null 과 undefined 는 다른 모든 타입의 서브 타입이다.<br><code>--strictNullCheck</code> 설정을 사용하지 않으면 <code>number</code> 에 null 또는 undefined가 할당될 수 있어서 문제가 있다.<br>따라서 해당 옵션을 항상 켜 놓는것이 좋다.<br><code>&quot;strict&quot;: true</code> 로 해 두면 그 안에 있는 <code>strictNullCheck</code> 도 켜지게 된다. </p>
<p>하지만 number 같은 경우 undefined 나 null 이 될때가 있을 텐데 불편할 수 있다. 그럴때에는 <code>union type</code>을 사용한다.<br>나중에 타입 가드를 사용하여 제외하는 식으로 사용 된다. </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> union: <span class="built_in">string</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> u: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">union = <span class="string">&quot;Mark&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(u);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> u);</span><br></pre></td></tr></table></figure>

<h3 id="JS-에서-null"><a href="#JS-에서-null" class="headerlink" title="JS 에서 null"></a>JS 에서 null</h3><p>무언가 사용할 준비가 덜 된 상태<br>null 이라는 타입은 null 이라는 값만 가질 수 있다. </p>
<p>런타임에서는 <code>typeof null</code>은 <code>object</code>이다. </p>
<h3 id="JS-에서-undefined"><a href="#JS-에서-undefined" class="headerlink" title="JS 에서 undefined"></a>JS 에서 undefined</h3><p>값을 할당하지 않는 변수를 undefined라고 함.<br>무언가 아예 준비가 안된 상태.<br>프로퍼티가 없을 때에도 undefined 이다. </p>
<p>런타임에서 <code>typeof undefined</code> 하면 <code>undefined</code>이다. </p>
<h2 id="object"><a href="#object" class="headerlink" title="object"></a>object</h2><p>non-primitive type 으로서 primitive type이 아닌 것을 사용할때 명시한다. </p>
<h3 id="non-primitive-type"><a href="#non-primitive-type" class="headerlink" title="non-primitive type"></a>non-primitive type</h3><p>not (number, string, boolean, bigint, symbol, null, or undefined.)</p>
<h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><p>원래 JS에서는 object이다.<br>같은 타입에 데이터만 가능하다. </p>
<p>사용 방법 :</p>
<ul>
<li>Array&lt;타입&gt;</li>
<li>타입[]</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 보통은 이 방법을 사용함.</span></span><br><span class="line"><span class="keyword">let</span> list: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> listUnion: (<span class="built_in">number</span> | <span class="built_in">string</span>)[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&quot;4&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 만약 데이터의 순서나 상황을 알고 있다면 튜플을 사용할 것</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// jsx 에서 충돌 할수도 있음.</span></span><br><span class="line"><span class="keyword">let</span> list2: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>

<h2 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h2><p>순서도 맞아야 하고, 타입도 맞아야 하고, 길이도 맞아야 한다. </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x: [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 순서도 맞아야 되고 타입도 맞아야 되고 길이도 맞아야 한다.</span></span><br><span class="line">x = [<span class="string">&quot;hello&quot;</span>, <span class="number">39</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person: [<span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&quot;mark&quot;</span>, <span class="number">49</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 첫번째는 string, 두번째는 number임이 확실해 진다.</span></span><br><span class="line"><span class="comment">// 세번째를 추가하면 오류가 나게 된다.</span></span><br><span class="line"><span class="keyword">const</span> [first, second] = person;</span><br></pre></td></tr></table></figure>

<h2 id="any"><a href="#any" class="headerlink" title="any"></a>any</h2><p>귀찮다고 아무렇게나 사용하면 type system을 무너뜨릴 수 있다. </p>
<p>어떤 타입이어도 상관 없는 타입이다. </p>
<p>이걸 최대한 사용하지 않는것이 핵심이다. (타입 체크가 안되기 때문에 )</p>
<p>컴파일 옵션 중에는 any를 써야하는데 쓰지 않으면 오류를 뱉도록 하는 옵션도 있다.<br>(noImplicitAny)</p>
<p>any 는 계속해서 개체를 통해 전파된다. </p>
<p>결국, 타입 안정성을 잃는 대가로 이어짐. </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnAny</span>(<span class="params">message: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> any1 = returnAny(<span class="string">&quot;리턴은 아무거나&quot;</span>);</span><br><span class="line"></span><br><span class="line">any1.toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 어떻게 전파 되는가?</span></span><br><span class="line"><span class="keyword">let</span> losselyTyped: <span class="built_in">any</span> = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> d = losselyTyped.a.b.c.d;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 동적인 경우는? any를 피하기 위해서</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">leakingAny</span>(<span class="params">obj: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> a = obj.num;</span><br><span class="line">  <span class="comment">// b 도 any 가 됨</span></span><br><span class="line">  <span class="keyword">const</span> b = a + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// c 도 any 가 됨</span></span><br><span class="line"><span class="keyword">const</span> c = leakingAny(&#123; <span class="attr">num</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">leakingAny1</span>(<span class="params">obj: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> a: <span class="built_in">number</span> = obj.num;</span><br><span class="line">  <span class="comment">// b 도 number 이다. </span></span><br><span class="line">  <span class="keyword">const</span> b = a + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// but 함수 안에서 사용하기 전에 처리를 하거나  type guard 를 사용하는 것이 좋음.</span></span><br></pre></td></tr></table></figure>

<h2 id="unknown"><a href="#unknown" class="headerlink" title="unknown"></a>unknown</h2><p>any 가 전파되는 등의 문제를 해결하기 위해서 unknown을 사용한다. </p>
<p>type guard 를 연계해서 사용할 수 있다.<br>스코프 안 (type guard) 안에서는 특정 자료형임을 확정 지을 수 있다. </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> maybe: unknown;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (maybe === <span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> aBoolean: <span class="built_in">boolean</span> = maybe;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> maybe === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> aString: <span class="built_in">string</span> = maybe;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>any 보다 type-Safe 한 타입이다.<br>any와 같이 아무거나 할당할 수 있지만, 컴파일러가 타입을 추론할 수 있게끔 타입의 유형을 좁히거나 타입을 확정해 주지 않으면 다른 곳에 할당 할 수 없고, 사용할 수 없다. </p>
<h2 id="never"><a href="#never" class="headerlink" title="never"></a>never</h2><p>보통은 <code>return</code> 에 사용된다.<br><code>never</code>를 리턴하게 되면 아무것도 리턴 하지 않는다는 의미가 된다.<br>따라서 함수가 끝나버리면 안되고 에러를 던지는 등의 동작을 하게 된다. </p>
<ul>
<li>never는 모든 타입의 서브타입이여서 모든 타입에 할당할 수 있다. </li>
<li>하지만 never에는 어떤 것도 할당할 수 없다. </li>
<li>any 조차도 never에게 할당할 수 없다. </li>
<li>잘못된 타입을 넣는 실수를 막고자 할 때 사용하기도 한다.</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 이때도 never라고 추론하게 된다.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> error(<span class="string">&quot;faild&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 무한 반복에 예시에서 never를 사용할 수 있다.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">infinitiLoop</span>(<span class="params"></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a: <span class="built_in">string</span> = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 잘못된 타입을 넣는 실수를 막을 수 있다.</span></span><br><span class="line"><span class="comment">// a 는 스코프 안에서 never가 된다.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> a !== <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">  a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> b: <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b는 number 가 된다.</span></span><br><span class="line"><span class="comment">// 이런식으로 type guard를 사용할 수 있다.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> b !== <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">  b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="void"><a href="#void" class="headerlink" title="void"></a>void</h2><p>void로 지정된 변수에는 undefined도 할당할 수 없다.<br>void를 리턴하는 함수의 경우 리턴받은 void 변수를 가지고 어떤것도 하지 않겠다는 의미이다. </p>
<p>명시적으로 void 로 선언해서 리턴 타입을 가지고 아무것도 하지 않겠다는 의미임. </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/08/30/typeScript/210809-TypeScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/30/typeScript/210809-TypeScript/" class="post-title-link" itemprop="url">TypeScript</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-30 02:32:06" itemprop="dateCreated datePublished" datetime="2021-08-30T02:32:06+09:00">2021-08-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/typeScript/" itemprop="url" rel="index"><span itemprop="name">typeScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><h2 id="TypeScript란-무엇인가"><a href="#TypeScript란-무엇인가" class="headerlink" title="TypeScript란 무엇인가?"></a>TypeScript란 무엇인가?</h2><p>자바 스크립트에 타입을 명시. 확장 한 것 </p>
<p>코드를 실행 시키기 전에 에러를 잡아줌. </p>
<p>자바스크립트가 실행되는 어떤 환경에서도 동작함.</p>
<p>Typed superset of JavaScript</p>
<p>컴파일해서 plain JavaScript 로 변환함.<br>but, 정통적인 컴파일과는 다름. 타이밍상 컴파일이라 많은 사람들이 Transpile 이라는 용어를 사용함. </p>
<h2 id="TypeScript-설치-및-설정"><a href="#TypeScript-설치-및-설정" class="headerlink" title="TypeScript 설치 및 설정"></a>TypeScript 설치 및 설정</h2><ul>
<li><p>node.js 설치</p>
</li>
<li><p>크롬 설치</p>
</li>
<li><p>타입 스크립트 컴파일러 설치 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i typescript -g </span><br><span class="line">tsc source.ts</span><br></pre></td></tr></table></figure>
<p><code>node_module/.bin/tsc</code> 에 tsc 있음. </p>
</li>
<li><p>초기화<br><code>tsc --init</code> 실행하면 어떻게 컴파일 할것인지에 대한 설정 파일 <code>tsconfig.json</code> 생성.<br><code>tscconfig.json</code> 이 있는 폴더에서 tsc 실행하면 해당 폴더에 있는 모든 ts 파일이 설정에 맞게 컴파일 됨. </p>
</li>
<li><p>와치 모드로 시작<br>새롭게 파일이 생성되거나 저장될때 마다 tsc 를 실행해 주지 않고 와치 모드로 시작되서 변경 감지 후 자동으로 변환 시작하게 함.<br><code>tsc -w</code></p>
</li>
</ul>
<h3 id="프로젝트에만-설치하기"><a href="#프로젝트에만-설치하기" class="headerlink" title="프로젝트에만 설치하기"></a>프로젝트에만 설치하기</h3><p>글로벌로 설치한 것 지우기<br><code>npm uninstall typescript -g</code></p>
<p><code>npm init -y</code></p>
<p><code>npm i typescript -D</code> 개발 라이브러리로 설치 </p>
<p>글로벌이 아닐때에는 tsc 경로를 명시해줘야함. <code>node_modules/.bin/tsc</code><br><code>npx tsc</code>로 똑같이 사용 가능</p>
<p>모든 명령어 앞에다 npx 붙여서 사용.</p>
<p>보통은 package.json 에 script를 수정함.<br><code>&quot;build&quot;: &quot;tsc&quot;</code> npm run build 로 실행 가능. </p>
<h2 id="First-Type-Annotation"><a href="#First-Type-Annotation" class="headerlink" title="First Type Annotation"></a>First Type Annotation</h2><p>ts 는 처임 초기화 된 변수를 토대로 type를 할당함. 만약 초기화 하지 않았다면 <code>any</code> 가 됨. </p>
<p>어떤 type인지 명시하는 것을 type annotation 이라고 하고 아래와 같이 사용한다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a: <span class="built_in">number</span>;</span><br><span class="line">a = <span class="number">39</span>;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/08/30/typeScript/210813-TypeScript%20Compiler/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/30/typeScript/210813-TypeScript%20Compiler/" class="post-title-link" itemprop="url">TypeScript Compiler</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-30 02:32:06" itemprop="dateCreated datePublished" datetime="2021-08-30T02:32:06+09:00">2021-08-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/typeScript/" itemprop="url" rel="index"><span itemprop="name">typeScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="TypeScript-Compiler"><a href="#TypeScript-Compiler" class="headerlink" title="TypeScript Compiler"></a>TypeScript Compiler</h1><h2 id="Compliation-Context"><a href="#Compliation-Context" class="headerlink" title="Compliation Context"></a>Compliation Context</h2><p>논리적인 그룹핑과 어떤 방법으로 컴파일 할것인지에 대한 맥락.<br>보통 <code>tsconfig.json</code> 파일로 관리한다.</p>
<h2 id="tsconfig-schema"><a href="#tsconfig-schema" class="headerlink" title="tsconfig schema"></a>tsconfig schema</h2><p>최상위 프로퍼티 중 주요한 항목</p>
<ul>
<li>compileOnSave</li>
<li>extends</li>
<li>compileOptions</li>
<li>files</li>
<li>include</li>
<li>exclude</li>
<li>references</li>
</ul>
<h2 id="compileOnSave"><a href="#compileOnSave" class="headerlink" title="compileOnSave"></a>compileOnSave</h2><ul>
<li>true/false(default fasle): true 로 설정하면 저장하면 컴파일 해줌.</li>
<li>누가?<ul>
<li>Visual Studio 2015 with TypeScript 1.8.4 이상</li>
<li>tom-thypescript 플러그인</li>
</ul>
</li>
</ul>
<h2 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h2><p>상속 받을 때 사용함.</p>
<ul>
<li>파일 (상대) 경로명 : string</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptins&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;strict&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;extends&quot;</span>: <span class="string">&quot;./base.json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>tsconfig/base</code> 저장소로 이동하면 다양한 base 설정을 받을 수 있다.</p>
<p><code>npm install --save-dev @tsconfig/deno</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;extends&quot;</span>: <span class="string">&quot;@tsconfig/deno/tsconfig.json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="files-include-exclude"><a href="#files-include-exclude" class="headerlink" title="files, include, exclude"></a>files, include, exclude</h2><p>어떤 파일을 컴파일 할것인지 결정함.</p>
<p>files 가 가장 강한 설정이다. 따라서 exlucde를 통해서 제외 했더라도 files 안에 있으면 컴파일 된다.</p>
<p>셋다 설정이 없으면 전부 컴파일 하려고 한다.</p>
<ul>
<li>files<ul>
<li>상대 혹은 절대 경로의 리스트 배열이다.</li>
<li>exclude 보다 쎄다.</li>
</ul>
</li>
<li>include, exclude<ul>
<li>glob 패턴 (마치 .gitignore)</li>
<li>include<ul>
<li>exclude 보다 약하다.</li>
</ul>
</li>
<li>exclude<ul>
<li>설정 안하면 4가지 (node_modules, bower_components, jspm_packages, &lt;outDir&gt;) 를 dafault로 제외 함.</li>
<li>&lt;outDir&gt; 은 항상 제외한다. (include에 있어도)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="compileOptions-typeRoots-types"><a href="#compileOptions-typeRoots-types" class="headerlink" title="compileOptions - typeRoots, types"></a>compileOptions - typeRoots, types</h2><p>만약 외부 라이브러리를 사용할 경우 타입 검사를 어떻게 수행할까?</p>
<p>예를 들어 react를 설치하면 js로 만든 것이기 때문에 오류가 발생한다. 따라서 <code>npm i --save-dev @types/react</code>를 하게 되면 <code>node_modules/@types</code>안에서 파일을 찾아서 오류가 나지 않게 된다.<br>이것이 default 설정인데 typeRoots와 types 를 통해 설정을 변경할 수 있다.</p>
<p>typeRoots로 @types로 사용할 폴더를 설정한다. 유명하지 않는 라이브러리 같은 경우 @types가 없을 수 있고 내가 작성한 패키지는 내가 따로 만들어야 하는 경우도 있다.</p>
<p><code>@types</code></p>
<ul>
<li>내장 type definition 시스템이다.</li>
<li>아무 설정을 하지 않으면 <code>node_modules/@types</code> 라는 모든 경로를 찾아서 사용한다.</li>
<li>typeRoots를 사용하면? -&gt; 배열 안에 들어있는 경로들 아래서만 가져온다.</li>
<li>types 를 사용하면 -&gt; 배열안에 모듈 혹은 <code>./node_module/@types/</code> 안에 모듈 이름에서 찾아온다. [] 빈 배열을 넣는다는 건 이 시스템을 이용하지 않겠다는 것이다.</li>
<li>typeRoots와 types를 같이 사용하지는 않는다.</li>
</ul>
<h2 id="compileOptions-target과-lib"><a href="#compileOptions-target과-lib" class="headerlink" title="compileOptions - target과 lib"></a>compileOptions - target과 lib</h2><p>target - 자바스크립트 버전을 설정한다. 기본값은 es3이다. 컴파일 할때 해당 버전으로 변경한다.</p>
<p>lib - lib로 사용할것들을 배열로 넘겨줌. target에 따라 default로 저장되는 lib가 있다.</p>
<h2 id="compileOptions-outDir-outFil-rootDir"><a href="#compileOptions-outDir-outFil-rootDir" class="headerlink" title="compileOptions -outDir, outFil, rootDir"></a>compileOptions -outDir, outFil, rootDir</h2><ul>
<li>rootDir : 컴파일 대상이 되는 파일이 있는 폴더</li>
</ul>
<p>따로 설정하지 않으면 ts 파일이 있는 가장 최상위 폴더를 rootDir로 설정한다.</p>
<ul>
<li>outDir : 컴파일 한 파일이 저장될 폴더</li>
<li>outFile: 지정된 경우 모든 전역 파일이 지정된 단일 출력 파일로 연결된다.</li>
</ul>
<h2 id="compileOptions-strict"><a href="#compileOptions-strict" class="headerlink" title="compileOptions - strict"></a>compileOptions - strict</h2><p>무조건 strict를 true로 설정하는 것이 기본이다.</p>
<p><code>--noImplicitAny</code> any로 추정되는데 any로 명시하지 않았다면 에러가 발생함.<br><code>suppressImplicitAnyIndexErrors</code> 인덱스 객체도 any로 추론될 경우 에러를 발생시키는 옵션인데 이것은 너무 까다로우니 따로 에러가 되지 않게 하는 설정도 있음.</p>
<p><code>--noImplictThis</code> this 가 any 타입으로 추정될 경우 . this에 타입을 명시해야 한다고 에러를 발생 시킴, 함수 매개변수에 첫번째에 this를 넣고 타입일 지정해줌. js에서는 오류 이지만 ts에서는 가능함.<br>마치 call /applyu/ bind 와 같이 this를 대체하여 함수 콜을 사용하는 용도. class에서는 오류가 나지 않음 왜냐하면 class 자체로 타입 체크가 가능하기 때문에</p>
<p><code>--strictNullChecks</code> 이것을 적용히지 않으면 모든 타입은 null 과 undefined가 될 수 있다. 꼭 설정해주어야 함. 한가지 예외는 undefined 에 void 할당이 가능하다.</p>
<p><code>--strictFunctionTypes</code> 반환 타입은 공변적, 인자 타입은 반 공병적. 그런데 타입스크립트에서 인자 타입은 공변적이면서, 반공변적인게 문제. 함수의 파라미터 타입이 반공변적으로 동작핟조록 변경한다. 반공변 이란 공변에 반대라고 생각하면 된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Logger&lt;T&gt; = <span class="function">(<span class="params">param: T</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">let</span> log: Logger&lt;<span class="built_in">string</span> | <span class="built_in">number</span>&gt; = <span class="function">(<span class="params">param</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(param);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> logNumber: Logger&lt;<span class="built_in">number</span>&gt; = <span class="function">(<span class="params">param</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(param);</span><br><span class="line">&#125;;</span><br><span class="line">log = logNumber; <span class="comment">// Error</span></span><br><span class="line">logNumber = log; <span class="comment">// OK</span></span><br></pre></td></tr></table></figure>

<p>공변이라고 생각하면 logNumber 가 서브 타입이기대문에 log에 할당하는 것이 가능할 것이다. 하지만 <code>--strictFunctionTypes</code>를 적용하면 파라미터에 대해서 반공변적으로 작동하기 때문에 반대로 작동한다.<br>사실 <code>logNumber</code>는 숫자 밖에 처리하지 못하기 때문에 string 도 처리할 수 있는 <code>log</code>에 할당하는게 맞지 않다.</p>
<p><code>--stcitPropertyInitialization</code> 정의되지 않은 클래스의 속성이 생성자에서 초기화되었는지 확인한다. 만약 비동기로 생성되는 클래스일 경우에 생성자에 async를 사용하는것이 불가능하기 때문에 에러가 발생한다.<br>이럴때에는 async 함수로 initialize 같은 함수를 만들어 할당해 주고 클래스 내부 변수로 이름 뒤에 <code>!</code>를 붙여주면 된다. <code>private _name!: string;</code></p>
<p><code>--strictBindCallApply</code> bind, call, apply 에 대한 검사를 엄격히 수행한다.</p>
<p><code>--alwaysStrict</code> strict 모드로 코드를 분석함.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JayoonKoo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
