<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"jayoonkoo.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="티끌모아 태산">
<meta property="og:url" content="https://jayoonkoo.github.io/page/9/index.html">
<meta property="og:site_name" content="티끌모아 태산">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="JayoonKoo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jayoonkoo.github.io/page/9/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/9/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>티끌모아 태산</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">티끌모아 태산</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">작은 조각 모음</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">13</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">11</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">126</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">JayoonKoo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">126</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/JayoonKoo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JayoonKoo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:rnwkdbs12@gmail.com" title="E-Mail → mailto:rnwkdbs12@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/JayoonKoo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210809-AWS%20%EB%A6%AC%EB%88%85%EC%8A%A4%20%EC%82%AC%EC%9A%A9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210809-AWS%20%EB%A6%AC%EB%88%85%EC%8A%A4%20%EC%82%AC%EC%9A%A9/" class="post-title-link" itemprop="url">AWS 리눅스 사용</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="리눅스-사용법-익히기"><a href="#리눅스-사용법-익히기" class="headerlink" title="리눅스 사용법 익히기"></a>리눅스 사용법 익히기</h1><h2 id="리눅스-설치-방법"><a href="#리눅스-설치-방법" class="headerlink" title="리눅스 설치 방법"></a>리눅스 설치 방법</h2><ol>
<li>가상 머신 소프트 웨어 <ul>
<li>PC 환경에 따라 문제들이 다름.</li>
</ul>
</li>
<li>클라우드 컴퓨팅 서비스 활용 <ul>
<li>최신 기술에 익숙해 짐. </li>
<li>동일한 환경에서 사용이 가능 </li>
</ul>
</li>
</ol>
<h2 id="클라우드-컴퓨팅"><a href="#클라우드-컴퓨팅" class="headerlink" title="클라우드 컴퓨팅"></a>클라우드 컴퓨팅</h2><p>서버 환경을 미리 구축해 놓고, 간단한 설정으로 바로 사용할 수 있도록 만든 서비스.</p>
<ul>
<li>이전 : 미리 서버 컴퓨터를 구축해야 함. 예측해서 구축해야 되는 문제 </li>
<li>현재 : 클라우드 컴퓨팅 환경 사용 </li>
</ul>
<h2 id="AWS-회원-가입"><a href="#AWS-회원-가입" class="headerlink" title="AWS 회원 가입"></a>AWS 회원 가입</h2><p>무료로 1년간 사용 가능 함. </p>
<p>해외 결제 가능한 신용카드가 필요하다. </p>
<h2 id="AWS-클라우드-컴퓨팅-설정"><a href="#AWS-클라우드-컴퓨팅-설정" class="headerlink" title="AWS 클라우드 컴퓨팅 설정"></a>AWS 클라우드 컴퓨팅 설정</h2><ol>
<li>EC2 또는 인스턴스(서버) 생성</li>
<li>Elastic IP (탄력적 IP) 생성 <ul>
<li>고정 IP로 만들어야 함. </li>
</ul>
</li>
<li>자기 PC(클라이언트) 에서 EC2(서버) 접속</li>
</ol>
<p>EC2 &gt; 인스턴스 &gt; 인스턴스 시작 &gt; 우분투 18.04 &gt; 옵션 선택 후 생성</p>
<p>태그 추가? 실제 현업에서는 다수의 서버를 운용하니까 태그로 이름 구분</p>
<h2 id="고정-IP-생성-및-연결"><a href="#고정-IP-생성-및-연결" class="headerlink" title="고정 IP 생성 및 연결"></a>고정 IP 생성 및 연결</h2><p>AWS 콘솔에서 탄력젹 IP 선택 후 새로운 IP 할당.<br>할당한 IP와 새로운 기존에 인스턴스를 연결 .</p>
<p>터미널을 통한 우분투 접속.<br>기존에 받아 놓은 pem 이 있는 폴더로 이동 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 400 &lt;user-key.pem&gt;</span><br></pre></td></tr></table></figure>
<p>받아놓은 키에 권한을 변경해 줌.</p>
<p>ssh 를 이요한 접속. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i &lt;user-key.pem&gt; ubuntu@&lt;IP&gt;</span><br></pre></td></tr></table></figure>
<p>ubuntn 란 사용자로 해당 IP로 접속…</p>
<p>참고로 고정 IP는 할당만 하고 연결 안하면 비용이 청구 된다.<br>또 연결 했더라도 실행을 시키지 않으면 비용이 청구 되고 여러개의 고정 IP를 할당해도 비용이 청구된다. </p>
<h2 id="리눅스와-파일"><a href="#리눅스와-파일" class="headerlink" title="리눅스와 파일"></a>리눅스와 파일</h2><p>모든 것은 파일이라는 철학을 따름</p>
<ul>
<li><p>모든 인터렉션은 파일을 읽고, 스는 것처럼 이루어짐. (마우스, 키보드와 같은 모든 디바이스 관련 동작도)</p>
</li>
<li><p>파일 네임 스페이스 </p>
<ul>
<li>전역 네임스페이스를 사용함 (/media/floofy/dave.jpg)</li>
</ul>
</li>
<li><p>파일은 inode 고유값과 자료구조에 의해 주요 정보를 관리한다. </p>
</li>
</ul>
<h2 id="리눅스와-프로세스"><a href="#리눅스와-프로세스" class="headerlink" title="리눅스와 프로세스"></a>리눅스와 프로세스</h2><ul>
<li>리눅스는 ELF 실행 파일 포멧을 갖는다. </li>
<li>다양한 시스템 리소스와 관련 되어 있다. </li>
<li>가상메모리를 지원한다. </li>
<li>프로세스는 PID 기반으로 구분된다. </li>
<li>init 프로세스를 기반으로 fork() 시스템콜을 사용해서, 신규 프로세스가 생성 된다. </li>
</ul>
<h2 id="리눅스와-권한"><a href="#리눅스와-권한" class="headerlink" title="리눅스와 권한"></a>리눅스와 권한</h2><p>운영체제는 사용자 리소스 권한을 관리한다.<br>리눇는 사용자 / 그룹으로 권한을 관리한다.<br>root는 슈퍼 관리자이다.<br>파일마다 소유자, 소유자 그룹, 모든 사용자에 대한 읽고, 쓰고, 실행되는 권한을 관리한다.<br>접근 권한 정보는 inode의 자료구조에 저장된다. </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210809-%EB%A6%AC%EB%88%85%EC%8A%A4(%EC%9C%A0%EB%8B%89%EC%8A%A4)%20%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210809-%EB%A6%AC%EB%88%85%EC%8A%A4(%EC%9C%A0%EB%8B%89%EC%8A%A4)%20%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/" class="post-title-link" itemprop="url">리눅스(유닉스) 운영체제</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="리눅스"><a href="#리눅스" class="headerlink" title="리눅스"></a>리눅스</h1><p>서버에 많이 사용되는 운영체제 </p>
<p>프로그래밍 할때에도 많이 사용 된다.<br>컴파일 시간이 줄어든다. </p>
<p>클라우드 컴퓨팅 (AWS) 에도 많이 사용됨</p>
<p>운영체제, 소프트웨어의 대부 UNIX 계열 운영체제이다.<br>완전 프로그래머 스타일이다. </p>
<p>plain 하게 프로그래밍 가능하다.<br>ANSI C - C 언어 표준 (표준으로 코딩이 가능하다.)</p>
<br/>

<h2 id="리눅스의-역사와-배경"><a href="#리눅스의-역사와-배경" class="headerlink" title="리눅스의 역사와 배경"></a>리눅스의 역사와 배경</h2><h3 id="리눅스-시작"><a href="#리눅스-시작" class="headerlink" title="리눅스 시작"></a>리눅스 시작</h3><p>리누스 토발즈가 개발.<br>대학에 있는 UNIX 컴퓨터를 집에서 쓰고 싶었다.<br>다중 사용자, 다중 작업(시분할 시스템, 멀티 태스킹) 을 지원할 수 있도록 만들었다. </p>
<h3 id="GNU-프로젝트"><a href="#GNU-프로젝트" class="headerlink" title="GNU 프로젝트"></a>GNU 프로젝트</h3><p>GNU = Gnu is Not Unix</p>
<p>유닉스 운영체제를 여러 회사에서 개발했는데, 소스를 공유하지 않았다.<br>리차드 스톨만이 초기 컴퓨터 개발 공동체의 상호협력적인 문화로 돌아가자고 1985년 GNU 선언문을 발표했다.<br>기술을 공유 되어야 한다고 주장.</p>
<p>GNU 프로젝트를 지원하기 위해 자유 소프트웨어 재단 설립 GNU 공개 라이선스(GPL) 규약을 제공.<br>이 소스를 사용할수 있지만 해당 기술을 사용했다면 기술은 공유 되어야 한다는 규약.</p>
<h4 id="GPL-라이선스"><a href="#GPL-라이선스" class="headerlink" title="GPL 라이선스"></a>GPL 라이선스</h4><p>GPL 프로그램은 어떤 형태로든 사용할 수 있지만, 다시 배포하기 위해서 동일한 GPL 라이선스 사용해야 함.</p>
<h3 id="GNU-Hurd"><a href="#GNU-Hurd" class="headerlink" title="GNU Hurd"></a>GNU Hurd</h3><p>운영체제 커널 개발 시도 - GNU Hurd</p>
<p>운영체제의 필요한 쉘 응용 프로그램, API, 라이브러리 System Call 개발, 컴파일러 개발</p>
<img src="images/210809-리눅스(유닉스)%20운영체제/1.png" width="300">

<h3 id="GNU-프로젝트와-리눅스"><a href="#GNU-프로젝트와-리눅스" class="headerlink" title="GNU 프로젝트와 리눅스"></a>GNU 프로젝트와 리눅스</h3><p>GNU Hurd 개발 지연</p>
<p>리누스 토발즈가 리눅스 커널 소스 오픈 소식 들음. GNU Hurd 를 개발 안해도 되겠네? </p>
<p>GNU 프로젝트 산출물과 리눅스 커널이 통합 개발 되기 시작. </p>
<p>GNU/ Linux 라고 부르기를 희망함. 리차드 스톨만이 (GNU 창시자.)</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210810-shell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210810-shell/" class="post-title-link" itemprop="url">shell</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h1><p>쉘 - 사용자와 컴퓨터 하드웨어 또는 운영체제 간의 인터페이스 </p>
<h2 id="쉘-종류"><a href="#쉘-종류" class="headerlink" title="쉘 종류"></a>쉘 종류</h2><ul>
<li>bash</li>
<li>sh</li>
<li>csh</li>
<li>ksh </li>
</ul>
<h2 id="다중-사용자-관련-명령어"><a href="#다중-사용자-관련-명령어" class="headerlink" title="다중 사용자 관련 명령어"></a>다중 사용자 관련 명령어</h2><p><code>whoami</code> - 사용자 이름 출력</p>
<p><code>passwd</code> - 새로운 패스워드 설정<br>(aws 에서 만들었으면 이미 설정된 아이디 사용하므로 패스워드가 없음)<br>root 권한만 사용할 수 있음. </p>
<p><code>useradd</code>는 사용자 기본 설정 자동으로 하지 않음.</p>
<p><code>adduser</code>는 사용자 기본 설정을 자동으로 함. (이거 사용해) - root 사용자가 만들 수 있음 </p>
<p><code>sudo</code> root 권한으로 실행하기<br>(해당 id 가 sudo 를 사용할수 있도록 미리 설정되어야 함.)</p>
<p><code>su</code> 사용자 변경 </p>
<pre><code>- `su root`  현재 사용자의 설정 파일을 기반으로 id만 바
- `su - root` 변경되는 사용자의 환경설정을 기반으로 id도 바뀜 
</code></pre>
<h3 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h3><p><code>/etc/sudoers</code> 설정 파일에서 설정을 해주어야 함.<br>root 권한이어야 읽을 수 있고 수정할 수 있음.<br>새로 생성한 id에 sudo 사용 권한을 주고 싶다면<br><code>dave2        ALL=(ALL:ALL) ALL</code></p>
<blockquote>
<ol>
<li>특정 사용자가 sudo를 사용할 수 있도록 <code>userid        ALL=(ALL)        ALL</code></li>
<li>특정 그룹에 포함된 모든 사용자가 sudo를 사용할 수 있도록 <code>%group        ALL=(ALL)        ALL</code></li>
<li>패스워드 생략 설정 <code>%group        ALL=(ALL)        NOPASSWD: ALL</code></li>
</ol>
</blockquote>
<p><code>pwd</code> 현재 디렉토리 위치</p>
<p><code>cd</code> 디렉토리 이동 <code>cd - </code> 바로 전 디렉토리로 이동 </p>
<p><code>dir</code> 파일 목록 <code>ls</code> 랑 똑타음 플래그 사용하려면 <code>ls</code> 사용하는게 나음.</p>
<p>와일드 카드 </p>
<ul>
<li><code>*</code> 는 임의 문자열</li>
<li><code>?</code> 는 문자 하나 </li>
</ul>
<p><code>man</code> man 띄고 명령어 입력하면 플래그 정보를 알 수 있음. </p>
<h3 id="ls와-파일-권한"><a href="#ls와-파일-권한" class="headerlink" title="ls와 파일 권한"></a>ls와 파일 권한</h3><p>리눅스는 파일마다 소유자, 소유자 그룹, 모든 사용대한 읽고, 쓰고, 실행하는 권한을 설정한다.</p>
<p><code>- rwx rx- r-x</code></p>
<ul>
<li>처음 1칸 데이터가 파일이면 -, 폴더면 d</li>
<li>다음 3칸 소유자의 권한 </li>
<li>다음 3칸 그룹의 권한 </li>
<li>다음 3칸 기타 상자의 권한 </li>
</ul>
<p>r : 읽고, 카피 (ls 명령어 가능)</p>
<p>w : 수정 (파일 생성 가능)</p>
<p>x : 실행 (cd 접근 가능)</p>
<p><code>chmod</code> : 파일 권한 변경</p>
<img src="images/210810-shell/1.png" width="400">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod g+rx test.c</span><br><span class="line">chmod u+rx test.c</span><br><span class="line">chmod ug+rx test.c</span><br><span class="line">chmod u=rwx, g=rw, o=rx test.c</span><br></pre></td></tr></table></figure>

<p>숫자를 사용하는 방법</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rwx rwx rwx = 777</span><br><span class="line">r-x r-x r-x = 555</span><br><span class="line">r-- --- --- = 400</span><br><span class="line">rwx --- --- = 700</span><br></pre></td></tr></table></figure>

<p><code>chown</code> 소유자 변경</p>
<p><code>cat</code> 파일 내용 보기 </p>
<p><code>head</code> 앞부분 보기</p>
<p><code>tail</code> 끝 부분만 보기 </p>
<p><code>more</code> 화면에 보일 수 있는 부분만 보고 나머지는 스크롤 하면서 보겠다. </p>
<p><code>rm</code> remove 에 약자 </p>
<ul>
<li>r: 하위 디렉토리를 포함한 모든 파일 삭제 </li>
<li>f: 강제로 파일이나 디릭토리 삭제 </li>
</ul>
<p><code>rm -rf [dir]</code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210812-%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%EC%85%98%EA%B3%BC%20%ED%8C%8C%EC%9D%B4%ED%94%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210812-%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%EC%85%98%EA%B3%BC%20%ED%8C%8C%EC%9D%B4%ED%94%84/" class="post-title-link" itemprop="url">리다이렉션과 파이프</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="리다이렉션과-파이프"><a href="#리다이렉션과-파이프" class="headerlink" title="리다이렉션과 파이프"></a>리다이렉션과 파이프</h1><h2 id="Stansdard-Stream-표준-입출력"><a href="#Stansdard-Stream-표준-입출력" class="headerlink" title="Stansdard Stream(표준 입출력)"></a>Stansdard Stream(표준 입출력)</h2><p>command로 실행되는 프로세스는 세가지 스트림을 가지고 있다. </p>
<ul>
<li>표준 입력 스트립(Standard Input Stream) - stdin</li>
<li>표준 출력 스트립(Standard Output Stream) - stdout</li>
<li>오츄 출력 스트림 (Standard Error Stream) - stderr</li>
</ul>
<p>모든 스트림은 일반적인 plain text로 consol에 출력하도록 되어 있음. </p>
<h2 id="리다이렉션-redirection"><a href="#리다이렉션-redirection" class="headerlink" title="리다이렉션(redirection)"></a>리다이렉션(redirection)</h2><p>표준 스트림 흐름을 바궈준다.<br>주로 표준 출력을 화면이 아닌 파일로 할때 사용한다.<br>혹은 파일에 있는 내용을 응용 프로그램에 입력으로 바꿔 줄때 사용하기도 한다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls &gt; files.txt</span><br><span class="line">head &lt; files.txt</span><br><span class="line">head &lt; files.txt &gt; files2.txt</span><br></pre></td></tr></table></figure>
<p>head &lt; files.txt 원래는 이게 화면에 출력 되어야 하지만 뒤에 &gt; files2.txt 가 있기 때문에 리다이렉션 되어서 files2.txt 에 해당 내용이 적힌다. </p>
<p><code>ls &gt;&gt; files.txt</code> 기존에 파일이 있으면 append 되어서 추가된다. </p>
<h2 id="파이프-pipe"><a href="#파이프-pipe" class="headerlink" title="파이프 (pipe)"></a>파이프 (pipe)</h2><p>두 프로세스 사이에서 한 프로세스의 출력 스트림을 또다른 프로세스의 입력 스트림으로 사용하는 기능.<br>기호로 <code>|</code>를 사용한다. </p>
<p>유닉스의 철학 : 프로세스를 간단하게 만듦. </p>
<p><code>ls | grep files.txt</code> : grep 은 입력으로 들어온 데이터 중에서 인수로 받은 텍스트를 찾는 명령어이다.<br>파일 리스트에서 특정한 파일만 찾을때 사용한다. </p>
<h3 id="grep-flag"><a href="#grep-flag" class="headerlink" title="grep flag"></a>grep flag</h3><img src="images/210812-리다이렉션과%20파이프/1.png" width="700">

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210813-%EB%A6%AC%EB%88%85%EC%8A%A4%20%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B0%8F%20%EC%89%98%20%EB%AA%85%EB%A0%B9%EC%96%B4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210813-%EB%A6%AC%EB%88%85%EC%8A%A4%20%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B0%8F%20%EC%89%98%20%EB%AA%85%EB%A0%B9%EC%96%B4/" class="post-title-link" itemprop="url">리눅스 파일시스템 및 쉘 명령어</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="리눅스-파일-시스템과-쉘-명령어"><a href="#리눅스-파일-시스템과-쉘-명령어" class="headerlink" title="리눅스 파일 시스템과 쉘 명령어"></a>리눅스 파일 시스템과 쉘 명령어</h1><h2 id="리눅스는-I-O-를-파일-처럼-처리한다"><a href="#리눅스는-I-O-를-파일-처럼-처리한다" class="headerlink" title="리눅스는 I/O 를 파일 처럼 처리한다."></a>리눅스는 I/O 를 파일 처럼 처리한다.</h2><p>가상 파일 시스템을 사용한다. </p>
<p>예를들어, tty 는 가상파일 시스템 인퍼에스로 가상 터미널 환경과 연결되어 있다.<br>키보드 인풋을 받는다. </p>
<h2 id="슈퍼-블록-inode와-파일"><a href="#슈퍼-블록-inode와-파일" class="headerlink" title="슈퍼 블록, inode와 파일"></a>슈퍼 블록, inode와 파일</h2><p>슈퍼 블록 : 파일 시스템의 정보 </p>
<p>파일 : inode 고유값과 자료구조에 의해 주요 정보를 관리한다. </p>
<ul>
<li>파일 이름:inode 파일이름은 inode 번호와 매칭</li>
<li>파일 시스템에서는 inode를 기반으로 파일 엑세스 </li>
<li>inode 기반 메타 데이터 저장. (프로세스에서 PCB와 비슷하다.)</li>
</ul>
<p>메타 데이터에는 파일 권한, 소유자 정보, 파일 사이즈, 생성 시간등 시간 관련 정보, 데이터 저장 위치 같은 정보가 적힌다. </p>
<img src="images/210821-리눅스%20프로세스/1.png" width="400">

<h2 id="파일과-inode"><a href="#파일과-inode" class="headerlink" title="파일과 inode"></a>파일과 inode</h2><p>각 디렉토리에는 dentry 리 라고 하는 엔트리 정보가 있음.<br><code>/home/ubuntu/link.txt</code> 파일의 경우 / dentry 에서 home 서브 디릭토리를 찾고, home 에서 unbuntu를 찾고, ununtu에서 link.txt를 찾음.</p>
<p>디렉토리도 마찬가지로 inode를 갖고 있으므로 이를 통해 구별할 수 있다. </p>
<h2 id="하드-링크와-소프트-링크"><a href="#하드-링크와-소프트-링크" class="headerlink" title="하드 링크와 소프트 링크"></a>하드 링크와 소프트 링크</h2><p><code>cp</code> 파일 복사 : <code>-rf</code> 옵션을 많이 사용함. 폴더 안쪽 까지 모두 복사함.<br><code>cp -rf programing/ programing2</code></p>
<p><code>rm</code> : 파일 삭제. <code>rm -rf </code> 로 많이 사용함. </p>
<p>바로가기 처럼 만들고 싶다? -&gt; 링크 하고 싶다. </p>
<h3 id="하드링크"><a href="#하드링크" class="headerlink" title="하드링크"></a>하드링크</h3><p><code>ln link.txt hard.txt</code> link.txt를 링크하는 hard.txt</p>
<p>하드 링크는 또다른 파일을 만드는 것인데 inode 구조체는 동일하게 된다. 복사와 다른 점은 복사는 inode 구조체까지 복사한다. </p>
<p><code>ls -i</code> 로 inode 값 확인 링크로 만들면 inode id 값이 같다. </p>
<p>만약 link.txt를 변경하면 hard.txt 도 똑같이 변경된다. </p>
<p>하드링크에 경우에는 원본 파일이 사라지는 경우에도 파일 내용은 그대로이다. 이것은 실제 파일 하고 가르키고 있는 inode 구조체가 분리 되어 있기 때문이다.</p>
<img src="images/210813-리눅스%20파일시스템%20및%20쉘%20명령어/1.png" width="500">

<p>이렇게 하면 좋은점? inode를 공유 하면서도 파일 복사 같이 되기 때문에 inode 구조체를 또 복사할 필요가 없다. </p>
<h3 id="소프트-링크-심볼릭-링크"><a href="#소프트-링크-심볼릭-링크" class="headerlink" title="소프트 링크 (심볼릭 링크)"></a>소프트 링크 (심볼릭 링크)</h3><p>윈도우에 바로가기 아이콘과 같다고 할 수 있다.<br>원본 파일이 없어지면 접근이 안된다. </p>
<p>소프트 링크는 indoe 값이 다르다. 소프트 링크는 l로 시작한다. 링크 파일임으로 원본 파일에 내용이 바뀌면 소프트 링크에 내용 도 바뀐다. but, 원본이 삭제되면 소프트 링크 파일도 사라진다. </p>
<p>소프트 링크 같은 경우에는 별도의 inode structure을 갖는다. 다만, address 로 direct Block 을 갖는 것이 아니라 원본 파일을 가르키는 redirected path 를 갖는다. </p>
<img src="images/210813-리눅스%20파일시스템%20및%20쉘%20명령어/2.png" width="500">

<h2 id="특수-파일"><a href="#특수-파일" class="headerlink" title="특수 파일"></a>특수 파일</h2><p>리눅스는 모든것을 파일처럼 다루기 때문에 디바이스도 파일처럼 다룬다. </p>
<ul>
<li>블록 디바이스 (Block Device) : 저장 매체 등은 블록 단위로 데이터를 읽거나 써야 효율적이다. I/O 송수신 속도가 높다.</li>
<li>캐릭터 디바이스 (Charcter Device) : 캐릭터 디바이스는 굳이 블록단위로 데이터를 보내지 않아도 되는 경우로 byte 단위로 데이터를 전송하고 키보드나 마우스 같은 경우가 있다. I/O 송수신 속도가 낮음. </li>
</ul>
<p>b 로 시작하면 블록 디바이스 이다. </p>
<p>c 로 시작하면 캐릭터 디바이스 이다. </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210813-%EC%8B%9C%EC%8A%A4%ED%85%9C%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20%ED%95%B5%EC%8B%AC%EA%B8%B0%EC%88%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210813-%EC%8B%9C%EC%8A%A4%ED%85%9C%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20%ED%95%B5%EC%8B%AC%EA%B8%B0%EC%88%A0/" class="post-title-link" itemprop="url">시스템 프로그래밍 핵심기술</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="시스템-프로그래밍-핵심-기술"><a href="#시스템-프로그래밍-핵심-기술" class="headerlink" title="시스템 프로그래밍 핵심 기술"></a>시스템 프로그래밍 핵심 기술</h1><h2 id="시스템-콜과-API"><a href="#시스템-콜과-API" class="headerlink" title="시스템 콜과 API"></a>시스템 콜과 API</h2><h3 id="시스템-프로그래밍의-기반-요소"><a href="#시스템-프로그래밍의-기반-요소" class="headerlink" title="시스템 프로그래밍의 기반 요소"></a>시스템 프로그래밍의 기반 요소</h3><ul>
<li>시스템 콜 </li>
<li>C 라이브러리 </li>
<li>C 컴파일러<br>사용자 영역에서 시스템 프로그래밍을 해본다. </li>
</ul>
<h3 id="시스템-콜"><a href="#시스템-콜" class="headerlink" title="시스템 콜"></a>시스템 콜</h3><p>커널 영역으로 들어가는 함수. </p>
<p>리눅스 유닉스도 C 언어로 만들어져 있으며, 시스템 콜도 C 언어로 구현한다. </p>
<h3 id="시스템-콜은-어떻게-구현"><a href="#시스템-콜은-어떻게-구현" class="headerlink" title="시스템 콜은 어떻게 구현?"></a>시스템 콜은 어떻게 구현?</h3><p>eax 에 시스템 콜 번호를 넘겨 준다.<br>ebx 에는 시스템 콜 인자를 넘겨준다.<br>INT 로 인터럽트를 실행해서 0x80 에 해당아하는 함수를 실행 시키는데 IDT(Interrupt Descriptor Table) 에서 0x80은 리눅스에서 시스템 콜에 해당한다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov eax, 1</span><br><span class="line">mov ebx, 0</span><br><span class="line">int 0x80</span><br></pre></td></tr></table></figure>
<p>이때 커널 모드로 바뀌어서 실행되고, 실행이 완료 된 다음에는 다시 사용자 모드로 바뀐다. </p>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>응용 프로그램과 불리된 하위 호환 인터페이스. 예) 시스템 콜 래퍼, 입출력 라이브러리 등등.. </p>
<h2 id="ABI와-표준"><a href="#ABI와-표준" class="headerlink" title="ABI와 표준"></a>ABI와 표준</h2><h3 id="C-라이브러리"><a href="#C-라이브러리" class="headerlink" title="C 라이브러리"></a>C 라이브러리</h3><p>유닉스 - libc</p>
<p>리눅스 - glibc</p>
<p>이 안에 시스템 콜, 시스템 콜 래퍼, 기본 응용 프로그램 기능이 포함 된다. </p>
<h3 id="C-컴파일러"><a href="#C-컴파일러" class="headerlink" title="C 컴파일러"></a>C 컴파일러</h3><p>유닉스 - cc</p>
<p>리눅스 - gcc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gcc</span><br><span class="line">gcc --version</span><br><span class="line">gcc -o test.c test // 실행 파일이 생성 </span><br></pre></td></tr></table></figure>
<p>만약 -o 안쓰면 a.out으로 실행파일 생성됨.</p>
<h3 id="ABI"><a href="#ABI" class="headerlink" title="ABI"></a>ABI</h3><p>Application Binary Interface</p>
<ul>
<li>함수 실행 방식, 레지스터 활요으, 시스템 콜 실행, 라이브러리 링크 방식등을 제공 한다. </li>
<li>ABI가 호환되면 재 컴파일없이 동작한다. </li>
<li>컴파일러, 링커(라이브러리 링크), 툴체인(컴파일러를 만드는 프로그램) 에서 제공한다. </li>
</ul>
<p>각각의 업체에서 이것을 정의해서 표준화 할 필요가 있었다. </p>
<h3 id="POSIX"><a href="#POSIX" class="headerlink" title="POSIX"></a>POSIX</h3><p>유닉스 시스템 프로그래밍 인터페이스 표준이다.<br>IEEE에서 표준화를 계속해서 시도하고 있고, 리차드 스톨만이 POSIX를 표준안 이름으로 제안했다. </p>
<h3 id="C-언어-표준"><a href="#C-언어-표준" class="headerlink" title="C 언어 표준"></a>C 언어 표준</h3><p>다양한 C 언어의 변종이 존재한다. 그래서 ANSI에서 ANSI C 표준을 정립했고 리눅스에서는 POSIX 와 ANSI C 를 지원한다. </p>
<h3 id="시스템-프로그래밍과-버전"><a href="#시스템-프로그래밍과-버전" class="headerlink" title="시스템 프로그래밍과 버전"></a>시스템 프로그래밍과 버전</h3><p>하위 시스템 레벨은 거의 변하지 않고 유지되고 있음. 하위 레벨까지 잘 알고 있으면 상위 레벨에서 동작하는 프로그램을 만들지라도 성능 향상에 도움을 줌. </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210817-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EA%B4%80%EB%A6%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210817-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EA%B4%80%EB%A6%AC/" class="post-title-link" itemprop="url">프로세스 관리</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="프로세스-관리"><a href="#프로세스-관리" class="headerlink" title="프로세스 관리"></a>프로세스 관리</h1><h2 id="프로세스-ID"><a href="#프로세스-ID" class="headerlink" title="프로세스 ID"></a>프로세스 ID</h2><p>각각의 프로세스는 proess id 라고 하는 PID 를 갖는다. </p>
<ul>
<li>pid : 해당 시점에 unique한 pid</li>
<li>최대 값은 2의 15승인 32768( 부호형 16비트 정수값)</li>
<li>ppid : 부모 프로세스의 pid 값</li>
</ul>
<p><code>ps -ef</code>를 통해 pid, ppid 및 프로세스스 정보 확인</p>
<p><code>vi /etc/passwd</code>를 프로세스와 소유자를 관리함. </p>
<p>예시</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>
<ul>
<li>사용자명 : root</li>
<li>패스워드 : x (없음)</li>
<li>사용자 ID : 0</li>
<li>그룹 ID : 0</li>
<li>사용자 정보 : root</li>
<li>홈 디렉토리 : /root</li>
<li>쉘 환경 : /bin/bash</li>
</ul>
<h2 id="pid-및-ppid-확인"><a href="#pid-및-ppid-확인" class="headerlink" title="pid 및 ppid 확인"></a>pid 및 ppid 확인</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;pid=%d\n&quot;</span>, getpid());</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;ppid=%d\n&quot;</span>, getppid());</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ gcc test.c -o test</span><br><span class="line">$ ./test</span><br><span class="line"></span><br><span class="line">pid=22440</span><br><span class="line">ppid=22164</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210817-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EC%83%9D%EC%84%B1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210817-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EC%83%9D%EC%84%B1/" class="post-title-link" itemprop="url">프로세스 생성</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="프로세스-생성"><a href="#프로세스-생성" class="headerlink" title="프로세스 생성"></a>프로세스 생성</h1><p>기본 프로세스는 text, data, bss, heap, stack의 공간을 생성 한 후 프로세스 이미지를 해당 공간에 업로드하고 실행을 시작한다.</p>
<h2 id="fork-와-exec-시스템콜"><a href="#fork-와-exec-시스템콜" class="headerlink" title="fork() 와 exec() 시스템콜"></a>fork() 와 exec() 시스템콜</h2><ul>
<li>fork() : 새로운 프로세스 공간을 별도로 만들고, fork() 시스템 콜을 호출한 프로세스 (부모 프로세스) 공간을 모두 복사<ul>
<li>별도의 프로세스 공간을 만들고, 부모 프로세스 공간의 데이터를 그대로 복사( 부모 프로세스는 그대로 살아 있음.)</li>
</ul>
</li>
<li>exec() : 호출한 현재 프로세스 공간의 text, data, bss 영역을 새로운 프로세스의 이미지로 덮어씌움<ul>
<li>별도의 프로세스 공간을 만들지 않음. (덮어 씌워 지는 거라 부모 프로세스 없음.)</li>
</ul>
</li>
</ul>
<h2 id="fork"><a href="#fork" class="headerlink" title="fork"></a>fork</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">pid_t</span> pid;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Before fork() call\n&quot;</span>);</span><br><span class="line">        pid = fork();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (pid == <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;this is Child process. PID is %d\n&quot;</span>, pid);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;this is Parent process. PID is %d\n&quot;</span>, pid);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;fork() is failed\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>fork()가 실행되면 부모 프로세스와 동일한 자식 프로세를 별도의 메모리 공간에 생성한다. 자식 프로세스에 pid 값은 0으로 리턴된다. 이때 동일한 pc 값을 가지기 때문에 이후에 코드가 실행되고 위에서 예시에선 pid &gt; 0 일때 코드 가 출력되고 다음으로 pid == 0 일때 코드가 출력된다.</p>
<h2 id="exec"><a href="#exec" class="headerlink" title="exec()"></a>exec()</h2><p>인자로 덮어씌워질 프로세스 정보를 넘겨준다. exec는 여러가지 함수 패밀리들이 있다. pc 다음부터는 코드가 덮어씌워지기 때문에 제대로 동작했으면 exec를 후출한 다음줄 부터는 실행이 안될 것이다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;execute ls\n&quot;</span>);</span><br><span class="line">        execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-l&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">        perror(<span class="string">&quot;execl is failed\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>execl</code>은 첫번재 인수로 디렉토리 이름이 명시된 명령어를 받고 다음부터 명령어 플래그등을 인수로 받는다. 갯수는 상관 없이 받을 수 있지만 마지막 인수는 NULL 로 끝나야 한다.<br>실행 시키면 perror 부분에 코드는 실행되지 않고 덮어씌워진 ls 명령이 실행된다.</p>
<p><code>execlp</code> 디폴트 환경변수 패스 값을 사용하기 때문에 명령어만 넘겨주면 된다. <code>execlp(&quot;ls&quot;, &quot;ls&quot;, &quot;-l&quot;, NULL)</code></p>
<p><code>execle()</code> 환경변수를 지정하고 넘겨준다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> *envp[] = &#123;<span class="string">&quot;user=dave&quot;</span>, <span class="string">&quot;PATH=/bin&quot;</span>, (<span class="keyword">char</span> *)<span class="number">0</span>&#125;;</span><br><span class="line">execle(<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-al&quot;</span>, <span class="literal">NULL</span>, envp);</span><br></pre></td></tr></table></figure>

<p><code>execv</code>는 인자로 변수로 만들어서 넣을 수 있다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> *arg[] = &#123;<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-al&quot;</span>, <span class="literal">NULL</span>&#125;;</span><br><span class="line">execv(<span class="string">&quot;/bin/ls&quot;</span>, arg);</span><br></pre></td></tr></table></figure>

<h2 id="fork와-exec"><a href="#fork와-exec" class="headerlink" title="fork와 exec"></a>fork와 exec</h2><p>fork : 부모 프로세스로부터 새로운 프로세스 공간을 만들고 부모 프로세스 데이터를 복사(fork)</p>
<p>exec : 새로운 프로세스를 위한 바이너리를 새로운 프로세스 공간에 덮어 씌움 (exec)</p>
<h2 id="wait-시스템-콜"><a href="#wait-시스템-콜" class="headerlink" title="wait() 시스템 콜"></a>wait() 시스템 콜</h2><p><code>wait()</code> 함수를 사용하면, <code>fork()</code> 함수 호출시, 자식 프로세스가 종료할 때까지, 부모 프로세스가 기다림. 브모 프로세스가 자식 프로세스보다 먼저 죽는 경우를 막기 위해 사용된다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pid;</span><br><span class="line">        <span class="keyword">int</span> child_pid;</span><br><span class="line">        <span class="keyword">int</span> status;</span><br><span class="line">        pid = fork();</span><br><span class="line">        <span class="keyword">switch</span>(pid) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">-1</span>:</span><br><span class="line">                        perror(<span class="string">&quot;fork is failed\n&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-la&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">                        perror(<span class="string">&quot;execl is failed\n&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                        child_pid = wait(<span class="literal">NULL</span>);</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;ls is complete\n&quot;</span>);</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;Parent PID (%d), Child PID (%d)\n&quot;</span>, getpid(), child_pid);</span><br><span class="line">                        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>execl</code>를 호출하면 부모 프로세스가 덮어씌어 지니까 <code>fork</code>를 통해 자식 프로세스 생성. case 0 인 경우는 자식 프로세스 인 겨으로 여기에 ls 명령어를 덮어씌움.</p>
<p>ls 명령어 출력</p>
<p><code>wait()</code>를 통해서 자식 프로세스가 끝나기를 기다렸다가 부모 프로세스를 실행 시킬 수 있음.</p>
<h2 id="copy-on-write"><a href="#copy-on-write" class="headerlink" title="copy-on-write"></a>copy-on-write</h2><p>리눅스에 프로세스 크기는 4GB에 크기를 가지는데 <code>fork()</code>로 복제할때마다 전체를 복사하려고 하면 오래 걸린다.<br>따라서 자식 프로세스를 생성했다면 우선은 부모 프로세스에 페이지를 같이 굥유하는 방법으로 생성한다.<br>그리고 페이지를 읽는 것이 아니라 써야 할때 페이지를 복사하고 분리하는 방법을 사용한다.</p>
<p>장점</p>
<ul>
<li>프로세스 생성 시간을 줄일 수 있다.</li>
<li>새로 생성된 프로세스에 새롭게 할당되어야 하는 페이지 수도 최소화 된다.</li>
</ul>
<img src="./images/210817-프로세스 생성/1.png" widht="500">

<h2 id="프로세스-종료"><a href="#프로세스-종료" class="headerlink" title="프로세스 종료"></a>프로세스 종료</h2><p>exit() 세스템콜 : 프로세스 종료</p>
<p>c 언어에서 main 함수에서 return 을 호출하는 것과 exit()을 호출하는 것에는 어떤 차이가 있을까?</p>
<p>c 언어 실행 파일은 우선 _start() 함수를 호출하고 그 안에서 main() 함수를 호출함. return 하면 main 함수가 끝나고 다음 exit()함수를 호출함.</p>
<p>만약 main 함수에서 exit() 함수를 호출했다면 바로 프로세스를 종료시키는 것임.</p>
<h2 id="exit-시스템-콜"><a href="#exit-시스템-콜" class="headerlink" title="exit() 시스템 콜"></a>exit() 시스템 콜</h2><p>부모 프로세스는 status &amp; 0377 계산 값으로 자식 프로세스 종료 상태 확인 가능</p>
<p>기본 사용</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span>(EXIT_SUCCESS);</span><br><span class="line"><span class="built_in">exit</span>(EXIT_FAILURE);</span><br></pre></td></tr></table></figure>

<p>주요 동작</p>
<ul>
<li>atexit() 에 등록된 함수 실행</li>
<li>열려 있는 모든 입출력 스트림 버퍼 삭제</li>
<li>프로세스가 오픈한 파일을 모두 닫음</li>
<li>tempfile() 함수를 생성한 임시 파일 삭제</li>
</ul>
<h2 id="atexit-함수"><a href="#atexit-함수" class="headerlink" title="atexit() 함수"></a>atexit() 함수</h2><p>프로세스 종료시 실행될 함수를 등록하기 위해 사용한다. 등록된 함수를 등록된 역순서대로 실행한다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">exithandling</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">goodbymessage</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> ret;</span><br><span class="line"></span><br><span class="line">    ret = atexit(exithandling);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">0</span>) perror(<span class="string">&quot;Error in atexit\n&quot;</span>);</span><br><span class="line">    ret = atexit(goodbymessage);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">0</span>) perror(<span class="string">&quot;Error in atexit\n&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(EXIT_SUCCESS);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exithandling</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;exit handling\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbymessage</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;see you again!\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>역순이기 때문에 goodbymessage 가 먼저 호출 됨.</p>
<h2 id="wait-시스템-콜-1"><a href="#wait-시스템-콜-1" class="headerlink" title="wait() 시스템 콜"></a>wait() 시스템 콜</h2><ul>
<li>wait() 함수를 사용하면 fork()로 생성된 자식 프로세스가 종료될때까지 부모 프로세스가 기다림</li>
<li>자식 프로세스가 완전히 끝나면 좀비 프로세스가 가지고 있던 최소 정보도 삭제하고 부모 프로세스에 SIGCHLD 시그널이 보내짐</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pid;</span><br><span class="line">    <span class="keyword">int</span> child_pid;</span><br><span class="line">    <span class="keyword">int</span> status;</span><br><span class="line">    pid = fork();</span><br><span class="line">    <span class="keyword">switch</span> (pid) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">-1</span>:</span><br><span class="line">            perror(<span class="string">&quot;fork is failed\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-al&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">            perror(<span class="string">&quot;execl is failed\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            child_pid = wait(&amp;status);</span><br><span class="line">            <span class="keyword">if</span> (WIFEXITED(status)) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Child process is normally terminated\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>wait의 리턴값은 종료된 자식 프로세스의 pid 값임.</p>
<p><code>status</code> 정보를 통해 기본적인 자식 프로세스 관련 정보를 확인할 수 있음</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">WIFEXITED</span><span class="params">(status)</span></span>;</span><br></pre></td></tr></table></figure>

<p>자식 프로세스가 정상 종료 시 리턴값은 0 이 아닌 값이 됨.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210819-IPC%EA%B8%B0%EB%B2%95%20%EC%A0%95%EB%A6%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210819-IPC%EA%B8%B0%EB%B2%95%20%EC%A0%95%EB%A6%AC/" class="post-title-link" itemprop="url">IPC기법 정리</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="IPC-기법관련-시스템콜-사용법-이해"><a href="#IPC-기법관련-시스템콜-사용법-이해" class="headerlink" title="IPC 기법관련 시스템콜 사용법 이해"></a>IPC 기법관련 시스템콜 사용법 이해</h1><h2 id="파이프"><a href="#파이프" class="headerlink" title="파이프"></a>파이프</h2><p>파이프를 통한 부모 -&gt; 자식 간 단방향 통신</p>
<h3 id="예제"><a href="#예제" class="headerlink" title="예제"></a>예제</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MSGSIZE 255</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span>* msg = <span class="string">&quot;Hello Child Process!&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">255</span>];</span><br><span class="line">    <span class="keyword">int</span> fd[<span class="number">2</span>], pid, nbytes;</span><br><span class="line">    <span class="keyword">if</span> (pipe(fd) &lt; <span class="number">0</span>) <span class="comment">// pipe(fd) 로 파이프 생성</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    pid = fork(); <span class="comment">// 이 함수 실행 다음 코드부터 부모/ 자식 프로세스로 나뉘어짐</span></span><br><span class="line">    <span class="keyword">if</span> (pid &gt;<span class="number">0</span>) &#123; <span class="comment">// 부모 프로세스에는 자식 프로세스 pid 값이 들어감</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;parent PID:%d, child PID%d\n&quot;</span>, getpid(), pid);</span><br><span class="line">        write(fd[<span class="number">1</span>], msg, MSGSIZE); <span class="comment">// fd[1] 에 씁니다.</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="comment">// 자식 프로세스에는 pid 값이 0이 됨.</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child PID: %d\n&quot;</span>, getpid());</span><br><span class="line">        nbytes = read(fd[<span class="number">0</span>], buf, MSGSIZE); <span class="comment">// fd[0] 으로 읽음</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %s\n&quot;</span>, nbytes, buf);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="메시지-큐-message-queue"><a href="#메시지-큐-message-queue" class="headerlink" title="메시지 큐(message queue)"></a>메시지 큐(message queue)</h2><p>FIFO 정책을 데이터 전송.</p>
<p>전송하는 코드</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/msg.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">msgbuf</span> &#123;</span></span><br><span class="line">    <span class="keyword">long</span> type;</span><br><span class="line">    <span class="keyword">char</span> text[<span class="number">50</span>];</span><br><span class="line">&#125; MsgBuf;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> msgid, len;</span><br><span class="line">    MsgBuf msg;</span><br><span class="line">    <span class="keyword">key_t</span> key = <span class="number">1234</span>;</span><br><span class="line">    msgid = msgget(key, IPC_CREAT|<span class="number">0644</span>);</span><br><span class="line">    <span class="keyword">if</span>(msgid == <span class="number">-1</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;msgget&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    msg.type = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">strcpy</span>(msg.text, <span class="string">&quot;Hello Message Queue\n&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(msgsnd(msgid, (<span class="keyword">void</span> *)&amp;msg, <span class="number">50</span>, IPC_NOWAIT) == <span class="number">-1</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;msgsnd&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>동일한 <code>key</code>를 사용해야 함.</li>
<li><code>msgget</code> 으로 msgid 를 얻음.</li>
<li><code>msgsnd</code> 으로 큐에 메세지 전송</li>
</ul>
<p>받는 코드</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/msg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">msgbuf</span> &#123;</span></span><br><span class="line">    <span class="keyword">long</span> type;</span><br><span class="line">    <span class="keyword">char</span> text[<span class="number">50</span>];</span><br><span class="line">&#125; MsgBuf;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    MsgBuf msg;</span><br><span class="line">    <span class="keyword">int</span> msgid, len;</span><br><span class="line">    <span class="keyword">key_t</span> key = <span class="number">1234</span>;</span><br><span class="line">    <span class="keyword">if</span>((msgid = msgget(key, IPC_CREAT|<span class="number">0644</span>))&lt;<span class="number">0</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;msgget&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    len = msgrcv(msgid, &amp;msg, <span class="number">50</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Received Message is [%d] %s\n&quot;</span>, len, msg.text);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>동일한 key 사용</li>
<li>msgid 를 얻음</li>
<li><code>msgrcv</code>를 통해 메세지큐에 데이터 받음.</li>
</ul>
<h2 id="공유-메모리-shared-memory"><a href="#공유-메모리-shared-memory" class="headerlink" title="공유 메모리(shared memory)"></a>공유 메모리(shared memory)</h2><p>커널 공간에 메모리 공간을 만들고, 해당 공간을 변수처럼 쓰는 방식. mesage queue 처럼 FIFO 방식이 아니라, 해당 메모리 주소를 마치 변수처럼 접근하는 방식이다. 공유 메모리 key를 가지고 여러 프로세스가 접근 가능하다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ipc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> shmid, pid;</span><br><span class="line">    <span class="keyword">char</span> *shmaddr_parent, *shmaddr_child;</span><br><span class="line">    shmid = shmget((<span class="keyword">key_t</span>)<span class="number">1234</span>, <span class="number">10</span>, IPC_CREAT|<span class="number">0644</span>);</span><br><span class="line">    <span class="keyword">if</span>(shmid == <span class="number">-1</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;shmget error\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    pid = fork();</span><br><span class="line">    <span class="keyword">if</span> (pid &gt;<span class="number">0</span>) &#123;</span><br><span class="line">        wait(<span class="number">0</span>);</span><br><span class="line">        shmaddr_parent = (<span class="keyword">char</span> *)shmat(shmid, (<span class="keyword">char</span> *)<span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, shmaddr_parent);</span><br><span class="line">        shmdt((<span class="keyword">char</span> *)shmaddr_parent);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        shmaddr_child = (<span class="keyword">char</span> *)shmat(shmid, (<span class="keyword">char</span> *)<span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">strcpy</span>((<span class="keyword">char</span> *)shmaddr_child, <span class="string">&quot;Hello Parent!&quot;</span>);</span><br><span class="line">        shmdt((<span class="keyword">char</span> *)shmaddr_child); <span class="comment">// 해당 프로세스에서 메모리에 올라간 변수 삭제</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    shmctl(shmid, IPC_RMID, (struct shmid_ds *)<span class="literal">NULL</span>); <span class="comment">// 공유 메모리에서 삭제</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/12/system-programing/210820-%EC%89%98%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/12/system-programing/210820-%EC%89%98%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/" class="post-title-link" itemprop="url">쉘 스크립트</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-12 23:46:02" itemprop="dateCreated datePublished" datetime="2021-09-12T23:46:02+09:00">2021-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="쉘로-시작하는-시스템-프로그래밍-기본"><a href="#쉘로-시작하는-시스템-프로그래밍-기본" class="headerlink" title="쉘로 시작하는 시스템 프로그래밍 기본"></a>쉘로 시작하는 시스템 프로그래밍 기본</h1><h2 id="쉘-스크립트"><a href="#쉘-스크립트" class="headerlink" title="쉘 스크립트"></a>쉘 스크립트</h2><p>쉘을 사용한 프로그래밍 작업으로서 서버 작업 자동화 및 운영(DevOps)를 위해서 기본적으로 익혀둘 필요가 있다.</p>
<p>로그가 많이 쌓여서 서버가 죽을 경우 스크립트를 생성해서 로그를 주기적으로 삭제 하도록 하는 등의 작업을 들 수 있다.</p>
<h2 id="기본-문법"><a href="#기본-문법" class="headerlink" title="기본 문법"></a>기본 문법</h2><p><code>#!/bin/bash</code>로 시작해야 하고 실행 권한을 가지고 있어야 한다. 파일 이름은 일반적으로 <code>파일이름.sh</code>와 같은 형태로작성한다.</p>
<h3 id="실습"><a href="#실습" class="headerlink" title="실습"></a>실습</h3><p>echo 함수를 이용하여 화면에 <code>Hello bash!&quot;</code>를 출력 할 수 있도록 스크립트 작성</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;Hello bash&quot;</span><br></pre></td></tr></table></figure>

<p>실행 권한이 있어야 한다. <code>chmod +x test.sh</code></p>
<p>실행은 <code>test.sh</code>가 있는 폴더로 들어간 후 <code>./test.sh</code> 입력.</p>
<h2 id="주석"><a href="#주석" class="headerlink" title="주석"></a>주석</h2><p><code>#</code>으로 시작하면 주석이다.</p>
<h2 id="변수"><a href="#변수" class="headerlink" title="변수"></a>변수</h2><p>선언</p>
<ul>
<li><code>변수명=데이터</code>로 사용한다. 띄어씌기는 허용되지 않는다.</li>
</ul>
<p>사용</p>
<ul>
<li><code>$변수명</code> 으로 사용된다.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">mysql_id=&#x27;root&#x27;</span><br><span class="line">mysql_directory=&#x27;/etc/mysql&#x27;</span><br><span class="line"></span><br><span class="line">echo $mysql_id</span><br><span class="line">echo $mysql_directory</span><br></pre></td></tr></table></figure>

<h3 id="실습-1"><a href="#실습-1" class="headerlink" title="실습"></a>실습</h3><p>아이디 관련 정보 변수만들기 (실제 이름, 나이, 직업)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">name=&#x27;koo&#x27;</span><br><span class="line">age=27</span><br><span class="line">job=&#x27;no job&#x27;</span><br><span class="line"></span><br><span class="line">echo $name $age $job</span><br></pre></td></tr></table></figure>

<h2 id="리스트"><a href="#리스트" class="headerlink" title="리스트"></a>리스트</h2><p>선언</p>
<ul>
<li>변수명=(데이터1 데이터2 데이터3 …)</li>
</ul>
<p>사용</p>
<ul>
<li><code>$&#123;변수명[인덱스번호]&#125;</code> 로 사용한다.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">daemons=(&quot;httpd&quot; &quot;mysqld&quot; &quot;vsftpd&quot;)</span><br><span class="line">echo $&#123;daemons[1]&#125;</span><br><span class="line">echo $&#123;daemons[@]&#125;    # $daemons 배열의 모든 데이터 출력</span><br><span class="line">echo $&#123;daemons[*]&#125;    # $daemons 배열의 모든 데이터 출력</span><br><span class="line">echo $&#123;#daemons[@]&#125;   # daemons 배열 크기 출력</span><br><span class="line"></span><br><span class="line">filelist=( $(ls) )    # 해당 쉘스크립트 실행 디렉토리의 파일 리스트를 배열로 $filelist 변수에 받음.</span><br><span class="line">echo $&#123;filelist[*]&#125;</span><br></pre></td></tr></table></figure>

<h3 id="실습-2"><a href="#실습-2" class="headerlink" title="실습"></a>실습</h3><p>아이디 관련 정보 리스트 변수로 만들고, 각 정보 출력하기</p>
<h2 id="사전에-정의된-지역-변수"><a href="#사전에-정의된-지역-변수" class="headerlink" title="사전에 정의된 지역 변수"></a>사전에 정의된 지역 변수</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$$ : 쉘의 프로세스 번호</span><br><span class="line">$0 : 쉘스크립트 이름</span><br><span class="line">$1 ~ $9 : 명령줄 인수</span><br><span class="line">$* : 모든 명령줄 인수리스트</span><br><span class="line">$# : 인수의 개수</span><br><span class="line">$? : 최근 실행한 명령어의 종료 값</span><br><span class="line">	- 0 (성공), 1~125 (에러)</span><br><span class="line">	- 126(파일이 실행가능하지 않음),</span><br><span class="line">	- 128~255 (시그널 발생)</span><br></pre></td></tr></table></figure>

<h3 id="실습-3"><a href="#실습-3" class="headerlink" title="실습"></a>실습</h3><p>쉘 프로세스 번호, 쉘 스크립트 이름, 명령줄 인수, 모든 명령줄 인수리스트, 인수 개수 출력해보기</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo $$ $0 $1 $* $#</span><br></pre></td></tr></table></figure>

<h2 id="연산자"><a href="#연산자" class="headerlink" title="연산자"></a>연산자</h2><p><code>expr</code>: 숫자 계산</p>
<p><code>expr</code>를 사용하는 경우 백틱을 사용해야 함. 연산자 *와 괄호 앞에는 역슬래시를 넣어야 한. 연산자와 숫자, 변수 사이에는 space를 넣어야 함.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">num=`expr \( 10 + 20 \) / 8 - 8`</span><br><span class="line">echo $num</span><br></pre></td></tr></table></figure>

<h2 id="조건문-문법"><a href="#조건문-문법" class="headerlink" title="조건문 문법"></a>조건문 문법</h2><p>기본 if 구문</p>
<ul>
<li>명령문을 꼭 탭으로 띄워야 하는 것은 아님(then과 if 안에만 들어가 있으면 됨.)</li>
</ul>
<p>두 인자값을 받아서 두 인자값이 다르면 <code>differnt values</code> 출력</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ $1 != $2 ]</span><br><span class="line">then</span><br><span class="line">    echo &#x27;different values&#x27;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>조건 문에 띄어쓰기를 주의한다.</p>
<p>조건 작성이 다른 프로그래밍 언어와 달리 가동성이 현저히 떨어짐, 필요할때마다 찾아보길..</p>
<h2 id="파일-검사"><a href="#파일-검사" class="headerlink" title="파일 검사"></a>파일 검사</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-e 파일명 # 파일이 존재하면 참</span><br><span class="line">-d 파일명 # 파일이 디렉토리면 참</span><br><span class="line">-h 파일명 # 심볼릭 링크파일</span><br><span class="line">-f 파일명 # 파일이 일반파일이면 참</span><br><span class="line">-r 파일명 # 파일 읽기 가능이면 참</span><br><span class="line">-s 파일명 # 0 파일 크기가 0이 아니면 참</span><br><span class="line">-u 파일명 # 파일이 set-user-id가 설정되면 참</span><br><span class="line">-w 파일명 # 파일 쓰기 가능 상태이면 참</span><br><span class="line">-x 파일명 # 파일이 실행 가능 상태이면 참</span><br></pre></td></tr></table></figure>

<h3 id="해당-파일이-있는지-없는지-출력하는-쉘-스크립트-작성해-보기"><a href="#해당-파일이-있는지-없는지-출력하는-쉘-스크립트-작성해-보기" class="headerlink" title="해당 파일이 있는지 없는지 출력하는 쉘 스크립트 작성해 보기"></a>해당 파일이 있는지 없는지 출력하는 쉘 스크립트 작성해 보기</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ -e $1 ]</span><br><span class="line">then</span><br><span class="line">    echo &quot;file exist&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ $1 == $2 ]</span><br><span class="line">then</span><br><span class="line">    echo &#x27;same values&#x27;</span><br><span class="line">else</span><br><span class="line">    echo &#x27;different values&#x27;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="쉘-크립트-해석하기"><a href="#쉘-크립트-해석하기" class="headerlink" title="쉘 크립트 해석하기"></a>쉘 크립트 해석하기</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">ping -c 1 192.168.0.1 1&gt; /dev/null</span><br><span class="line">if [ $? == 0 ]</span><br><span class="line">then</span><br><span class="line">    echo &quot;게이트웨이 핑 성공!&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;게이트웨이 핑 실패!&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><code>ping -c 1 192.168.0.1 1&gt; /dev/null</code> 응답 확인 요청 <code>-c 1</code>를 통해 1번만 요청, <code>1&gt; /dev/null</code>를 통해 응답 결과 표준 출력을 버림,</p>
<h2 id="반복문"><a href="#반복문" class="headerlink" title="반복문"></a>반복문</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for database in $(ls)</span><br><span class="line">do</span><br><span class="line">    echo $database</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>for 문을 while로 바꿔서 사용도 가능. (일반적인 프로그래밍 언어처럼 사용 가능.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JayoonKoo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
