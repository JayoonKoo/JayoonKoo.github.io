<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"jayoonkoo.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="티끌모아 태산">
<meta property="og:url" content="https://jayoonkoo.github.io/page/8/index.html">
<meta property="og:site_name" content="티끌모아 태산">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="JayoonKoo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jayoonkoo.github.io/page/8/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/8/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>티끌모아 태산</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">티끌모아 태산</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">작은 조각 모음</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">13</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">11</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">129</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">JayoonKoo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">129</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/JayoonKoo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JayoonKoo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:rnwkdbs12@gmail.com" title="E-Mail → mailto:rnwkdbs12@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/JayoonKoo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210831-%EC%BB%A4%EB%A7%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210831-%EC%BB%A4%EB%A7%81/" class="post-title-link" itemprop="url">커링</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="커링"><a href="#커링" class="headerlink" title="커링"></a>커링</h1><p>커링은 <code>f(a, b, c)</code> 처럼 단일 호출로 처리하는 함수를 <code>f(a)(b)(c)</code> 와 같이 각각의 인수가 호출 가능한 프로세스로 호출된 후 병합되도록 변환하는 것이다.</p>
<p>사용예시 :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> f(a, b);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// usage</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> curriedSum = curry(sum);</span><br><span class="line"></span><br><span class="line">alert(curriedSum(<span class="number">1</span>)(<span class="number">2</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>lodash 라이브러리의 _.curry 같이 래퍼를 반환할 대 함수가 보통 때처럼 또는 partial 적으로 호출하는 것을 허용하는 더 진복적으로 구현된 커링도 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> carriedSum = _.curry(sum); <span class="comment">// lodash 라이브러리의 _.carry 사용</span></span><br><span class="line"></span><br><span class="line">alert(carriedSum(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3, 보통 때처럼</span></span><br><span class="line">alert(carriedSum(<span class="number">1</span>)(<span class="number">2</span>)); <span class="comment">// 3, partially 호출되었음</span></span><br></pre></td></tr></table></figure>

<h2 id="커링은-어디에-써야할까요"><a href="#커링은-어디에-써야할까요" class="headerlink" title="커링은 어디에 써야할까요?"></a>커링은 어디에 써야할까요?</h2><p>예시: 로그함수</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">date, importance, message</span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">`[<span class="subst">$&#123;date.getHours()&#125;</span>:<span class="subst">$&#123;date.getMinutes()&#125;</span>] [<span class="subst">$&#123;importance&#125;</span>] <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>커링을 적용</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log = _.curry(log);</span><br></pre></td></tr></table></figure>

<p>둘다 정상 작동</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">log(<span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="string">&quot;DEBUG&quot;</span>, <span class="string">&quot;some debug&quot;</span>);</span><br><span class="line">log(<span class="keyword">new</span> <span class="built_in">Date</span>())(<span class="string">&quot;DEBUG&quot;</span>)(<span class="string">&quot;some debug&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>아래처럼 현재 시간으로 로그를 출력하는데 편리하도록 log 함수를 사용할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// logNow 는 log 첫 번째 인수가 고정된 partial이 될것이다.</span></span><br><span class="line"><span class="keyword">let</span> logNow = log(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line"></span><br><span class="line">logNow(<span class="string">&quot;INFO&quot;</span>, <span class="string">&quot;mesage&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>디버깅 로그를 편리하게 하는 함수를 만들 수 도 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> debugNow = logNow(<span class="string">&quot;DEBUG&quot;</span>);</span><br><span class="line"></span><br><span class="line">debugNow(<span class="string">&quot;message&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="고급-커리-구현"><a href="#고급-커리-구현" class="headerlink" title="고급 커리 구현"></a>고급 커리 구현</h2><p>다중 인수를 호용하는 고급 커리를 구현하는 방법.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">curried</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (args.length &gt;= func.length) &#123;</span><br><span class="line">      <span class="keyword">return</span> func.apply(<span class="built_in">this</span>, args);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> curried.apply(<span class="built_in">this</span>, args.concat(args2));</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// usage</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> curriedSum = curry(sum);</span><br><span class="line"></span><br><span class="line">alert(curriedSum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">alert(curriedSum(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">alert(curriedSum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>));</span><br></pre></td></tr></table></figure>

<p><code>sum.length = 3</code> 이다. 만약 <code>curriedSum(1)(2)(3)</code>을 호출하면 다음과 같이 실행된다.</p>
<ol>
<li>curriedSum(1) 이 실행될때 인수의 개수가 3보다 작으므로 else를 타서 실행된다.</li>
<li>curriedSum(1)(2) 가 실핼될때 arg.concat을 통해 인수를 모아주었으므로 curriedSum(1, 2) 와 같고 이것도 인수의 갯수가 3보다 작으니 else를 타고 curried가 반환된다.</li>
<li>curriedSum(1)(2)(3) 이 호출되면 인수를 다 모으고 curriedSum(1, 2, 3) 이 호출되는 것과 같다.</li>
</ol>
<blockquote>
<p>커리은 고정된 길이의 함수들만 사용 가능하다. <code>f(...args)</code> 같이 나머지 매개변수를 사용하는 함수는 이러한 방법으로 커리할 수 없다.</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210901-%EC%B0%B8%EC%A1%B0%ED%83%80%EC%9E%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210901-%EC%B0%B8%EC%A1%B0%ED%83%80%EC%9E%85/" class="post-title-link" itemprop="url">참조타입</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="참조-타입"><a href="#참조-타입" class="headerlink" title="참조 타입"></a>참조 타입</h1><p>복잡한 상황에서 메서드를 호출하면 <code>this</code> 값을 잃어버리는 경우가 생긴다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>,</span><br><span class="line">	<span class="function"><span class="title">hi</span>(<span class="params"></span>)</span> &#123;alert(<span class="built_in">this</span>.name)&#125;,</span><br><span class="line">	<span class="function"><span class="title">bye</span>(<span class="params"></span>)</span> &#123; alert(<span class="string">&#x27;Bye&#x27;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">user.hi();; <span class="comment">//John</span></span><br><span class="line"></span><br><span class="line">(user.name == <span class="string">&#x27;John&#x27;</span> ? user.hi : user.bye)() <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure>

<p>에러는 메서드를 호출할 때 <code>this</code>에 <code>undefined</code> 가 할당되었기 때문에 발생했다.</p>
<p>왜 이런 현상이 일어날까?</p>
<p><code>(user.hi)()</code>는 정상 작동한다. 이는 <code>(expression)()</code> 형태에서는 참조 값이 아닌 함수 값 자체가 전달되기 때문이다.</p>
<h2 id="참조-타입-자세히-알아보기"><a href="#참조-타입-자세히-알아보기" class="headerlink" title="참조 타입 자세히 알아보기"></a>참조 타입 자세히 알아보기</h2><p><code>obj.method()</code> 엔 연사이 두개 있다.</p>
<ol>
<li><code>.</code> 은 객체 프로퍼티 <code>obj.method</code>에 접근한다.</li>
<li>괄호 <code>()</code>는 점근한 프로퍼티를 실행한다.</li>
</ol>
<p>첫번째 연산에서 얻은 <code>this</code>가 어떻게 두번째 연산으로 전달 될까?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  <span class="attr">nsme</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">hi</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.name);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 메서드 접근과 호출을 별도의 줄에서</span></span><br><span class="line"><span class="keyword">let</span> hi = user.hi;</span><br><span class="line">hi(); <span class="comment">// this 가 undefined이기 때문에 에러가 발생한다.</span></span><br></pre></td></tr></table></figure>

<p>자바스크립트에서 <code>user.hi()</code>를 의도한대로 동작 시키기 위해서 <code>.</code>은 함수를 반환 시키는 것이 아니라 참조 타입을 반환하게 된다.<br>참조 타입에 속하는 값은 <code>(base, name, strict)</code> 이 조합된 형태이다.</p>
<ul>
<li>base: 객체</li>
<li>name: 프로퍼티 이름</li>
<li>strict: 엄격 모드에서 true</li>
</ul>
<p><code>user.hi()</code>로 프로퍼티에 접근하면 함수가 아닌, 참조형(참조 타입) 값을 반환한다. 엄격 모드에선 아래와 같이 반환된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 참조형 값</span></span><br><span class="line">user, <span class="string">&quot;hi&quot;</span>, <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<p>참조형 값에 <code>()</code>를 붙여 호출하면 객체, 객체의 메서드와 연관된 모든 정보를 얻는다. 이 정보를 기반으로 <code>this(=user)</code> 가 결정된다.</p>
<p>참조 타입은 <code>.</code> 연산에서 알아낸 정보를 괄호 <code>()</code>로 전달해 주는 중개인 역할을 한다.</p>
<p><code>()</code>없이 <code>user.hi</code>를 호출하면 점연산이 아닌 연산이 된다(할당 연산). 이때는 참조 값이 아니라 함수 만 받아서 전달하기 때문에 <code>this</code>정보가 사라진다. <code>obj.method()</code>같이 점을 사용하거나, <code>obj[method]()</code> 같이 대괄호를 사용해 함수를 호출했을 때만 <code>this</code> 값이 의도한대로 전달된다. <code>func.bind()</code> 등을 이용하면 해결 하는 방법도 있긴 한다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210902-bigint/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210902-bigint/" class="post-title-link" itemprop="url">bigint</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="BigInt"><a href="#BigInt" class="headerlink" title="BigInt"></a>BigInt</h1><p><code>BigInt</code> 길이의 제약 없이 정수르 사용할 수 있게 한다.<br>리터럴로 정수 끝에 n 을 붙이거나 <code>BigInt()</code>를 사용하면 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bigint = <span class="number">1234567890123456789012345678901234567890n</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sameBigint = <span class="built_in">BigInt</span>(<span class="string">&quot;1234567890123456789012345678901234567890&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bigintFromNumber = <span class="built_in">BigInt</span>(<span class="number">10</span>); <span class="comment">// 10n과 동일합니다.</span></span><br></pre></td></tr></table></figure>

<h2 id="수학-연산자"><a href="#수학-연산자" class="headerlink" title="수학 연산자"></a>수학 연산자</h2><p>일반 숫자와 큰 차이 없이 사용할 수 있다.</p>
<p><code>BigInt</code> 형 값을 대상으로 한 연산은 <code>BigInt</code> 형 값을 반환한다. <code>BigInt</code> 형 값과 일반 숫자를 섞어서 사용할 순 없다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="number">1n</span> + <span class="number">2</span>); <span class="comment">// Error: Cannot mix BigInt and other types</span></span><br></pre></td></tr></table></figure>

<p><code>BigInt()</code> 와 <code>Number()</code>를 명시해 줌으로서 같이 사용할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="number">1n</span> + <span class="built_in">BigInt</span>(<span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<p>bigint를 정수형으로 바꾸기 위해서 <code>+</code>를 사용할 수 없다. 명시적으로 <code>Number()</code>를 사용해 주어야 하고, bigint 값이 너무 큰 경우는 비트는 자동으로 자렬 나간다.</p>
<h2 id="비교-연산자"><a href="#비교-연산자" class="headerlink" title="비교 연산자"></a>비교 연산자</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="number">2n</span> &gt; <span class="number">1n</span>); <span class="comment">// true</span></span><br><span class="line">alert(<span class="number">2n</span> &gt; <span class="number">1</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>비교 연산은 서로간에 가능한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="number">1</span> == <span class="number">1n</span>); <span class="comment">// true</span></span><br><span class="line">alert(<span class="number">1</span> === <span class="number">1n</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>같은 수라도 타입이 다르기 때문에 <code>===</code>를 사욯아면 false를 반환한다.</p>
<h2 id="논리-연산"><a href="#논리-연산" class="headerlink" title="논리 연산"></a>논리 연산</h2><p>if 안에서 0n 은 falsy 이고 다른 값은 truthy로 평가된다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210906-fetch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210906-fetch/" class="post-title-link" itemprop="url">fetch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h1><p>AJAX - 서버에서 추가 정보를 비동기적으로 가져올 수 있게 해주는 포괄적인 기술을 의미함. (새로 고침 없이)</p>
<p>AJAX 이외에도 서버에 네트워크 요청을 보내고 정보를 받아올 수 있는 다양한 방법이 존재하는데 그 중 하나인 <code>fetch</code>에 대해서 알아본다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = fetch(url, [options]);</span><br></pre></td></tr></table></figure>

<ul>
<li>url : 접근하고자 하는 url</li>
<li>options : 선택 매개변수, method나 header 등을 지정할 수 있다.</li>
</ul>
<p><code>options</code>에 아무것도 넘기지 않으면 <code>GET</code>으로 동작한다.</p>
<p>서버에서 응답 헤더를 받자마자 <code>fetch</code> 호출 시 반환받은 <code>promise</code>가 내장 클래스 <code>Response</code>의 인스턴스와 함께 이행 상태가 된다. 아직 본문이 도착하기 전이지만, 개발자는 응답 헤더를 보고 요청이 성공적으로 처리되었는지 아닌지를 확인할 수 있다.</p>
<p>HTTP 응답 상태는 프로퍼티를 사용해 확인할 수 있다.</p>
<ul>
<li>status - HTTP 상태 코드 값 (ex. 200)</li>
<li>ok - 불린 값, HTTP 상태 코드가 200 과 299 사이일 경우 <code>ture</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> response = awiat fetch(url);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (response.ok) &#123;</span><br><span class="line">	<span class="keyword">let</span> json = <span class="keyword">await</span> reponse.json();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	alert(<span class="string">&quot;HTTP-Error: &quot;</span> + response.status);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>response</code>에는 프라미스를 기반으로 하는 다양한 메서드가 있다. 이 메서드를 사용하면 다양한 형태의 응답 본문을 처리할 수 있다.</p>
<ul>
<li><code>response.text()</code> - 응답을 읽고 텍스트로 반환해 줌.</li>
<li><code>response.json()</code> - 응답을 읽고 JSON으로 파싱해 줌</li>
<li><code>response.formData()</code> - 응답을 <code>FormData</code> 객체 형태로 반환함.</li>
<li><code>response.blob()</code> - 응답을 <code>Blob</code>(타입이 있는 바이너리 데이터) 형태로 반환 함.</li>
<li><code>response.arrayBuffer()</code> - 응답을 <code>ArrayBuffer</code>(바이너리 데이터를 로우 레벨 형식으로 표현한 것)</li>
<li>이 외에도 <code>respose.body</code>가 있는데 청크 단위로 읽을 수 있게 해준다.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url =</span><br><span class="line">  <span class="string">&quot;https://api.github.com/repos/javascript-tutorial/ko.javascript.info/commits&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> commits = <span class="keyword">await</span> response.json(); <span class="comment">// 응답 본문을 읽고 JSON 형태로 파싱함</span></span><br><span class="line"></span><br><span class="line">alert(commits[<span class="number">0</span>].author.login);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>본문을 읽을 때 사용되는 메서드는 딱 하나만 사용할 수 있다. <code>response.text()</code> 를 사용해 응답을 얻었다면 본문의 콘텐츠는 모두 처리된 상태이기 때문에 <code>response.json()</code>은 동작하지 않는다.</p>
</blockquote>
<h2 id="응답-헤더"><a href="#응답-헤더" class="headerlink" title="응답 헤더"></a>응답 헤더</h2><p>응답 헤더는 <code>response.headers</code>에 맵과 유사한 형태로 저장된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> fetch(</span><br><span class="line">  <span class="string">&quot;https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits&quot;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 헤더 일부를 추출</span></span><br><span class="line">alert(response.headers.get(<span class="string">&quot;Content-Type&quot;</span>)); <span class="comment">// application/json; charset=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 헤더 전체를 순회</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> response.headers) &#123;</span><br><span class="line">  alert(<span class="string">`<span class="subst">$&#123;key&#125;</span> = <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="요청-헤더"><a href="#요청-헤더" class="headerlink" title="요청 헤더"></a>요청 헤더</h2><p><code>headers</code> 옵션을 사용하면 <code>fetch</code>에 요청 헤더를 ㅅ걸정할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> response = fetch(protectedUrl, &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="attr">Authentication</span>: <span class="string">&quot;secret&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="POST-요청"><a href="#POST-요청" class="headerlink" title="POST 요청"></a>POST 요청</h2><p><code>GET</code> 요청 이외의 요청을 보내려면 추가 옵션을 설정해야 한다.</p>
<ul>
<li>method - ex.POST</li>
<li>body - 요청 본문, 다음 중 하나여야 한다.<ul>
<li>문자열(ex. JSON 문자열)</li>
<li><code>FormData</code> 객체 - <code>form/multipart</code></li>
<li><code>Blob</code>이나 <code>BufferSource</code> - 바이너리 데이터 전송을 위해 사용됨</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">  <span class="attr">surname</span>: <span class="string">&quot;Smish&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&quot;/article/fetch/post/user&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json;charset-utf-8&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(user),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="keyword">await</span> reponse.json();</span><br></pre></td></tr></table></figure>

<p>본문이 문자열일 때는 <code>Content-Type - text/plain;charset-UTF-8</code> 이 기본으로 설정됨. 하지만 위에 예시에서는 JSON 이기 때문에 따로 설정을 해주었다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210907-formData/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210907-formData/" class="post-title-link" itemprop="url">formData</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="FormData"><a href="#FormData" class="headerlink" title="FormData"></a>FormData</h1><p>HTML에 formData를 나타내는 생성자는 다음과 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> formData = <span class="keyword">new</span> FormData([form]);</span><br></pre></td></tr></table></figure>

<p>이렇게 생성해서 서버에서 보내는 작업을 하면 서버에서 볼 때 일반적인 양식 제출처럼 보인다.</p>
<h2 id="Sending-a-simple-form"><a href="#Sending-a-simple-form" class="headerlink" title="Sending a simple form"></a>Sending a simple form</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;formElem&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;John&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;surname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Smith&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  formElem.onsubmit = <span class="keyword">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">    e.preventDefault();</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&quot;/article/formdata/post/user&quot;</span>, &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">body</span>: <span class="keyword">new</span> FormData(formElem),</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> result = <span class="keyword">await</span> response.json();</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    alert(result.message);</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>서버 코드는 여기에 없다. 서버는 위에 코드에서 보낸 request를 받아서 응답한다.</p>
<h2 id="FormData-Methods"><a href="#FormData-Methods" class="headerlink" title="FormData Methods"></a>FormData Methods</h2><ul>
<li><code>formData.append(name, value)</code> - form data에 name과 value를 추가</li>
<li><code>formData.append(name, blob, fileName)</code> - <code>&lt;input type=&quot;file&quot;&gt;</code> 인 것처럼 추가, 세번째 매개변수인 <code>fileName</code>인 진짜 파일 이름을 넣어줌.</li>
<li><code>formData.delete(name)</code> - <code>name</code>이란 이름으로 추가된 필드를 제거함</li>
<li><code>formData.get(name)</code> - <code>name</code>이란 이름으로 추가된 필드에 <code>value</code> 값을 얻음.</li>
<li><code>formData.had(name)</code> - <code>name</code>이란 이름으로 추가된 필드가 있다면 ,<code>true</code> 반환 아닐 경우 <code>false</code> 반환</li>
</ul>
<p>formData는 기술적으로 같은 name에 필드를 추가할 수 있다. 따라서 append를 사용한다. 비슷한 역할을 하는 <code>.set</code> 메서드도 있다. 이 경우 기존에 있던것을 삭제 하고 추가한다.</p>
<ul>
<li><code>formData.set(name, value)</code></li>
<li><code>formData.set(name, blob, fileName)</code></li>
</ul>
<p>또한 <code>for..of</code> 를 사용해서 요소를 반복할 수 있다.</p>
<h2 id="Sending-a-form-with-a-file"><a href="#Sending-a-form-with-a-file" class="headerlink" title="Sending a form with a file"></a>Sending a form with a file</h2><p>form은 <code>Content-Type: multipart/form-data</code>로 보내지고 이것은 파일도 보낼 수 있다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;formElem&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;firstName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;John&quot;</span> /&gt;</span></span><br><span class="line">  Picture: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;picture&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  formElem.onsubmit = <span class="keyword">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">    e.preventDefault();</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&quot;/article/formdata/post/user-avatar&quot;</span>, &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">body</span>: <span class="keyword">new</span> FormData(formElem),</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> result = <span class="keyword">await</span> response.json();</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    alert(result.message);</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Sending-a-form-with-Blob-data"><a href="#Sending-a-form-with-Blob-data" class="headerlink" title="Sending a form with Blob data"></a>Sending a form with Blob data</h2><p>동적으로 생성된 바이너리 데이타 이미지 같은 것을 <code>Blob</code>으로 보낼 수 있다. <code>fetch</code>에 <code>body</code> 파라미터로 넒길 수 있다.<br>그러나 실제로는 이미지를 별도로 보내는 것이 아니라 name 을 추가한 form 으로 보내는 것이 편리한 경우가 많다.</p>
<p>서버도 form으로 받는게 더 어울린다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">&quot;margin:0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;canvasElem&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;80&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border:1px solid&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;submit()&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    canvasElem.onmousemove = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> ctx = canvasElem.getContext(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="javascript">      ctx.lineTo(e.clientX, e.clientY);</span></span><br><span class="line"><span class="javascript">      ctx.stroke();</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">submit</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> imageBlob = <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span></span></span><br><span class="line"><span class="javascript">        canvasElem.toBlob(resolve, <span class="string">&quot;image/png&quot;</span>)</span></span><br><span class="line"><span class="javascript">      );</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();</span></span><br><span class="line"><span class="javascript">      formData.append(<span class="string">&quot;firstName&quot;</span>, <span class="string">&quot;John&quot;</span>);</span></span><br><span class="line"><span class="javascript">      formData.append(<span class="string">&quot;image&quot;</span>, imageBlob, <span class="string">&quot;image.png&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&quot;/article/formdata/post/image-form&quot;</span>, &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">body</span>: formData,</span></span><br><span class="line"><span class="javascript">      &#125;);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> result = <span class="keyword">await</span> response.json();</span></span><br><span class="line"><span class="javascript">      alert(result.message);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>이미지 blob 데이터를 어떻게 추가했는지 보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">formData.append(<span class="string">&quot;image&quot;</span>, imageBlob, <span class="string">&quot;image.png&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>이는 <code>&lt;input type=&quot;file&quot; name=&quot;image&quot;&gt;</code>와 같다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210908-fetch-Download-progress/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210908-fetch-Download-progress/" class="post-title-link" itemprop="url">fetch-Download-progress</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Fetch-download-progress"><a href="#Fetch-download-progress" class="headerlink" title="Fetch: download progress"></a>Fetch: download progress</h1><p>fetch 를 사용하면 다운로드 과정을 추적할 수 있다. 현재는 업로드를 추적할 수는 없어서 업로드를 추적하려면 <code>WMLHttpRequest</code> 를 사용해야 함.</p>
<p><code>response.body</code> 속성을 사용해서 접근할 수 있다. <code>ReadableStream</code>이라는 청크 단위로 제공하는 특수 객체를 이요한다.</p>
<p><code>reponse.text()</code>나 <code>response.json()</code> 와는 다르게 <code>reponse.body</code> 는 전체 과정에을 카운트 할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// instead of reponse.json() and other methods</span></span><br><span class="line"><span class="keyword">const</span> reader = reponse.body.getReader();</span><br><span class="line"></span><br><span class="line"><span class="comment">// infinite loop while the body is downloading</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// done is true for the last chunk</span></span><br><span class="line">  <span class="comment">// value is Uint8Array of the chunk bytes</span></span><br><span class="line">  <span class="keyword">const</span> &#123; done, value &#125; = <span class="keyword">await</span> reader.read();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (done) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>await reader.read()</code>에 결과는 다음 두가지 프로퍼티를 가진 결과이다.</p>
<ul>
<li>done : 읽기가 모두 완료 됬으면 <code>true</code>, 아니면 <code>false</code></li>
<li>value : <code>Uint8Array</code> 타입인 <code>Array</code></li>
</ul>
<blockquote>
<p>ReadableStream 은 <code>for awiat ..of</code>도 지원한다, 하지만 아직까지 모든 브라우저에서 지원하는 것이 아니기 때문에 여기서는 while를 사용했다.</p>
</blockquote>
<p>진행사항을 로깅하는 전체 예제는 다음과 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// step 1 : start the fecth and obtain a reader</span></span><br><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> fetch(</span><br><span class="line">  <span class="string">&quot;https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits?per_page=100&quot;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reader = response.body.getReader();</span><br><span class="line"></span><br><span class="line"><span class="comment">// step 2 : get total length</span></span><br><span class="line"><span class="keyword">const</span> contentLength = +response.headers.get(<span class="string">&quot;Content-Length&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// step 3 : read the data</span></span><br><span class="line"><span class="keyword">let</span> recivedLength = <span class="number">0</span>; <span class="comment">// received that many bytes at the momnet</span></span><br><span class="line"><span class="keyword">let</span> chunks = []; <span class="comment">// array of received binary chunks (comprises the body)</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; done, value &#125; = <span class="keyword">await</span> reader.read();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (done) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  chunks.push(value);</span><br><span class="line">  receivedLength += value.length;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;receivedLength&#125;</span> of <span class="subst">$&#123;contentLength&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// step 4: concatenate chunks into single Uint8Array</span></span><br><span class="line"><span class="keyword">let</span> chunksAll = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(receivedLength);</span><br><span class="line"><span class="keyword">let</span> position = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> chunk <span class="keyword">of</span> chunks) &#123;</span><br><span class="line">  chunksAll.set(chunk, position);</span><br><span class="line">  position += chunk.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// step 5: decode into a string</span></span><br><span class="line"><span class="keyword">let</span> result = <span class="keyword">new</span> TextDecoder(<span class="string">&quot;utf-8&quot;</span>).decode(chunksAll);</span><br><span class="line"></span><br><span class="line"><span class="comment">// We&#x27;re done!</span></span><br><span class="line"><span class="keyword">let</span> commits = <span class="built_in">JSON</span>.parse(result);</span><br><span class="line">alert(commits[<span class="number">0</span>].author.login);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>“Received 79656 of 0”<br>“Received 437910 of 0”</p>
</blockquote>
<ul>
<li><code>response.json()</code>을 통해 데이터를 읽지 않았다.</li>
<li><code>Content-Length</code> 헤더를 통해서 <code>response</code>에 길이를 알 수 있다.</li>
<li><code>chunks</code> 배열에 <code>chunk</code>를 모은다. <code>response</code>는 한번 읽으면 다시 읽을 수 없기 때문이다.</li>
<li><code>chunksAll</code>에 하나의 결과로 모은다. 아쉽게도 다른 메서드가 없기 때문에 반복문을 사용햇 가각의 chunk를 .set을 통해 복사한다. 하지만 아직도 바이트 어레이이다.</li>
<li>byte를 string으로 해석할 필요가 있다. <code>TextDecoder</code>은 원하는 딱 이런 작업을 해줌.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210909-fetch-abort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210909-fetch-abort/" class="post-title-link" itemprop="url">fetch-abort</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Fetch-Abort"><a href="#Fetch-Abort" class="headerlink" title="Fetch: Abort"></a>Fetch: Abort</h1><p>fetch 는 promise를 반환하고 자바스크립트에서는 fetch를 중단하는 개념이 없다. 이런 목적을 위해 내장된 객체인 <code>AbortController</code>가 있다.<br>이것은 fetch 뿐만 아니라 비동기 작업에서도 사용될 수 있다.</p>
<h2 id="The-AbortController-object"><a href="#The-AbortController-object" class="headerlink" title="The AbortController object"></a>The AbortController object</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br></pre></td></tr></table></figure>

<p>반환하는 객체는 간단하다.</p>
<ul>
<li><code>abort()</code> 메서드를 갖는다.</li>
<li>이벤트 등록을 위한 <code>signal</code> 프로퍼티를 갖는다.</li>
</ul>
<p><code>abort()</code>가 호출되었을 때</p>
<ul>
<li><code>controller.signal</code> 은 <code>abort</code> 이벤트를 내보낸다.</li>
<li><code>controller.signal.aborted</code> 프로퍼티가 <code>true</code>가 된다.</li>
</ul>
<p>취소 가능한 작업을 <code>controller.signal</code>에 리스너로 등록한다. <code>controller.abort()</code>를 호출할때 리스너가 트리거 된다.</p>
<p>fetch를 포함하지 않은 예제는 다음과 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"><span class="keyword">let</span> signal = controller.signal;</span><br><span class="line"></span><br><span class="line"><span class="comment">// teh party that performs a cancelable operation</span></span><br><span class="line"><span class="comment">// gets &quot;signal&quot; object</span></span><br><span class="line"><span class="comment">// and sets the listener to trigger when controller.abort() is called</span></span><br><span class="line">signal.addEventListener(<span class="string">&quot;abort&quot;</span>, <span class="function">() =&gt;</span> alert(<span class="string">&quot;abort!!&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// the other party, that cancels (at any point later)</span></span><br><span class="line">controller.abort(); <span class="comment">// abort!!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//the event triggers and signal.aborted becomes true</span></span><br><span class="line">alert(signal.aborted); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>코드에서 AbortController 없이 비슷한 작업을 할 수 있지만 fecth 가 AbortController 객체와 함께 작동하고 통합된다는것이 중요하다.</p>
<h2 id="Using-with-fetch"><a href="#Using-with-fetch" class="headerlink" title="Using with fetch"></a>Using with fetch</h2><p><code>AbortController</code>에 <code>signal</code>프로퍼티를 <code>fetch</code>에 옵션으로 전달해 주면 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line">fetch(url, &#123;</span><br><span class="line">  <span class="attr">signal</span>: controller.signal,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>fetch가 중단되면 <code>AbortError</code>를 던진다. <code>try..catch</code>를 통해서 에러를 잡을 수 있다.</p>
<p>전체 예제</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// abort in 1 second</span></span><br><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbofrtController();</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> controller.abort(), <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&quot;/article/fetch-abort/demo/hang&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">signal</span>: controller.signal,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.name == <span class="string">&quot;AbortError&quot;</span>) &#123;</span><br><span class="line">    alert(<span class="string">&quot;Aborted!&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="AbortController-is-scalable"><a href="#AbortController-is-scalable" class="headerlink" title="AbortController is scalable"></a>AbortController is scalable</h2><p><code>AbortController</code>은 확장가능햇 한번에 여러 fetch를 중단시킬 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> urls = [...];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"></span><br><span class="line"><span class="comment">// an array of fetch promises</span></span><br><span class="line"><span class="keyword">let</span> fetchJobs = urls.map(<span class="function"><span class="params">url</span> =&gt;</span> fetch(url, &#123;</span><br><span class="line">	<span class="attr">signal</span>: controller.signal</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> results = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(fetchJobs);</span><br><span class="line"></span><br><span class="line"><span class="comment">// if controller.abort() is called from elsewhere, it aborts all fetches</span></span><br></pre></td></tr></table></figure>

<p>다른 비동기 작업도 <code>fetch</code>와 함께 하나의 <code>AbortController</code>로 멈출 수 있다.</p>
<p>우린 단지 <code>abort</code> 이벤트를 들으면 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> urls = [...];</span><br><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ourJob = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>  &#123;</span><br><span class="line">	<span class="comment">// our task</span></span><br><span class="line">	controller.signal.addEventListener(<span class="string">&#x27;abort&#x27;</span>, reject);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fetchJobs = urls.map(<span class="function"><span class="params">url</span> =&gt;</span> fetch(url, &#123;</span><br><span class="line">	<span class="attr">signal</span>: controller.signal</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Wait for feches and our tast in parallel</span></span><br><span class="line"><span class="keyword">let</span> results = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([...fetchJobs, ourJob]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// if controller.abort() is called from elsewhere, it aborts all fetches and our Job</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210910-fetch%EC%99%80%20cross-origin%EC%9A%94%EC%B2%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210910-fetch%EC%99%80%20cross-origin%EC%9A%94%EC%B2%AD/" class="post-title-link" itemprop="url">fetch와 cross-origin요청</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="fetch와-Cross-Origin-요청"><a href="#fetch와-Cross-Origin-요청" class="headerlink" title="fetch와 Cross-Origin 요청"></a>fetch와 Cross-Origin 요청</h1><p>도메인이나 서브도메인, 프로토콜, 포트가 다른 곳에 요청을 보내는 것을 Croww-Origin Request(크로스 오리진 요청) 이라고 한다. 크로스 오리진 요청을 보내려면 리모트 오리진에서 전송받은 특별한 헤더가 필요하다. 이러한 정책을 CORS라고 부른다.</p>
<h2 id="왜-CORS-가-필요한가에-대한-짧은-역사"><a href="#왜-CORS-가-필요한가에-대한-짧은-역사" class="headerlink" title="왜 CORS 가 필요한가에 대한 짧은 역사"></a>왜 CORS 가 필요한가에 대한 짧은 역사</h2><p>과거 수 년 동안, 한 사이트의 스크립트에서 다른 사이트에 있는 콘텐츠에 접근할 수 없다는 제약이 있었다. 더 강력한 작업을 위해서 다른 웹사이트로에 요청이 필요했다.</p>
<p>여러가지 트릭이 있었지만, 오랜 논의 끝에 크로스 오리진 요청을 허용 하기로 결정했다. 대신 크로스 오리진 요청은 서버에서 명시적으로 크로스 오리진 요청을 ‘허가’ 했다는 것을 알려주는 특별한 헤더를 전송받았을 때만 가능하도록 제약을 걸었다.</p>
<h2 id="안전한-요청"><a href="#안전한-요청" class="headerlink" title="안전한 요청"></a>안전한 요청</h2><p>안전한 요청은 다음과 같은 두 가지 조건 모두를 충족한다.</p>
<ol>
<li>안전한 메서드 - GET이나 POST, HEAD를 사용한 요청</li>
<li>안전한 헤더 - 다음 목록에 속하는 헤더<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>값이 application/x-www-form-urlencoded나 multipart/form-data, text/plain 인 Content-Type</li>
</ul>
</li>
</ol>
<p>표준이 아닌 헤더가 들어있거나 안전하지 않은 메서드를 사용한 요청은 안전한 요청이 될 수 없다. 그런데 시간이 지나고 개발자가 스크립트를 사용해 안전하지 않은 요청을 보낼 수 있게되자, 브라우저는 안전하지 않은 요청을 서버에 전송하기 전에 preflight 요청을 먼저 전송해 서버가 크로스 오리진 요청을 받을 준비가 되어있는지 확인한다.</p>
<p>이때 서버에서 크로스 오리진 요청은 허용하지 않는다는 정보를 담은 헤더를 브라우저에 응답하면 안전하지 않은 요청은 서버에 전송되지 않는다.</p>
<h2 id="CORS와-안전한-요청"><a href="#CORS와-안전한-요청" class="headerlink" title="CORS와 안전한 요청"></a>CORS와 안전한 요청</h2><p>크로스 오리진 요청을 보낼 경우 브라우저는 항상 <code>Origin</code>이라는 헤더를 요청에 추가해서 자신에 도메인을 적는다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET /request</span><br><span class="line">Host: anywhere.com</span><br><span class="line">Origin: https://javascript.info</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>서버는 <code>Origin</code>을 검사하고 요청을 받아들이기로 동의한 상태라면 특별한 헤더 <code>Access-Control-Allow-Origin</code>을 응답에 추가한다. 여기에 오리진 정보나 * 를 붙히면 응답에 성공하고 그렇지 않으면 실패하게 된다.</p>
<p>이때 브라우저는 중재인의 역할을 수행한다.<br>서버에서 크로스 오리진 요청을 수행한 경우, prefilght 요청에 응답은 다음과 같은 형태를 뛴다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br><span class="line">Content-Type:text/html; charset=UTF-8</span><br><span class="line">Access-Control-Allow-Origin: https://javascript.info</span><br></pre></td></tr></table></figure>

<img src="/images/210910-fetch와 cross-origin요청/1.png" width="500">

<h2 id="응답-헤더"><a href="#응답-헤더" class="headerlink" title="응답 헤더"></a>응답 헤더</h2><p>크로스 오리진 요청이 이루어진 경우, 자바스크립트는 기본적으로 안전한 응답 헤더로 분류되는 헤더에만 접속할 수 있다.</p>
<ul>
<li>Cache-Control</li>
<li>Content-Language</li>
<li>Content-Type</li>
<li>Expires</li>
<li>Last-Modified</li>
<li>Pragma</li>
</ul>
<p>이 외의 응답 헤더에 접근하면 에러가 발생한다.</p>
<blockquote>
<p>위 리스트엔 <code>Contnet-Length</code>헤더는 없다.</p>
</blockquote>
<p>안전하지 않는 응답 헤더에 접근하려면 서버에서 <code>Access-Contorol-Expose-Headers</code>라는 헤더를 보내줘야 한다. 여기에 자바스크립트 접근을 허용하는 안전하지 않은 헤더 목록이 담겨 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">200</span> OK</span><br><span class="line">Content-Type:text/html; charset=UTF-<span class="number">8</span></span><br><span class="line">Content-Length: <span class="number">12345</span></span><br><span class="line">API-Key: 2c9de507f2c54aa1</span><br><span class="line">Access-Control-Allow-Origin: https:<span class="comment">//javascript.info</span></span><br><span class="line">Access-Control-Expose-Headers: Content-Length,API-Key</span><br></pre></td></tr></table></figure>

<h2 id="안전하지-않은-요청"><a href="#안전하지-않은-요청" class="headerlink" title="안전하지 않은 요청"></a>안전하지 않은 요청</h2><p>요츰엔 <code>GET</code>, <code>POST</code> 뿐만 아니라 <code>PATCH</code>, <code>DELETE</code> 등 어떤 메서드도 사용할 수 있다.</p>
<p>과거에는 get 과 post 만 가능한 웹서버만 있었고 요즘도 종종 있다. 혼란스런 상황을 방지하기 위해서 안전하지 않은 요청( 위에서 안전한 요청에 조건을 벗어나는 요청) 을 보낼 때는 바로 요청을 보내지 않고 <code>preflight</code> 요청을 사전에 보낸다.</p>
<p>preflight 요청은 <code>OPTIONS</code> 메서드를 사용하고 두 헤더가 함께 들어가며, 본문은 비어있다.</p>
<ul>
<li><code>Access-Control-Request-Method</code> - 안전하지 않은 요청에 사용하는 메서드 정보</li>
<li><code>Access-Contorl-Request-Header</code> - 안전하지 않은 요청에 사용하는 헤더 목록</li>
</ul>
<p>안전하지 않은 요청을 허용하기로 협의했다면 서버는 본문이 비어있고 상태 코드가 200인 응답을 다음과 같은 헤더와 함께 브라우저로 보낸다.</p>
<ul>
<li><code>Access-Contorl-Allow-Origin</code> - <code>*</code>나 요청을 보낸 오리진</li>
<li><code>Access-Control-Allow-Method</code> - 허용된 메서드 정보</li>
<li><code>Access-Control-Allow-Headers</code> - 허용된 헤더 목록</li>
<li><code>Access-Control-Max-Age</code> - 퍼미션 체크 여부를 몇 초간 캐싱해 놓을지를 명시. 이렇게 캐싱해 놓으면 브라우저는 일정 기간 동안 preflight 요청을 생략하고 안전하지 않은 요청을 보낼수 있다.</li>
</ul>
<img src="/images/210910-fetch와 cross-origin요청/2.png" width="500">

<p>실제 <code>PATCH</code> 메서드를 사욭하는 예시를 통해서 확인해 본다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&quot;https://site.com/service.json&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;PATCH&quot;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">    <span class="string">&quot;API-Key&quot;</span>: <span class="string">&quot;secret&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>위 요청은 안전한 요청에 조건을 벗어나므로 안전하지 않은 요청이다.</p>
<h3 id="1-단계-priflight-요청"><a href="#1-단계-priflight-요청" class="headerlink" title="1 단계 priflight 요청"></a>1 단계 priflight 요청</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS /service.json</span><br><span class="line">Host: site.com</span><br><span class="line">Origin: https://javascript.info</span><br><span class="line">Access-Control-Request-Method: PATCH</span><br><span class="line">Access-Control-Request-Headers: Content-Type,API-Key</span><br></pre></td></tr></table></figure>

<h3 id="2-단계-priflight-응답"><a href="#2-단계-priflight-응답" class="headerlink" title="2 단계 priflight 응답"></a>2 단계 priflight 응답</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br><span class="line">Access-Control-Allow-Origin: https://javascript.info</span><br><span class="line">Access-Control-Allow-Methods: PUT,PATCH,DELETE</span><br><span class="line">Access-Control-Allow-Headers: API-Key,Content-Type,If-Modified-Since,Cache-Control</span><br><span class="line">Access-Control-Max-Age: 86400</span><br></pre></td></tr></table></figure>

<h3 id="3-단계-실제-요청"><a href="#3-단계-실제-요청" class="headerlink" title="3 단계 실제 요청"></a>3 단계 실제 요청</h3><p>이제 부터는 안전한 요청에 대한 프로세스와 동일하다. 본 요청은 크로스 오리진 요청이기 때문에 <code>Origin</code> 헤더가 붙는다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PATCH /service.json</span><br><span class="line">Host: site.com</span><br><span class="line">Content-Type: application/json</span><br><span class="line">API-Key: secret</span><br><span class="line">Origin: https://javascript.info</span><br></pre></td></tr></table></figure>

<h3 id="4단계-실제-응답"><a href="#4단계-실제-응답" class="headerlink" title="4단계 실제 응답"></a>4단계 실제 응답</h3><p>서버에서 본 응답에 <code>Access-Contorl-Allow-Origin</code> 헤더를 반드시 붙여야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: https://javascript.info</span><br></pre></td></tr></table></figure>

<blockquote>
<p>preflight 요청은 자바스크립트를 사용해 관찰 할 수 없다. preflight 요청이 거부된 경우 에러만 확인할 수 있다.</p>
</blockquote>
<h2 id="자격-증명"><a href="#자격-증명" class="headerlink" title="자격 증명"></a>자격 증명</h2><p>크로스 오리진 요청은 기본적으로 자격 증명이 함께 전송되지 않는다. 이렇게 한 이유는 크로스 오리진 요청 시 자격 증명을 함께 전송할 수 있으면 사용자 동의 없이 자바스크립트로 민감한 정보에 접근할 수 있기 때문이다.</p>
<p>그럼에도 불구하고 자걱 증명이 담긴 헤더를 명시적으로 허용하겠다는 세팅을 서버에 해줄 수 있다.</p>
<p><code>fetch</code> 메서드에 자격 정보를 함께 전송하려면 다음과 같이 <code>credentials: &quot;include&quot;</code> 옵션을 추가하면 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;http://another.com&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&quot;include&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>서버에서 자격 증명 정보가 담긴 요청을 받아들이기로 했다면 응답에 <code>Access-Control-Allow-Origin</code> 헤더와 함께 <code>Access-Conrol-Allow-Credentials: true</code> 헤더를 추가해서 보낸다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br><span class="line">Access-Control-Allow-Origin: https://javascript.info</span><br><span class="line">Access-Control-Allow-Credentials: true</span><br></pre></td></tr></table></figure>

<p>이때, <code>Access-Contorl-Allow-Origin</code>에 *를 쓸 수 없다. 정확한 오리진 정보만 명시되어야 서버에서 신뢰할 수 있기 때문이다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/modernJs/210914-URL%20objects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/modernJs/210914-URL%20objects/" class="post-title-link" itemprop="url">URL objects</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-09-20 21:41:14 / Modified: 21:45:41" itemprop="dateCreated datePublished" datetime="2021-09-20T21:41:14+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="URL-objects"><a href="#URL-objects" class="headerlink" title="URL objects"></a>URL objects</h1><p>URL 객체를 사용할 수 있다. 물론 string을 사용해도 충분 하지만 유요한 기능을 제공 하기도 한다.</p>
<h2 id="Creating-a-URL"><a href="#Creating-a-URL" class="headerlink" title="Creating a URL"></a>Creating a URL</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> URL(url, [base]);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>url</code> - full url 이나 베이스가 설정되어 있다면 패스 만</li>
<li><code>base</code> - base가 설정 되어 있으면 base와 관련지어서 생성된다.</li>
</ul>
<p>다음에 두가지 url은 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url1 = <span class="keyword">new</span> URL(<span class="string">&quot;https://javascript.info/profile/admin&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> url2 = <span class="keyword">new</span> URL(<span class="string">&quot;/profile/admin&quot;</span>, <span class="string">&quot;https://javascript.info&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>url 객체를 사용하면 객체에 구성소에 바로 접근할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> URL(<span class="string">&quot;https://javascript.info/url&quot;</span>);</span><br><span class="line"></span><br><span class="line">alert(url.protocol); <span class="comment">// https:</span></span><br><span class="line">alert(url.host); <span class="comment">// javascript.info</span></span><br><span class="line">alert(url.pathname); <span class="comment">// /url</span></span><br></pre></td></tr></table></figure>

<p>url에 구조는 다음과 같다.</p>
<img src="/images/210914-URL objects/1.png" width="500">

<blockquote>
<p>네트워킹 메서드에 문자열 대신에 URL Object를 전달할 수 있다.<br>예를 들면 <code>fetch</code>나 <code>XMLHttpRequest</code>에서</p>
</blockquote>
<h2 id="SearchParams-“-”"><a href="#SearchParams-“-”" class="headerlink" title="SearchParams “?..”"></a>SearchParams “?..”</h2><p>파라미터는 만약 공백이 포함되어 있거나 라틴 글자가 아니면 인코딩이 필요하다.</p>
<p>글새 <code>url.searchParams</code>는 유용한 메서드를 제공한다.</p>
<ul>
<li><code>append(name, value)</code> - name에 해당하는 파라미터를 추가한다.</li>
<li><code>delete(name)</code> - name 에 해당하는 파라미터를 제거한다.</li>
<li><code>get(name)</code> - name 에 해당하는 파라미터를 얻는다.</li>
<li><code>getAll(name)</code> - name 에 해당하는 파라미터를 모두 얻는다.(여러개일 경우)</li>
<li><code>has(name)</code> - name에 해당하는 파리머터가 있는지 체크한다.</li>
<li><code>set(name, value)</code> - set/relace 파리미터</li>
<li><code>sort()</code> - 이름으로 정렬한다, 드물게 필요하다.</li>
</ul>
<p>사용 예시는 다음과 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> URL(<span class="string">&quot;https://google.com/search&quot;</span>);</span><br><span class="line"></span><br><span class="line">url.searchParams.set(<span class="string">&quot;q&quot;</span>, <span class="string">&quot;test me!&quot;</span>); <span class="comment">// added parameter with a space and !</span></span><br><span class="line"></span><br><span class="line">alert(url); <span class="comment">// https://google.com/search?q=test+me%21</span></span><br><span class="line"></span><br><span class="line">url.searchParams.set(<span class="string">&quot;tbs&quot;</span>, <span class="string">&quot;qdr:y&quot;</span>); <span class="comment">// added parameter with a colon :</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// parameters are automatically encoded</span></span><br><span class="line">alert(url); <span class="comment">// https://google.com/search?q=test+me%21&amp;tbs=qdr%3Ay</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// iterate over search parameters (decoded)</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [name, value] <span class="keyword">of</span> url.searchParams) &#123;</span><br><span class="line">  alert(<span class="string">`<span class="subst">$&#123;name&#125;</span>=<span class="subst">$&#123;value&#125;</span>`</span>); <span class="comment">// q=test me!, then tbs=qdr:y</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Encoding"><a href="#Encoding" class="headerlink" title="Encoding"></a>Encoding</h2><p>url에 가능한 글자가 RFC3986에 정의 되어 있다. 제공되지 않는 문자열에 경우 인코딩이 필요하다.</p>
<p>다행인건, URL Object를 사용하면 자동으로 이 작업을 해준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> URL(<span class="string">&quot;https://ru.wikipedia.org/wiki/Тест&quot;</span>);</span><br><span class="line"></span><br><span class="line">url.searchParams.set(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;ъ&quot;</span>);</span><br><span class="line">alert(url); <span class="comment">//https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D1%81%D1%82?key=%D1%8A</span></span><br></pre></td></tr></table></figure>

<h3 id="Encoding-String"><a href="#Encoding-String" class="headerlink" title="Encoding String"></a>Encoding String</h3><p>URL Object가 아니라 문자열을 사용하는 경우 특수 문자를 수동으로 인코딩/ 디코딩 해야 한다.</p>
<p>몇가지 내장된 메소드는 다음과 같다.</p>
<ul>
<li><code>encodeURI</code></li>
<li><code>decodeURI</code></li>
<li><code>encodeURIComponent</code> - 파라미터나 헤쉬 값 같은 것</li>
<li><code>decodeURIComponent</code></li>
</ul>
<p><code>encodeURI</code>와 <code>encodeURIComponent</code>에 차이는 무엇일까?</p>
<p>예시 url</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://site.com:8080/path/page?p1=v1&amp;p2=v2#hash</span><br></pre></td></tr></table></figure>

<p><code>:</code>, <code>?</code>, <code>=</code>, <code>&amp;</code>, <code>#</code>와 같은 문자가 url에서 허용된다. 파라미터로 사용되는 문자열에는 이런 문자열이 포함되어야 하는데 url에 허용되는 문자열이기 때문에 인코딩 되지 않는 문제가 있다.</p>
<p>따라서 이러한 문자는 형식을 깨드리지 않고 인코딩되어야 한다.</p>
<p>전체 URL은 <code>encodeURI</code>를 사용한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// using cyrillic characters in url path</span></span><br><span class="line"><span class="keyword">let</span> url = <span class="built_in">encodeURI</span>(<span class="string">&quot;http://site.com/привет&quot;</span>);</span><br><span class="line"></span><br><span class="line">alert(url); <span class="comment">// http://site.com/%D0%BF%D1%80%D0%B8%D0%B2%D0%B5%D1%82</span></span><br></pre></td></tr></table></figure>

<p>매개변수를 사용하는 경우 <code>encodeURIComponent</code>를 대신해서 사용해야 한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> music = <span class="built_in">encodeURIComponent</span>(<span class="string">&quot;Rock&amp;Roll&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> url = <span class="string">`https://google.com/search?q=<span class="subst">$&#123;music&#125;</span>`</span>;</span><br><span class="line">alert(url); <span class="comment">// https://google.com/search?q=Rock%26Roll</span></span><br></pre></td></tr></table></figure>

<p><code>encodeURI</code>와 비교하면 다음과 같다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> music = <span class="built_in">encodeURI</span>(<span class="string">&quot;Rock&amp;Roll&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> url = <span class="string">`https://google.com/search?q=<span class="subst">$&#123;music&#125;</span>`</span>;</span><br><span class="line">alert(url); <span class="comment">// https://google.com/search?q=Rock&amp;Roll</span></span><br></pre></td></tr></table></figure>

<p>&amp; 은 Rock 그리고 Roll 이라는 파라미터를 의미하고 이는 적절히 인코딩 되어야 한다. 그런데 encdoeURI를 사용하면 &amp;를 허용하기 때문에 인코딩 되지 않는 문제가 있다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/09/20/git/210721-git-basic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/20/git/210721-git-basic/" class="post-title-link" itemprop="url">git-basic</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-20 21:39:38" itemprop="dateCreated datePublished" datetime="2021-09-20T21:39:38+09:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="git-basic"><a href="#git-basic" class="headerlink" title="git basic"></a>git basic</h1><ul>
<li>리눅스에 대해서 간략히 공부했다.</li>
<li>git의 대한 기본적인 설정방법과 사용법을 알아보고 리뷰어와 조를 이루어 풀리퀘스트를 요청화는 과정을 연습해 보았다.</li>
</ul>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>리눅스는 unix 기반에 오픈소스 운영체제로서 수많은 배포 버전이 있다. 헬싱키 대학생이던 리누스 토발즈가 앤디 타넨 비우의 MINX를 개조한 Linux를 배포했다.</p>
<h3 id="Kernel"><a href="#Kernel" class="headerlink" title="Kernel"></a>Kernel</h3><p>커널은 하드웨어와 응용 프로그램을 이어주는 운영체제의 핵심 소프트 웨어이다.</p>
<h3 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h3><p>쉘은 운영체제의 커널과 사용자를 이어주는 소프트웨어로서 사용자가 Kernel를 제어하기 위해 새용한다.</p>
<h2 id="git-object"><a href="#git-object" class="headerlink" title="git object"></a>git object</h2><p>git에는 3가지의 객체가 있다.</p>
<ol>
<li>Blob: 파일 하나의 대한 정보로서 사진으로 비유하자면 사진 파일 자체인 .jpg 파일이 될 수 있다.</li>
<li>Tree: Blob 이나 subtree 의 메타데이터로서 사진으로 비유하자면 찍히 날짜에 대한 정보라던지, 저장된 위치 같은 정보가 될 수 있다.</li>
<li>Commit: 커밋 순간의 스냅샷으로서 버전으로 저장하려고 압축한 파일들과 같다.</li>
</ol>
<h2 id="git-저장소"><a href="#git-저장소" class="headerlink" title="git 저장소"></a>git 저장소</h2><p>git repo 에는 크게 Local 저장소와 remote 저장소가 있다. 흔히 사용하는 github과 같은 서비스가 remote 저장소라고 할 수 있다.</p>
<p>Local 저장소는 크게 3가지 상태로 나눌 수 있다.</p>
<ol>
<li>Working Directory : 지금 작업하고 있는 폴더이다. <code>git init</code>을 통해 git repo를 만들거나 clone 받은 폴더가 될 수 있다.</li>
<li>staging area : <code>git add</code> 를 통해 추가한 파일들에 상태를 말한다. 아직 커밋을 하기 전 상태이며 add를 해야지 git 에서 버전을 추적할 수 있다.</li>
<li>localrepo : <code>git commit</code>을 수행해서 버전이 등록한 파일들에 상태이다. <code>git push</code>를 통해 remote 저장소로 파일을 올리거나 <code>git pull</code>을 통해 받아올 수 있다.</li>
</ol>
<img src="/images/img/git-process.png" width="500">

<h2 id="configure"><a href="#configure" class="headerlink" title="configure"></a>configure</h2><p>깃을 사용하기전 환경 설정으로 해주면 좋을 것들을 알아본다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;당신의유저네임&quot;</span><br><span class="line">$ git config --global user.email &quot;당신의메일주소&quot;</span><br><span class="line">$ git config --global core.editor &quot;vim&quot;</span><br><span class="line">$ git config --global core.pager &quot;cat&quot;</span><br><span class="line">$ git config --global init.defaultBranch &quot;main&quot;</span><br></pre></td></tr></table></figure>

<p>commit 을 입력할 editor을 vim으로 설정하는 설정과 default branch를 main으로 바꾸는 설정이 포함되어 있다. 필수적인 사항은 아니다.</p>
<p>만약 환경변수 설정을 내리고 싶다면 <code>--unset</code> 플래그를 추가하면된다.</p>
<p><code>git config --global --unset core.editor</code></p>
<h2 id="Commit-Convention"><a href="#Commit-Convention" class="headerlink" title="Commit Convention"></a>Commit Convention</h2><p>commit을 한번에 알기쉽게 하기위해서 보편적으로 사용하는 규칙들이 있다.</p>
<ul>
<li>feat: features (기능 개발에 대한 커밋)</li>
<li>docs: documentations (문서 작업에 대한 커밋)</li>
<li>conf: configurations (환경 변수 설정에 대한 커밋 ex)node pakage)</li>
<li>test: test (test 코드에 대한 수정 생성에 대한 커밋)</li>
<li>fix: bug-fix (버그를 고치거나 에러를 고친 커밋)</li>
<li>refactor: refactoring (같은 기능을 하나 보기 좋고 효율적인 코드로 대체했을때)</li>
<li>ci: Continuous Integration</li>
<li>build: Build</li>
<li>perf: Performance</li>
</ul>
<p>이 외에도 제목은 50자 이내로 간결하게 작성하고 내용은 되도록 상세히 작성하도록 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">feat: add back button</span><br><span class="line"></span><br><span class="line">add back button using &lt;buuton&gt; tag</span><br><span class="line"></span><br><span class="line">TODO</span><br><span class="line">- create page</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="작업의-단위"><a href="#작업의-단위" class="headerlink" title="작업의 단위"></a>작업의 단위</h2><p>commit 작업의 단위는 어떻게 될까?</p>
<p>commit 을 하는 단위는 어떤 동작을 기준으로 한다고 보면된다. JS에서 예를 들자면 어떤 함수를 만들고 동작까지 확인했다면 그때를 commit 기점으로 생각하면된다.</p>
<p>작업 최소 단위로 생각하고 세세하게 작성하도록 한다.</p>
<h2 id="staging-area가-있는-이유"><a href="#staging-area가-있는-이유" class="headerlink" title="staging area가 있는 이유?"></a>staging area가 있는 이유?</h2><p>만약 staging area 가 없다면 어떻게 될까?</p>
<p>우리는 모든 파일에 변경에 커밋을 한번에 날려야할 것이다. 만약 문서화 작업에대한 변경과 기능 추가에 대한 변경이 존재한다면 이를 한꺼번에 커밋해야 되는 것이다.</p>
<p>stging area 가 있기 때문에 하나의 파일을 올려두고 staging area 에 있는 파일을 commit 대상으로 삼을 수 있다.</p>
<h2 id="pull-request-실습"><a href="#pull-request-실습" class="headerlink" title="pull request 실습"></a>pull request 실습</h2><p>github repo &gt; Settings &gt; Mnage access &gt; Invate a collaborator 를 통해 코드 리뷰어를 초대한다.</p>
<p>새로운 브렌치를 만들어 기능을 만든다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git branch [new branch name]</span><br><span class="line">$ git checkout [new branch name]</span><br><span class="line">$ git add [수정한 파일]</span><br><span class="line">$ git commit</span><br><span class="line">$ git push -u origin [new branch name]</span><br></pre></td></tr></table></figure>

<p>새로운 브랜치를 로컬에서 생성했다면 remote repo 에는 새로운 브랜치가 없을 것이다. -u 플래그를 통해 새로운 브랜치를 remote repo 에 생성하면서 push 할 수 있다.</p>
<p>github 저장소로 이동하여 pull request를 요청한다.</p>
<p>이제 코드 리뷰어가 코드를 보고 수정할 것을 요청할 것이다. 그럼 다시 로컬 저장소로 돌아와서 파일을 수정하고 push 하는 과정까지 진행하면된다.</p>
<p>코드리뷰어가 확인하고 문제가 없다 판단하면 승인을 해줄 것이다. 그럼 merge 를 클릭하여 remote repo 에 브랜치를 머지하면된다.</p>
<p>로컬 저장소에는 아직 머지 되지 않은 상태 이기 때문에 머지명령어를 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout main</span><br><span class="line">$ git fecth origin main</span><br><span class="line">$ git merge FETCH_HEAD</span><br></pre></td></tr></table></figure>

<p>사실 <code>git pull origin main</code> 을 통해서도 동일한 과정을 진행할 수 있다. 내부적으로 보자면 git pull을 통한 머지가 위에 코드블럭에서 설명한 것을 똑같이 수행한다.</p>
<p>차이점은 fetch를 통해 이시적으로 받아올 수 있기 때문에 변경사항을 확인하면서 머지할 수 있다는 것이다. 복잡한 코드를 머지해야 할때나 다시한번 확인이 필요할 경우가 있을 수 있으니 fetch를 사용하도록 하자.</p>
<h2 id="다음에-배울-것"><a href="#다음에-배울-것" class="headerlink" title="다음에 배울 것"></a>다음에 배울 것</h2><p>branch 를 더 배울 예정이다.</p>
<p>풀 리퀘스트하는 과정을 더 연습해서 익숙해 지도록 해야 겠다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JayoonKoo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
