<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"jayoonkoo.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="티끌모아 태산">
<meta property="og:url" content="https://jayoonkoo.github.io/page/2/index.html">
<meta property="og:site_name" content="티끌모아 태산">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="JayoonKoo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jayoonkoo.github.io/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>티끌모아 태산</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">티끌모아 태산</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">작은 조각 모음</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">16</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">12</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">141</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">JayoonKoo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">141</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/JayoonKoo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JayoonKoo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:rnwkdbs12@gmail.com" title="E-Mail → mailto:rnwkdbs12@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/JayoonKoo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2022/01/11/IOS/220111-%EB%BD%80%EB%AA%A8%EB%8F%84%EB%A1%9C%ED%83%80%EC%9D%B4%EB%B2%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/11/IOS/220111-%EB%BD%80%EB%AA%A8%EB%8F%84%EB%A1%9C%ED%83%80%EC%9D%B4%EB%B2%84/" class="post-title-link" itemprop="url">DispatchSourceTimer, UIView Animation (뽀모도로 타이머)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-11 11:24:52" itemprop="dateCreated datePublished" datetime="2022-01-11T11:24:52+09:00">2022-01-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-12 13:05:32" itemprop="dateModified" datetime="2022-01-12T13:05:32+09:00">2022-01-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/IOS/" itemprop="url" rel="index"><span itemprop="name">IOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="뽀모도로-타이머-만들기"><a href="#뽀모도로-타이머-만들기" class="headerlink" title="뽀모도로 타이머 만들기"></a>뽀모도로 타이머 만들기</h1><h3 id="활용-기술"><a href="#활용-기술" class="headerlink" title="활용 기술"></a>활용 기술</h3><ul>
<li>DispatchSourceTimer</li>
<li>UIView Animation</li>
</ul>
<h3 id="DispatchSourceTimer"><a href="#DispatchSourceTimer" class="headerlink" title="DispatchSourceTimer"></a>DispatchSourceTimer</h3><p>GCD : Grand Central Dispatch → 작업을 병렬적으로 진행하기 위해 제공하는 API이다. </p>
<p>DispathcSourceTimer는 GCD API 안에 존재한다. </p>
<p>uI 관련된 스레드는 main 쓰레드 에서 시작된다. GCD에서 main 쓰레드는 오직 1개만 가진다. 유저가 인터페이스에 접근하면 main 쓰레드에서 알수 있다. </p>
<p>timer를 선언하고 schedule과 eventHandler 를 정한다.</p>
<h3 id="UIVewAnimation"><a href="#UIVewAnimation" class="headerlink" title="UIVewAnimation"></a>UIVewAnimation</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UIView</span>.animate(withDuration: <span class="number">0.5</span>, delay: <span class="number">0</span>, animations: &#123;</span><br><span class="line">          <span class="keyword">self</span>.imagView.transform <span class="operator">=</span> <span class="type">CGAffineTransform</span>(rotationAngle: .pi)</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>

<p>UIView 에서 동작할 에니메이션을 설정할 수 있다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2022/01/10/IOS/220110-%EC%9D%BC%EA%B8%B0%EC%9E%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/10/IOS/220110-%EC%9D%BC%EA%B8%B0%EC%9E%A5/" class="post-title-link" itemprop="url">UITabBarController, UICollectionView, NotificationCenter (일기장)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-10 12:19:00" itemprop="dateCreated datePublished" datetime="2022-01-10T12:19:00+09:00">2022-01-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-12 13:05:34" itemprop="dateModified" datetime="2022-01-12T13:05:34+09:00">2022-01-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/IOS/" itemprop="url" rel="index"><span itemprop="name">IOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="일기장-앱"><a href="#일기장-앱" class="headerlink" title="일기장 앱"></a>일기장 앱</h1><ul>
<li>UITabBarController</li>
<li>UICollectionView</li>
<li>NotificationCenter</li>
</ul>
<h3 id="UITabBarController"><a href="#UITabBarController" class="headerlink" title="UITabBarController"></a>UITabBarController</h3><p>UITabBar : 앱에서 서로 다른 하우작업, 뷰, 모드 사이의 선택을 할 수 있도록, 탭바에 하나 혹은 하나 이상의 버튼을 보여주는 컨트롤</p>
<p>UITabBarContoller : 다중 선택 인터페이스를 관리하는 컨테이너 뷰 컨트롤러로, 선택에 따라 어떤 자식 뷰 컨트롤러를 보여줄 것인지가 결정 → UIViewController 를 상속 받아서 커스텀 뷰를 보여줄 수 있다.</p>
<h3 id="UICollectionView"><a href="#UICollectionView" class="headerlink" title="UICollectionView"></a>UICollectionView</h3><p>데이터 항목의 정렬된 컬렉션을 관리하고 커스텀한 레이아웃을 사용해 표시하는 객체</p>
<ul>
<li>Cell : 컬렉션 뷰의 콘텐츠를 표시</li>
<li>Supplementary View : 섹션에 대한 정보를 표시</li>
<li>Decoration View : 컬렉션 뷰에 대한 배경을 꾸밀 때 사용</li>
</ul>
<p>UICollectionVIewLayout(배치), UICollectionVIewFlowLayout(플로우에 관한것)</p>
<p>UICollectionViewDataSource : 컬렉션 뷰로 보여지는 콘텐츠들을 관리하는 객체 </p>
<p>UICollectionViewDelegate : 콘텐츠의 표현, 사용자와의 상호작용과 관련된 것들을 관리하는 객체</p>
<h3 id="NotificatonCenter"><a href="#NotificatonCenter" class="headerlink" title="NotificatonCenter"></a>NotificatonCenter</h3><p>데이터를 등록하면 NotificationCenter 를 구독하는 화면에서 데이터를 받아서 사용할 수 있다.</p>
<p>한마디로 이벤트 버스이고 구독하는 화면에서 옵저버를 이용하여 확인한다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2022/01/07/IOS/220107-TodoList/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/07/IOS/220107-TodoList/" class="post-title-link" itemprop="url">UITableView, UIAlertController, UserDefaults (TodoList)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-07 10:09:23" itemprop="dateCreated datePublished" datetime="2022-01-07T10:09:23+09:00">2022-01-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-12 13:05:35" itemprop="dateModified" datetime="2022-01-12T13:05:35+09:00">2022-01-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/IOS/" itemprop="url" rel="index"><span itemprop="name">IOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="TodoList"><a href="#TodoList" class="headerlink" title="TodoList"></a>TodoList</h1><h2 id="활용-기술"><a href="#활용-기술" class="headerlink" title="활용 기술"></a>활용 기술</h2><ul>
<li>UITableView</li>
<li>UIAlertController</li>
<li>UserDefaults</li>
</ul>
<h2 id="UITableView"><a href="#UITableView" class="headerlink" title="UITableView"></a>UITableView</h2><p>데이터를 목록 형태로 보여 줄 수 있는 가장 기본적인 UI 컴포넌트 → UIScrollVIew 를 상속받고 있어서 스크롤 가능하다.</p>
<ul>
<li>여러개의 Cell을 가지고 있고 하나의 열과 여러 줄의 행을 지니고 있으며, 수직으로만 스크롤 가능하다.</li>
<li>센션을 이용해 행을 그룹화하여 콘텐츠를 좀 더 쉽게 탐색할 수 있다.</li>
<li>섹션의 헤더와 푸터에 View를 구성하여 추가적인 정보를 표시할 수 있다.</li>
</ul>
<p>Delegate와 DataSource로 구성된다.</p>
<p>UITableViewDataSource : 테이블 뷰를 생성하고 수정하는데 필요한 정보를 테이블 뷰 객체에 제공, UITabelView 자체에서는 데이터를 관리하지 못한다. </p>
<p>UITableViewDelegate : 테이블 뷰의 시각적인 부분을 설정하고, 행의 액션 관리, 엑세서리 뷰 지원 그리고 테이블 뷰의 개별 행 편집을 도와줌</p>
<h2 id="UIAlertController"><a href="#UIAlertController" class="headerlink" title="UIAlertController"></a>UIAlertController</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">tabBarAddButton</span>(<span class="keyword">_</span> <span class="params">sender</span>: <span class="type">UIBarButtonItem</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> alert <span class="operator">=</span> <span class="type">UIAlertController</span>(title: <span class="string">&quot;할일 등록&quot;</span>, message: <span class="literal">nil</span>, preferredStyle: .alert)</span><br><span class="line">    <span class="keyword">let</span> registerButton <span class="operator">=</span> <span class="type">UIAlertAction</span>(title: <span class="string">&quot;등록&quot;</span>, style: .default, handler: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">_</span> <span class="keyword">in</span></span><br><span class="line">      <span class="keyword">guard</span> <span class="keyword">let</span> title <span class="operator">=</span>  alert.textFields<span class="operator">?</span>[<span class="number">0</span>].text <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">      <span class="keyword">let</span> task <span class="operator">=</span> <span class="type">Task</span>(title: title, done: <span class="literal">false</span>)</span><br><span class="line">      <span class="keyword">self</span><span class="operator">?</span>.tasks.append(task)</span><br><span class="line">      <span class="keyword">self</span><span class="operator">?</span>.tableView.reloadData()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">let</span> cancleButton <span class="operator">=</span> <span class="type">UIAlertAction</span>(title: <span class="string">&quot;취소&quot;</span>, style: .cancel, handler: <span class="literal">nil</span>)</span><br><span class="line">    alert.addAction(cancleButton)</span><br><span class="line">    alert.addAction(registerButton)</span><br><span class="line">    alert.addTextField(configurationHandler: &#123;textField <span class="keyword">in</span></span><br><span class="line">      textField.placeholder <span class="operator">=</span> <span class="string">&quot;할 일을 입력해주세요&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">self</span>.present(alert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><code>UIAlertContoller</code> 로 alert 생성 </p>
<p><code>UIAlertAction</code> 으로 action button 정의</p>
<p><code>alert.addAction</code> 으로 action button 추가하기 ,self 사용할떼 강한 순환참조 막기 위해서 weak 선언하기</p>
<p><code>alert.addTextField</code> 로 alert에 textFiled 추가하가기</p>
<p><code>self.present</code> 로 화면에 띄어주기</p>
<h2 id="UserDefaults"><a href="#UserDefaults" class="headerlink" title="UserDefaults"></a>UserDefaults</h2><p>런타임에 동작하여 기본 저장소에서 정보를 저장하거나 가져오는 기능을 한다. 키 값 형태로 값을 저장하고 싱글톤 패턴으로 구현되어서 앱내의 하나의 인스턴스만 존재한다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2022/01/06/IOS/220105-LEDBoard/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/06/IOS/220105-LEDBoard/" class="post-title-link" itemprop="url">UINavigationController, ViewController Life Cycle (LEDBoard)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-06 14:38:45" itemprop="dateCreated datePublished" datetime="2022-01-06T14:38:45+09:00">2022-01-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-12 13:06:23" itemprop="dateModified" datetime="2022-01-12T13:06:23+09:00">2022-01-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/IOS/" itemprop="url" rel="index"><span itemprop="name">IOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="LED"><a href="#LED" class="headerlink" title="LED"></a>LED</h2><p>배울 기술</p>
<ul>
<li>UINavigationController</li>
<li>화면 전환 개념</li>
<li>ViewController Life Cycle</li>
<li>화면간 데이터 전달 하는 방법</li>
<li>에셋 카탈로그</li>
</ul>
<h3 id="UINavigationController"><a href="#UINavigationController" class="headerlink" title="UINavigationController"></a>UINavigationController</h3><ul>
<li>Content View Conroller : 화면을 구성하는 뷰를 직접 구현하고 관련된 이벤트를 처리하는 뷰 컨트롤러</li>
<li>Container View Controller : 하나 이상의 Child View Conroller를 가지고 있다. 레이아웃하고, 화면 전환을 담당한다.</li>
<li>화면 구성과 이벤트 관리는 child view Controller에서 한다.</li>
<li>대표적으로 Navigation Controller 와 TabBar Controller가 있다.</li>
</ul>
<p>계층 구조로 구성된 content를 순차적으로 보여주는 container view controller</p>
<p>Navigation Stack 을 가짐</p>
<p>Navigation Bar를 가짐. backItem ,topItem prompt, topItem Title, topItem rightBarButtonItem 등을 구성요소로 가진다.</p>
<h3 id="화면-전환-개념"><a href="#화면-전환-개념" class="headerlink" title="화면 전환 개념"></a>화면 전환 개념</h3><p>3가지 정도 사용됨.</p>
<ul>
<li>View Controller 에서 다른 View Controller를 호출하여 전환하기 (프레젠테이션 방법) → 비동기로 동작함 (화면을 덮고, 걷어내는 개념)</li>
<li>Navigation Contoller 를 사용하여 화면 전환하기 ( stack 으로 push, pop 하는 방식)</li>
<li>화면 전환용 객체 세그웨이(Segueway)를 사용하여 화면 전환하기, strory board 이용 화면과 화면 사이에 SegueWay 객체를 둠</li>
</ul>
<h3 id="ViewContoller-Life-Cycle"><a href="#ViewContoller-Life-Cycle" class="headerlink" title="ViewContoller Life Cycle"></a>ViewContoller Life Cycle</h3><ul>
<li>Appearing : 뷰가 화면에 나타나는 중</li>
<li>Appeard: 뷰가 화면에 나타나는게 완료 된 상태</li>
<li>Disappearing: 뷰가 화면에서 사라지는 중</li>
<li>Disappeared: 뷰가 화면에서 사라진 상태</li>
</ul>
<p>관련 메서드 </p>
<p>viewDidLoad()</p>
<ul>
<li>뷰 컨트롤러의 모든 뷰들이 메모리에 로드됐을 때 호출(메모리 처음 로드시 한번만 호출)</li>
<li>보통 딱 한번 호출될 행위들을 이 메소드 안에 정의 함</li>
<li>초기화나, 네트워크 호출등의 작업</li>
</ul>
<p>viewWillAppear()</p>
<ul>
<li>뷰가 뷰 계층에 추가 되고, 화면에 보이기 직전에 매 번 호출</li>
<li>다른 뷰로 이동했다가 다시 오면 다시 호출</li>
<li>뷰와 관련된 추가적인 초기화 작업을 여기서</li>
</ul>
<p>viewDidAppear()</p>
<ul>
<li>뷰가 뷰 계층의 추가된 후 호출</li>
<li>뷰를 나타낼때 필요한 추가 작업을 여기서(애니메이션 시작 작업 등..)</li>
</ul>
<p>viewWillDisappear()</p>
<ul>
<li>뷰 컨트롤러의 뷰가 뷰 계층에서 사라지기 전에 호출</li>
<li>작업한 내용을 되돌리거나, 데이터를 저장하는 작업</li>
</ul>
<p>viewDidDisappear()</p>
<ul>
<li>뷰 컨트롤러의 뷰가 뷰 계층에서 사라진 뒤에 호출</li>
<li>뷰가 사라지는 것과 관련된 추가 작업</li>
</ul>
<h3 id="화면간-데이터를-전달하는-방법"><a href="#화면간-데이터를-전달하는-방법" class="headerlink" title="화면간 데이터를 전달하는 방법"></a>화면간 데이터를 전달하는 방법</h3><ul>
<li>viewController 프로퍼티를 생성하고 → viewContoroller를 인스턴스화 해서 사용하는 변수에 타입 케스팅을 한 다음 → 프로퍼티를 추가하는 형태로 데이터를 전달 할 수 있다.</li>
<li>반대로 뒤로 가기 할때나 pop 할때 전달하는 법 : delegate 패턴을 활용한다. (다른 객체에게 자신의 일을 위임하는 형태의 디자인 패턴)</li>
<li>delegate 변수를 사용할때에는 week 키워드를 사용해서 강한 순환 참조를 막는다. → 데이터를 전달하는 곳에서 delegate 프로토콜을 만들고 전달받을 뷰에서 프로토콜을 준수하게 하면 전달하는 곳에서 메서드가 실행되게 할 수 있다.</li>
<li>리엑트에서 부모 요소에서 실행할 메서드를 자식에게 props로 전달해서 실행 시키는것과 비슷하다.</li>
<li>세그웨이를 사용할때에는 prepare 메서드를 사용해서 시스템에 의해서 호출될 수 있도록 해서 전달한다</li>
</ul>
<h3 id="에셋-카탈로그"><a href="#에셋-카탈로그" class="headerlink" title="에셋 카탈로그"></a>에셋 카탈로그</h3><p>Assets 폴더 안에 리소스를 추가할 수 있다. 리소스 추가 시에 1x 2x 3x 등의 크기에 이미지를 넣어주어야 하는데 이는 다양한 해상도의 깨지지 않는 이미지를 제공하기 위해서이다.</p>
<h3 id="기타"><a href="#기타" class="headerlink" title="기타"></a>기타</h3><ul>
<li>action 함수에서 sender 변수를 이용해서 어떤 인스턴스에서 발생한 액션인지 알 수 있다.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2022/01/06/IOS/220105-Calcurator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/06/IOS/220105-Calcurator/" class="post-title-link" itemprop="url">UIStackView, IBDesignables, IBInspectable (계산기)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-06 14:38:44" itemprop="dateCreated datePublished" datetime="2022-01-06T14:38:44+09:00">2022-01-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-12 13:06:55" itemprop="dateModified" datetime="2022-01-12T13:06:55+09:00">2022-01-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/IOS/" itemprop="url" rel="index"><span itemprop="name">IOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="계산기"><a href="#계산기" class="headerlink" title="계산기"></a>계산기</h2><p>배울 기술</p>
<ul>
<li>UIStackView</li>
<li>IBDesignables</li>
<li>IBInspectable</li>
</ul>
<h3 id="UIStackView"><a href="#UIStackView" class="headerlink" title="UIStackView"></a>UIStackView</h3><p>열 또는 행에 View 들의 묶음을 배치할 수 있는 간소화된 인터페이스</p>
<ul>
<li>axis : 방향 결정</li>
<li>distribution : 어떻게 분배할지<ul>
<li>Fill : 채우게 ,huging, compresion 값 에따라 달라짐</li>
<li>Fill Equally : 요소 크기를 같게 채우기</li>
<li>Fill Proportionally : 비율에 맞게</li>
<li>Equal Spacing : 각각 간격이 같게</li>
<li>Eual Centering : 각 서브 뷰들의 센터의 간격을 동일하게</li>
</ul>
</li>
<li>alignment : 주축 반대축에 대하여<ul>
<li>fill</li>
<li>leading</li>
<li>top</li>
<li>first baseline</li>
<li>center</li>
<li>trailing</li>
<li>bottom</li>
<li>last baseline</li>
</ul>
</li>
<li>spacing : subview 들의 간격 조정</li>
</ul>
<h3 id="IBInspectable-IBDesignables"><a href="#IBInspectable-IBDesignables" class="headerlink" title="IBInspectable, IBDesignables"></a>IBInspectable, IBDesignables</h3><p>UIView안에 요소를 를 상속하는 클래스를 만들어서 코드로 속성에 접근, 변경할 수 있다.</p>
<p>@IBInspectable 어노테이션을 붙히면 스토리 보드에서도 속성에 값을 변경할 수 있도록 할 수 있다.</p>
<p>@IBDesignable 어노테이션을 붙혀서 실시간으로 속성값 변화를 스토리보드에서 확인할 수 있다. 남용하게 되면 스토리 보드 열때마다 오래 걸릴수도 있다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2022/01/05/IOS/210104-QuoteGenerator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/05/IOS/210104-QuoteGenerator/" class="post-title-link" itemprop="url">Storyboard, AutoLayout, UILabel, UIButton (명언 생성)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-05 10:45:56" itemprop="dateCreated datePublished" datetime="2022-01-05T10:45:56+09:00">2022-01-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-12 13:07:45" itemprop="dateModified" datetime="2022-01-12T13:07:45+09:00">2022-01-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/IOS/" itemprop="url" rel="index"><span itemprop="name">IOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="QuoteGenerator"><a href="#QuoteGenerator" class="headerlink" title="QuoteGenerator"></a>QuoteGenerator</h1><p>명언 생성 앱</p>
<p>배울기술 </p>
<ul>
<li>Storyboard</li>
<li>AutoLayout</li>
<li>UILabel</li>
<li>UIButton</li>
</ul>
<p>알아야 할 기본 개념</p>
<ul>
<li>UIKit</li>
<li>UIViewController</li>
<li>AutoLayout</li>
<li>IBOutlet &amp; IBAction</li>
</ul>
<h3 id="UIKit"><a href="#UIKit" class="headerlink" title="UIKit"></a>UIKit</h3><p>Cocoa touch Framework → IOS Application framework (UIKit(사용자 인이벤트 처리등 UI관련), Foundation(자료구조, 네트워크 등등..), CoreDate… etc ) </p>
<ul>
<li>사용자 이벤트 처리</li>
<li>뷰 관련</li>
<li>MVC 디자인 패턴을 따라 개발하는데 현실 UIKit 에서는 View와 Controller 가 깊게 연결되어 있어서 분리하기 어렵다</li>
</ul>
<h3 id="ViewController"><a href="#ViewController" class="headerlink" title="ViewController"></a>ViewController</h3><p>UIView → 화면의 직사각형 영역</p>
<ul>
<li>앱의 근간을 이루는 객체로 모든 앱은 최소한 하나 이사의 뷰 컨트롤러를 가지고 있다.</li>
<li>데이터 변화에 따라 view 업데이트, 상호작용, 리사이징, 다른 뷰 컨트롤러 들과 앱을 구성</li>
</ul>
<h3 id="AutoLayout"><a href="#AutoLayout" class="headerlink" title="AutoLayout"></a>AutoLayout</h3><p>제약 조건을 이용해서 뷰의 위치를 지정하는 것  → 다양한 해상도 뷰의 맞게 UI 개발을 하기 위함 </p>
<h3 id="IBOulet-amp-IBAction"><a href="#IBOulet-amp-IBAction" class="headerlink" title="IBOulet &amp; IBAction"></a>IBOulet &amp; IBAction</h3><p>storyboard 에 생성한 UIObject에 접근하여 컨트롤하기 위해서 변수에 바인딩 한것을 Outliet 변수라고 한다.</p>
<ul>
<li>storage 에서 strong, week 은 메모리 회수 정책이다. strong 은 일단 참조가 되어 있다면 메모리를 헤제 하지 않지만, week 은 참조 되어 있더라도 해제 될 수 있다. strong은 메모리 누수 발생 여지가 있다.</li>
</ul>
<p>Action 함수는 동작을 정의하는 함수로 UI와 동작을 연결하여 UIVewController 에서 사용할 수 있도록 해준다. </p>
<p>Argument , Action message 를 이벤트 핸들러인 sender를 설정한다.</p>
<h3 id="Content-Hugging-Compression-Resistance"><a href="#Content-Hugging-Compression-Resistance" class="headerlink" title="Content Hugging, Compression Resistance"></a>Content Hugging, Compression Resistance</h3><ul>
<li>Content Hugging : 크기가 늘어나는데 저항하는 성질로서 높을수록 늘어나지 읂는다.</li>
<li>Compression Resistace : 크기가 줄어드는데 저항하는 성질로서 크기가 높을수록 줄어들지 않는다.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2022/01/05/RTK/210104-RTK%20Query%20Basic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/05/RTK/210104-RTK%20Query%20Basic/" class="post-title-link" itemprop="url">RTK Query Basic</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-01-05 10:42:25 / Modified: 10:42:35" itemprop="dateCreated datePublished" datetime="2022-01-05T10:42:25+09:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Redux/" itemprop="url" rel="index"><span itemprop="name">Redux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="RTK-Query"><a href="#RTK-Query" class="headerlink" title="RTK Query"></a>RTK Query</h1><p>RTK Query 웹 애플리케이션에서 데이터를 로드하는 일반적인 경우를 단순화해서 데이터를 가져오거나 캐시할수 있는 도구이다. RTK의 <code>createSlice</code> 및 <code>createAsyncThunk</code> 와 같은 RTK의 API를 활용하여 해당 기능을 구현한다. </p>
<h2 id="store와-API-Service-설정"><a href="#store와-API-Service-설정" class="headerlink" title="store와 API Service 설정"></a>store와 API Service 설정</h2><h3 id="API-service-생성"><a href="#API-service-생성" class="headerlink" title="API service 생성"></a>API service 생성</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// Need to use the React-specific entry point to import createApi</span><br><span class="line">import &#123; createApi, fetchBaseQuery &#125; from &#x27;@reduxjs/toolkit/query/react&#x27;</span><br><span class="line">import &#123; Pokemon &#125; from &#x27;./types&#x27;</span><br><span class="line"></span><br><span class="line">// Define a service using a base URL and expected endpoints</span><br><span class="line">export const pokemonApi = createApi(&#123;</span><br><span class="line">  reducerPath: &#x27;pokemonApi&#x27;,</span><br><span class="line">  baseQuery: fetchBaseQuery(&#123; baseUrl: &#x27;https://pokeapi.co/api/v2/&#x27; &#125;),</span><br><span class="line">  endpoints: (builder) =&gt; (&#123;</span><br><span class="line">    getPokemonByName: builder.query&lt;Pokemon, string&gt;(&#123;</span><br><span class="line">      query: (name) =&gt; `pokemon/$&#123;name&#125;`,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// Export hooks for usage in functional components, which are</span><br><span class="line">// auto-generated based on the defined endpoints</span><br><span class="line">export const &#123; useGetPokemonByNameQuery &#125; = pokemonApi</span><br></pre></td></tr></table></figure>

<p>RTK 쿼리를 사용하면 일반적으로 전체 API 정의를 한곳에서 정의해서 관심사를 모으고 추적하기 쉽도록 한다. </p>
<p>유지 보수하기 위해서 엔트포인트 별로 쿼리를 분리하고 싶을 수 도 있는데 그럴땐, create API 를 사용하여 base URL을 공통으로 갖고 endpoints 는 비어있는 함수로 정의하고 반환된 API에 <code>injectEndpoints</code> 를 사용하여 endpoint api 를 주입하는 방법으로 분리하여 관리 할 수 있다. </p>
<h2 id="Add-the-service-to-your-store"><a href="#Add-the-service-to-your-store" class="headerlink" title="Add the service to your store"></a>Add the service to your store</h2><p>redux store에 reducer와 middleware 를 추가하고, Provider를 사용해 APP 에 store를 주입한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#123; configureStore &#125; from &#x27;@reduxjs/toolkit&#x27;</span><br><span class="line">// Or from &#x27;@reduxjs/toolkit/query/react&#x27;</span><br><span class="line">import &#123; setupListeners &#125; from &#x27;@reduxjs/toolkit/query&#x27;</span><br><span class="line">import &#123; pokemonApi &#125; from &#x27;./services/pokemon&#x27;</span><br><span class="line"></span><br><span class="line">export const store = configureStore(&#123;</span><br><span class="line">  reducer: &#123;</span><br><span class="line">    // Add the generated reducer as a specific top-level slice</span><br><span class="line">    [pokemonApi.reducerPath]: pokemonApi.reducer,</span><br><span class="line">  &#125;,</span><br><span class="line">  // Adding the api middleware enables caching, invalidation, polling,</span><br><span class="line">  // and other useful features of `rtk-query`.</span><br><span class="line">  middleware: (getDefaultMiddleware) =&gt;</span><br><span class="line">    getDefaultMiddleware().concat(pokemonApi.middleware),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// optional, but required for refetchOnFocus/refetchOnReconnect behaviors</span><br><span class="line">// see `setupListeners` docs - takes an optional callback as the 2nd arg for customization</span><br><span class="line">setupListeners(store.dispatch)</span><br></pre></td></tr></table></figure>

<h2 id="Use-the-query-in-a-component"><a href="#Use-the-query-in-a-component" class="headerlink" title="Use the query in a component"></a>Use the query in a component</h2><p><code>useGetPokemonByNameQuery</code> 를 사용하여 데이터의 상태와 데이터를 가져온다. <code>isLoading</code> , <code>isFetching</code> , <code>isSuccess</code> , <code>isError</code> 와 같은 데이터 상태에 bool 도 제공한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#x27;react&#x27;</span><br><span class="line">import &#123; useGetPokemonByNameQuery &#125; from &#x27;./services/pokemon&#x27;</span><br><span class="line"></span><br><span class="line">export default function App() &#123;</span><br><span class="line">  // Using a query hook automatically fetches data and returns query values</span><br><span class="line">  const &#123; data, error, isLoading &#125; = useGetPokemonByNameQuery(&#x27;bulbasaur&#x27;)</span><br><span class="line">  // Individual hooks are also accessible under the generated endpoints:</span><br><span class="line">  // const &#123; data, error, isLoading &#125; = pokemonApi.endpoints.getPokemonByName.useQuery(&#x27;bulbasaur&#x27;)</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &#123;error ? (</span><br><span class="line">        &lt;&gt;Oh no, there was an error&lt;/&gt;</span><br><span class="line">      ) : isLoading ? (</span><br><span class="line">        &lt;&gt;Loading...&lt;/&gt;</span><br><span class="line">      ) : data ? (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">          &lt;h3&gt;&#123;data.species.name&#125;&lt;/h3&gt;</span><br><span class="line">          &lt;img src=&#123;data.sprites.front_shiny&#125; alt=&#123;data.species.name&#125; /&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">      ) : null&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/31/TIL/unca/211230-211230%20Redux%20%EB%B3%B4%EC%95%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/31/TIL/unca/211230-211230%20Redux%20%EB%B3%B4%EC%95%88/" class="post-title-link" itemprop="url">211230 Redux 보안</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-31 15:17:11 / Modified: 15:19:35" itemprop="dateCreated datePublished" datetime="2021-12-31T15:17:11+09:00">2021-12-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/TIL/" itemprop="url" rel="index"><span itemprop="name">TIL</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><h3 id="Rules-of-Reducers"><a href="#Rules-of-Reducers" class="headerlink" title="Rules of Reducers"></a>Rules of Reducers</h3><ul>
<li>state와 action을 통해서만 새로운 state가 계산되어야 함</li>
<li>state는 불변성을 지키면서 업데이트해야함.</li>
<li>순수 함수 여야 함. random이나, asycLogic 등 side effects를 발생시키지 말아야 함.</li>
</ul>
<p>이렇게 해야하는 이유? </p>
<ul>
<li>state 와 action만으로 새로운 상태가 나오기 때문에 예측하기 쉽고, test 하기 쉽다.</li>
<li>그렇지 않다면 어떻게 동작하는지 어떤 결과를 리턴하는지 알 수 없게 된다.</li>
<li>Redux가 올바르게 동작하지 못하게 하여서 bug를 유발한다.</li>
</ul>
<p>Redux Toolkit에 <code>createSlice</code> 는 내부적으로 <code>immer</code> 라이브러리를 사용하여 <code>immutable</code> 하게 업데이트 하는 작업을 편하게 해준다. <code>immer</code> 는 <code>state</code> 를 <code>Proxy</code> 객체로 감싸고 변경사항이 있을대 비교하여 <code>immutable</code> 한 <code>state</code> 를 반환할수 있게 해준다.</p>
<p>→ 내부적으로 <code>immer</code> 를 사용하는 <code>createSlice</code> 나 <code>createReducer</code> 를 사용하지 않는다면 <code>immutable</code> 하게 객체를 업데이트해야 한다.  </p>
<h3 id="Writing-Async-Logic-with-Thunks"><a href="#Writing-Async-Logic-with-Thunks" class="headerlink" title="Writing Async Logic with Thunks"></a>Writing Async Logic with Thunks</h3><p><code>RTK</code> 는 내부적으로 <code>redux-thunk</code> 를 포함한다. <code>createAsyncThunk</code> 를 사용하면 Thunk를 쉽게 생성할 수 있다. </p>
<h2 id="보안"><a href="#보안" class="headerlink" title="보안"></a>보안</h2><ul>
<li>Local Storage 정보는 XSS Attack 으로 도난 당할 수 있다.</li>
</ul>
<h3 id="XSS-Attack-이란"><a href="#XSS-Attack-이란" class="headerlink" title="XSS Attack 이란?"></a>XSS Attack 이란?</h3><p>(Cross-Site Scripting Attack) </p>
<ul>
<li>injection 관련 보안 이슈</li>
<li>사용자가 신뢰하는 웹사이트에 스크립트를 주입해서 정보를 빼내거나 의도치 않은 작업을 하는 것, 웹 어플리케이션, 통상적으로 form 안에 input을 통해서 주입한다.</li>
<li>헤커가 자바스크립트를 준비해서 웹사이트에 숨겨 놓는다.</li>
<li>사용자가 이용하다가 숨겨진 스크립트에 의해 쿠키나 localStorage에 정보를 attacker 에게 전달할수 있다.</li>
<li>민감한 정보를 localStorage에 저장하면 안됨..</li>
<li>해결 방법<ul>
<li>메모리 상의 저장 → 브라우저 나가면 로그인 유지 되지 않는다거나 사용자 경험이 떨어짐</li>
<li>쿠키를 사용하는데, http only 옵션을 넣어줌.→ 브라우저만 쿠키 정보를 읽을 수 있도록 함. 자바스크립트로 읽을 수 없게함. 만료 기간을 설정하면 만료 전까진 쿠키에 유지 됨.<ul>
<li>모바일 클라이언트엔 적용할 수 없음.</li>
<li>CSRF attack에는 취약함.</li>
</ul>
</li>
</ul>
</li>
<li>서버에서는 cors 에 creadentials를 true (Access-Control-Allow-Credentials)로 설정하고 http only로 쿠키를 보내주어야 한다.</li>
<li>헤더에 cookie로 넣어버리면? 모바일 클라이언트는 문제가 생김, 일단은 그대로 바디로 token을 넘겨주기도 하고, header로 설정하기도 해야 함.</li>
<li>서버에 auth 부분에서는 Cookie 도 확인하고 Header도 확인해야 함. 모바일 클라이언트도 있기 때문에</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/24/TIL/211223-211223%20%EB%A6%AC%EC%97%91%ED%8A%B8%20%EC%BF%BC%EB%A6%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/24/TIL/211223-211223%20%EB%A6%AC%EC%97%91%ED%8A%B8%20%EC%BF%BC%EB%A6%AC/" class="post-title-link" itemprop="url">211223 리엑트 쿼리</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-24 12:59:17 / Modified: 12:59:22" itemprop="dateCreated datePublished" datetime="2021-12-24T12:59:17+09:00">2021-12-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/TIL/" itemprop="url" rel="index"><span itemprop="name">TIL</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="211223"><a href="#211223" class="headerlink" title="211223"></a>211223</h1><h2 id="리엑트-쿼리"><a href="#리엑트-쿼리" class="headerlink" title="리엑트 쿼리"></a>리엑트 쿼리</h2><ul>
<li>리엑트 쿼리 : <code>useQuery</code> 데이터의 캐시 키와 Promise 를 반환하는 함수를 기반으로 데이터의 로딩 결과 오류 상태를 관리해 준다.</li>
<li>Promise 를 반환하는 함수의 매개변수를 캐시키에 포함시킨다.</li>
<li>stale time 과 cache time<ul>
<li>stale time : 신선하지 않다는 의미 → 데이터가 더이상 유효하지 않다 → 재요청 , 기본값은 0 인데 불러온 시점부터 유효하지 않게 되어서 재요청이 필요한 상태가 된다. 재용청 기회가 주어지는 시점은 똑같은 캐시 키를 사용하는 useQuery 를 사용하는 컴포넌트가 마운트될 때이다.</li>
<li>useQuery Hook을 사용하는 컴포넌트가 언마운트되고 나서 해당 데이터를 얼마 동안 유지할지에 대한 설정. 기본값은 5분이다. 그래서 만약에 컴포넌트가 언마운트 되고 5분이 안되서 다시 마운트 되었다면 isLoading이 true가 되지 않고 이전에 data 값을 사용하게 된다. 그리고 staelTime 에 따라 해당 데이터가 유효하다면 재요청 하지 않고 유효하지 않다면 재요청 한다.</li>
<li>기본 옵션의 경우 useQuery를 사용하는 어떤 컴포넌트가 마운트 되고, 처음 마운트된 컴포넌트가 5분이 되지 않은 상태에서 다른 컴포넌트에서 사용한다면 일단 data를 이전 데이터에서 가져다가 쓰고, 유효하지 않기 때문에 재요청을 실시해서 대체한다. 만약 5분이 지났다면 data 가 undefined 이고 새로 요청을 실시한다.</li>
</ul>
</li>
<li>axios 인스턴스를 사용하는 이유?<ol>
<li>baseURL을 설정하기 위해서 </li>
<li>공통 헤더를 인스턴에 넣어서 요청할 수 있다.</li>
</ol>
</li>
<li>react-query를 프로젝트에서 사용할 때에는 QueryClientProvider를 최상단에서 감싸줘야 한다. 캐시를 관리할때 사용하는 QueryClient 인스턴스를 자식 컴포넌트에서 사용할수 있게 해주기 때문이다.</li>
<li>데이터를 생성,수정, 삭제 할때는 useMutation 이라는 hook 을 사용한다. → useMutation 은 특정 함수에서 우리가 원하는 때에 직접 요청을 시작하는 형태로 작동한다.</li>
<li>refetch 를 이용하는 방법은 구현하기 쉽지만 모든 페이지에 대해서 재용청 하는 문제가 있다. → useInfiniteQuery 는 반대 방향으로도 페이지네이션 할 수 있는데 그때 사용하는 getPreviousPageParam 을 옵션 설정하여 구현 최적화할 수 있다.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/24/DevOps/Docker/211224-Using%20Node(4)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/24/DevOps/Docker/211224-Using%20Node(4)/" class="post-title-link" itemprop="url">Using Node(4)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-24 12:55:56 / Modified: 12:59:25" itemprop="dateCreated datePublished" datetime="2021-12-24T12:55:56+09:00">2021-12-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Run-your-tests"><a href="#Run-your-tests" class="headerlink" title="Run your tests"></a>Run your tests</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>Node.js 와 Mocha frameworks 를 사용하여 Docker  안에서 Unit test 를 진행하는 방법을 알아본다.</p>
<h2 id="Create-a-test"><a href="#Create-a-test" class="headerlink" title="Create a test"></a>Create a test</h2><p><code>./test</code> 폴더를 application 안에서 생성한다 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p><code>test.js</code> 파일을 <code>./test</code> 폴더 안에 생성한다. </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> assert = <span class="built_in">require</span>(<span class="string">&#x27;assert&#x27;</span>);</span><br><span class="line">describe(<span class="string">&#x27;Array&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  describe(<span class="string">&#x27;#indexOf()&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    it(<span class="string">&#x27;should return -1 when the value is not present&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      assert.equal([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].indexOf(<span class="number">4</span>), -<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Running-locally-and-testing-the-application"><a href="#Running-locally-and-testing-the-application" class="headerlink" title="Running locally and testing the application"></a>Running locally and testing the application</h2><p>Docker image 를 컨테이너 안에서 build 하고 실행시킨다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose -f docker-compose.dev.yml up --build</span><br></pre></td></tr></table></figure>

<h2 id="Install-Mocha"><a href="#Install-Mocha" class="headerlink" title="Install Mocha"></a>Install Mocha</h2><p>개발 의존성으로 Mocha 를 설치한다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save-dev mocha</span><br></pre></td></tr></table></figure>

<h2 id="Update-package-json-and-Dockerfile-to-run-tests"><a href="#Update-package-json-and-Dockerfile-to-run-tests" class="headerlink" title="Update package.json and Dockerfile to run tests"></a>Update package.json and Dockerfile to run tests</h2><p>컨테이너 안에서 test 가 진행될 수 있도록 package.json을 수정하자. 위에서 똑같은 docker run command를 실행시킬건데 이번에는 package.json 에 test 스크립트를 추가하고 test가 실행 될 수 있도록 한다. </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;script&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;test&quot;</span> : <span class="string">&quot;mocha ./**/*.js&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;start&quot;</span> : <span class="string">&quot;nodemon --inspect=0.0.0.0:9229 server.js&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>test 실행:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose -f docker-compose.dev.yml run notes npm run <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<h2 id="Multi-stage-Dockerfile-for-testing"><a href="#Multi-stage-Dockerfile-for-testing" class="headerlink" title="Multi-stage Dockerfile for testing"></a>Multi-stage Dockerfile for testing</h2><p>명령에 따라 테스트를 실행하는 것 외에도 Dockerfile을 사용해서 이미지를 빌드할 때 테스트를 실행할 수 있다. 밑에 Dockerfile 은 test를 진행하고 production image 를 build 한다.</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">14.15</span>.<span class="number">4</span> as base</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /code</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> package.json package.json</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> package-lock.json package-lock.json</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> base as test</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm ci</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">&quot;npm&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;test&quot;</span> ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> base as prod</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm ci --production</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">&quot;node&quot;</span>, <span class="string">&quot;server.js&quot;</span> ]</span></span><br></pre></td></tr></table></figure>

<p>먼저 , base image에 라벨을 <code>as base</code> 로 추가한다. build stage 마다 참조할 수 있도록 해준다. docker command 를 입력할 때 <code>--target test</code> 같이 명시해서 build stage를 명시해서 build 할 수 있다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t node-docker --target <span class="built_in">test</span> .</span><br></pre></td></tr></table></figure>

<p>이렇게 하면 test 이미지가 빌드 된다. 이제 test 이미지를 실행해 본다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it --rm -p 8000:8000 node-docker</span><br></pre></td></tr></table></figure>

<p>테스트가 실행 된다. </p>
<p>지금은 build 한다음 run 을 하는 방식을 사용하는데 이렇게 하면 실행하기 위해 2번씩 명령어를 입력해야 한다. Dockerfile 내부에 CMD 를 RUN 으로 바꾸어서 조금 개선할 수 있다. CMD 는 컨테이너에서 이미지를 실행할 때 실행된다. 반면에 RUN 은 이미지를 build 할때 실행 되고 실패하면 중지된다. 수정한 Dockerfile은 다음과 같다. </p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">14.15</span>.<span class="number">4</span> as base</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /code</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> package.json package.json</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> package-lock.json package-lock.json</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> base as test</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm ci</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm run <span class="built_in">test</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> base as prod</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm ci --production</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">&quot;node&quot;</span>, <span class="string">&quot;server.js&quot;</span> ]</span></span><br></pre></td></tr></table></figure>

<p>똑같이 build 한다</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t node-docker --target <span class="built_in">test</span> .</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JayoonKoo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
