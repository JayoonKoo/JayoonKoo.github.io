<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"jayoonkoo.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="티끌모아 태산">
<meta property="og:url" content="https://jayoonkoo.github.io/page/5/index.html">
<meta property="og:site_name" content="티끌모아 태산">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="JayoonKoo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jayoonkoo.github.io/page/5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>티끌모아 태산</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">티끌모아 태산</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">작은 조각 모음</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">20</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">16</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">153</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">JayoonKoo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">153</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/JayoonKoo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JayoonKoo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:rnwkdbs12@gmail.com" title="E-Mail → mailto:rnwkdbs12@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/JayoonKoo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/22/TIL/211221-211221%20%EB%A6%AC%EC%95%A1%ED%8A%B8%20%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/22/TIL/211221-211221%20%EB%A6%AC%EC%95%A1%ED%8A%B8%20%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C/" class="post-title-link" itemprop="url">211221 리액트 네이티브</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-22 20:00:49 / Modified: 20:00:55" itemprop="dateCreated datePublished" datetime="2021-12-22T20:00:49+09:00">2021-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/TIL/" itemprop="url" rel="index"><span itemprop="name">TIL</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="211221"><a href="#211221" class="headerlink" title="211221"></a>211221</h1><h2 id="리액트-네이티브"><a href="#리액트-네이티브" class="headerlink" title="리액트 네이티브"></a>리액트 네이티브</h2><ul>
<li>커스텀 버튼에서 primary 버튼과 secondary 버튼을 만드는 방법 &lt;429p&gt;</li>
<li>React.forwardRef(CusomComponent) 와 같이 선언하고 CustomComponent에서 원하는 컴포넌트에 props 다음으로 받아온 ref 를 proos로 사용하게 설정하면 사용하는 쪽에서 CustomComponent에 ref를 넘겨줌으로써 CustomComponent 내부의 컴포넌트를 참조 할 수 있다.</li>
<li>스택에 화면을 비워야 한다면? 로그인 했는데 로그인 화면으로 스와이프해서 넘어가는것 방지하는 경우 같은.. reset이라는 메서드가 있는데 번거로움.. 대신에 특정 조건을 만족하면 스택에서 화면을 제거하는 방법으로 구현 가능하고 공식문서에서도 이 방법을 추천함. → rootStack 같은 곳에서 특정 상태를 기반으로(ex. user) 조건부 렌더링으로 스택을 처리하면 됨.</li>
<li>로그인 정보를 유지하기 위해서 일반적으로는 AsyncStorage를 사용한다.</li>
<li>RefreshControl 을 사요하면 FlatList 에서 아래로 내리는 스와이프 동작으로 새로고침을 구현할 수 있다. FlatList 에 refreshControl 컴포넌트로 RefreshControl 을 주입하면 된다.</li>
<li>useNavigationState 함수를 사용해서 내비게이션 상태를 조회할 수 있다.</li>
<li>Pressable 에 hitSlop을 설정하면 컴포넌트 영역은 그대로 유지하고 터치 가능한 영역만 설정한 숫자 만큼 늘려준다. 숫자도 넣을 수 있고, Rect 타입의 객체를 넣을 수 도 있다.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/21/TIL/211216-211216%20%EB%B0%B1%EC%97%94%EB%93%9C(%EC%9D%B8%EC%A6%9D)%20%EB%A6%AC%EC%95%A1%ED%8A%B8%20%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/21/TIL/211216-211216%20%EB%B0%B1%EC%97%94%EB%93%9C(%EC%9D%B8%EC%A6%9D)%20%EB%A6%AC%EC%95%A1%ED%8A%B8%20%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C/" class="post-title-link" itemprop="url">211216 백엔드(인증) 리액트 네이티브</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-21 21:39:28 / Modified: 21:39:46" itemprop="dateCreated datePublished" datetime="2021-12-21T21:39:28+09:00">2021-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/TIL/" itemprop="url" rel="index"><span itemprop="name">TIL</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="211216"><a href="#211216" class="headerlink" title="211216"></a>211216</h1><h2 id="백엔드-Authentication"><a href="#백엔드-Authentication" class="headerlink" title="백엔드-Authentication"></a>백엔드-Authentication</h2><ul>
<li>인증이란? : you are who you say you are, 다양한 방법으로 인증 가능하다 통상적으로 password, id 로<ul>
<li>먼저 회원가입을 진행해서 서버에 id, passwrod 를 저장한다.</li>
<li>클라이언트는 로그인 할때 회원가입한  id, password를 서버에 전송한다.</li>
<li>어떻게 로그인 상태를 유지할 수 있을까?</li>
</ul>
</li>
<li>세션과 쿠기 (서버에서 사용할 수 있는 전통적인 옵션- 어떻게 로그인 상태를 유지할지에 대한 방법)<ol>
<li>세션 <ul>
<li>서버에서 확인후 세션을 만든다 (userId, sessiontId, expiration) - Session DB에 저장 or 파일시스템이나 메모리도 될 수 있음</li>
<li>쿠키에 HTTP Only로 sessiontId 정보를 전달함.</li>
<li>다음 요청때마다 쿠키 정보를 전달해줌</li>
<li>장점 : 브라우저에 전달만 하면 되서 간단하고, sessionId 만 전달하면되서 사용자의 정보를 전달하지 않아도 된다. HTTP Only를 사용하면 스크립트로 못읽기 때문에 보안상의 이점도 있다.</li>
<li>단점 : Stateful 하기 때문에 다양한 서버들이 SettionDb를 읽어야 하고 많은 요청이 들어오게 된다. 내부적으로 네트워킹이 많아짐. 성능 하락</li>
</ul>
</li>
<li>JWT (Json Web Token)<ul>
<li>다음과 같은 정보를 JSON으로 만들고 토큰화해서 보낸다. header, payload, signature, 모든 정보는 인코딩해서 보내고 서버에서 secrete으로 사용하는 키도 인코딩해서 signature에 포함해서 보낸다.</li>
<li>로그인 하면, 로그인 정보 + 만료 시간 등등 합쳐서 JWT를 만듦.</li>
<li>클라이언트는 Header를 이용하여 모든 request마다 JWT를 포함해서 전달해 줌.</li>
<li>서버는 JWT를 검증한 후에 데이터를 반환함.</li>
<li>장점 : 서버에 State가 없다. 서버를 확장하거나 분산하기에 용이하다.</li>
<li>단점 : JWT 자체가 단점이 될 수 있다. → 계속 JWT를 주고 받아야 한다. 만약 영원히 만료되지 않은 JWT를 헤커가 탈취한다면.. 사용할때 보안에 신경써야 한다.</li>
</ul>
</li>
</ol>
</li>
<li>bcrypt 란?  : 사용자 정보를 그대로 저장하는 것이 아니라 암호화 해서 저장하기 위해 사용함. → 암호화만 가능한데 (암호화 한것을 비교하는 것), salt 가 없다면 경우의 수로 암호화 해 보면서 유추할 수 있어서 salt를 포함하여 경우의 수를 늘림. 10~12 정도로 설정. 길어지면 cpu 부하 심해짐..</li>
<li>JWT, 32 시크릿 키로 권고 됨. 한번 발행된 토근은 변경되면 안된다. → 만약 한버이라도 변경 한다면 최종적으로 붙은 signature도 변경되어서 verify시 오류 발생하고 누군가 변경한 토큰인지 확인 가능하다.<ul>
<li>만료될 수 있도록 만들어야 한다. → option으로 전달함. {expiresIn: 2} 이런식으로 → 2초 후에 만료</li>
</ul>
</li>
</ul>
<h2 id="리액트-네이티브"><a href="#리액트-네이티브" class="headerlink" title="리액트 네이티브"></a>리액트 네이티브</h2><ul>
<li>Platform.OS 로 플랫폼 종류를 알 수 있다.</li>
<li>KeyboardAvoidingView 에서 behavior Props 로 동작 장식을 정의할 수 있다.<ul>
<li>padding : 키보드 열렸을때 뷰 하단에 패딩을 설정</li>
<li>height: 뷰의 높이 자체를 변경</li>
<li>position:  뷰의 위치를 설정</li>
</ul>
</li>
<li>Platform.select({ios:, android,}) 를 사용해서 플랫폼 별로 옵션을 줄 수 있다.</li>
<li>터치 했을때 효과 주기<ul>
<li>TouchableHighlight: 터치했을 대 배경색 변경</li>
<li>TouchableNativeFeedback: 안드로이드에서 물결 효과 ios에서는 오류</li>
<li>ToucableOpacity: 투명도 조정</li>
<li>ToucableWithoutFeedback: 아무 효과도 적용하지 않는다.</li>
</ul>
</li>
<li>keyboard.dismiss() 는 현제 나타난 키보드를 닫는다.</li>
<li>onSubmitEditing → enter 눌렀을때 이벤트</li>
<li>returnkeyType=”done” → 키보드 눌렀을대 return 타입을 보여줌.</li>
<li>FlatList에 ItemSeparatorComponent Props를 지정해서 컴포넌트 사이에 구분선을 설정할 수 있다.</li>
<li>react-nativevector-icons 를 사용하면 벡터 아이콘을 리액트 네이티브 프로젝트에서 간편하게 컴포넌트처럼 사용할 수 있게 해준다.</li>
<li>ios/proejctForderName/info.plist → 앱의 이름, 아이콘, 버전 등 앱에서 필요한 설정값을 지니고 있다.</li>
<li>android/app/build.gradle → 프로젝트의 의존성, 프로그인 및 빌드에 필요한 설정에 대한 정보를 지니고 있다.</li>
<li>Alert.aler(제목, 내용, 버튼, 옵션) 버튼 부분에 {text, onPress, style} 을 각각 설정해서 버튼 스타일 내용, 눌렀을때 동작등을 정의할수 있다. 안드로이드에서는 버튼 스타일이 적용되지 않아서 따로 만들어야 한다. 설정할 수 있는 style은 다음과 같다.<ul>
<li>cancel: 취소 기본에 폰트 두껍게</li>
<li>default: 기본 파란색</li>
<li>destructive: 파괴적인? 삭제하는 상황에 적합 빨간색이 됨.</li>
</ul>
</li>
<li>옵션으로는 바깥에 눌렀을때 동작이나, 안드로이드에서는 바깥에 눌렀을때 취소 옵션 같은걸 줄 수 있다.</li>
<li>브라우저에 localStorage 와 비슷한 AsyncStorage 를 사용할 수 있다. API도 비슷한데 다른점이라면 AsyncStorage는 비동기로 동작해서 Promise를 반환한다. <code>yarn add @react-native-community/async-strage</code> 로 설치한다.</li>
<li>useEffect 에는 cleanup 하는 기능이 있는데 내부 함수가 promise를 반환하면 충돌하기 때문에 내부에서 async 함수를 선언한 후에 호출하는 방법을 사용한다.</li>
<li>AsyncStorage를 사용할때는 추상화 해서 사용하는 것을 추천한다 → 나중에 다른 스토리지를 사용할때 쉽게 교체할 수 있도록</li>
<li>android 는 AsyncStorage 로 6MB를 저장할 수 있다 늘리려면 gradle.properties를 수정한다. ios 는 따로 최대 용량이 설정되어 있지 않다.</li>
<li>AsyncStorage는 데이터가 많아지면 성능이 떨어진다. 또한 정렬이나 인덱싱 기능을 지원하지 않는다. 소규모에서 적합하고 조금 규모가 커지면 대안으로 <code>react-native-sqlite-storage</code> 같은것을 사용하면 된다.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/21/TIL/211221-211221%20%EB%A6%AC%EC%95%A1%ED%8A%B8%20%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C,%20%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/21/TIL/211221-211221%20%EB%A6%AC%EC%95%A1%ED%8A%B8%20%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C,%20%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/" class="post-title-link" itemprop="url">211221 리액트 네이티브, 알고리즘</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-21 21:39:28 / Modified: 21:39:46" itemprop="dateCreated datePublished" datetime="2021-12-21T21:39:28+09:00">2021-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/TIL/" itemprop="url" rel="index"><span itemprop="name">TIL</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="211221"><a href="#211221" class="headerlink" title="211221"></a>211221</h1><h2 id="리액트-네이티브"><a href="#리액트-네이티브" class="headerlink" title="리액트 네이티브"></a>리액트 네이티브</h2><h3 id="네비게이션"><a href="#네비게이션" class="headerlink" title="네비게이션"></a>네비게이션</h3><ul>
<li>네비게이션을 위해서 @react-navigation/native 를 사용한다. 의존하는 라이브러리로 react-native-screens react-native-safe-area-context 를 설치한다.</li>
<li>브라우저에 history 와 같은 기능을 사용하기 위해서 Native Stack Navigator 를 사용한다. 설치 @react-navigation/native-stack</li>
<li>스크린을 사용되는 컴포넌트는 navigation을 props로 받음. navigation.navigate 나 navigation.push 로 화면 전환을 할 수 있다.</li>
<li>마찬가지로 props로 route도 받아온다. route는 key, name, params 를 갖는다.</li>
<li>navigate 와 push 에 차이는 navigate 는 전환 화면이 현제 화면과 다르면 화면을 쌓지 않고, push 는 다른 화면을 쌓는다.</li>
<li>뒤로가기 navigation.pop( ) 으로 하고, 가장 처음 화면으로 이동할 때에는 navigation.popToTop() 으로 이동한다.</li>
<li>드로어 네비게이터를 사용하려면 @react-navigation/drawer react-native-gesture-handler react-native-reanimated 를 설치한다</li>
<li>Screen 이 아닌 곳에서는 React와 마찬가지로 hook을 통해 route 와 navigationd 을 가져올  수 있다. <code>useNavigation</code> , <code>useRoute</code></li>
<li><code>useFocusEffect</code> 웹과 달리 앱은 화면이 사라지는 것이 아니라 쌓게 된다. 따라서 Home 면에서 Detail 화면으로 넘어갈때 화면을 쌓일 뿐이여서 componentWillUnmount 같은 로직이 호출되지 않는다. 마찬가지로 Detail 에서 Home으로 돌아올 때도 componentDidMount 같은 로직이 호출되지 않는다. 그래서 만약 다른 화면을 봤다가 다시 돌아왔을때 어떤 작업을 하려면 <code>useFocusEffect</code> hook 을 사용해야 한다. → 반드시 <code>useCallback</code> 과 같이 사용해야 한다. 안그러면 렌더링 될때마마다 useFocusEffect 에 등록한 함수가 실행된다.</li>
</ul>
<h2 id="알고리즘"><a href="#알고리즘" class="headerlink" title="알고리즘"></a>알고리즘</h2><ul>
<li>DP 와 분활정복의 차이 ?<ul>
<li>큰문제가 작은 문제로 나누어짐, 가장 큰 차이점은 부분 문제의 중복이다. DP 는 부분 문제의 중복이 존재하고, 분할정복은 그렇지 않다.</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/21/DevOps/Docker/211221-Docker%20tutorial(3)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/21/DevOps/Docker/211221-Docker%20tutorial(3)/" class="post-title-link" itemprop="url">Docker tutorial(3)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-21 21:34:27 / Modified: 21:34:44" itemprop="dateCreated datePublished" datetime="2021-12-21T21:34:27+09:00">2021-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Update-the-source-code"><a href="#Update-the-source-code" class="headerlink" title="Update the source code"></a>Update the source code</h1><p>코드를 업데이트하고 적용하는 방법을 알아본다.</p>
<ol>
<li>코드를 고친다. </li>
<li>build 할때 사용했던 명령어를 똑같이 입력한다. </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t getting-started .</span><br></pre></td></tr></table></figure>

<ol>
<li>업데이트된 코드를 사용해서 새로운 컨테이너를 시작한다.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -db 3000:3000 getting-started</span><br></pre></td></tr></table></figure>

<p>하지만 에러가 발생한다.. (docker: Error response from daemon: driver failed….)</p>
<p>왜냐하면 이미 3000 번 포트로 전에 컨테이너가 실행중이기 때문이다. 하나의 머신에 특정한 포트는 한게만 실행 실행시킬 수 있다. 오래된 컨테이너를 지워야 한다.</p>
<h2 id="Replace-the-old-container"><a href="#Replace-the-old-container" class="headerlink" title="Replace the old container"></a>Replace the old container</h2><p>컨테이너를 지우기 위해서는 컨테이너 실행을 중지 시켜야 한다. 두가지 방법이 있는데 편한것을 선택하면 된다. </p>
<h3 id="Remove-a-container-using-the-CLI"><a href="#Remove-a-container-using-the-CLI" class="headerlink" title="Remove a container using the CLI"></a>Remove a container using the CLI</h3><ol>
<li>컨테이너의 ID를 얻는다. </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker ps</span><br></pre></td></tr></table></figure>

<ol>
<li>docker ID 혹은 이름을 사용해서 컨테이너를 멈춘다.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop &lt;the-container-id or name&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>컨테이너가 멈추면 <code>docker rm</code> 커멘드로 지울 수 있다. </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker rm &lt;the-container-id or name&gt;</span><br></pre></td></tr></table></figure>

<p>-f 플래그를 이요해서 실행중인 중에도 삭제할 수 있다. <code>docker rm -f &lt;the-continaer-id or name&gt;</code> </p>
<h3 id="Docker-Dashboard"><a href="#Docker-Dashboard" class="headerlink" title="Docker Dashboard"></a>Docker Dashboard</h3><p>Docker Dashboard에서 실행중인 컨테이널르 확인하고 쓰레기통 아이콘을 누르면 삭제할 수 있다. </p>
<h3 id="Start-the-updated-app-container"><a href="#Start-the-updated-app-container" class="headerlink" title="Start the updated app container"></a>Start the updated app container</h3><ol>
<li>앱을 실행시킨다. </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -dp 3000:3000 getting-started</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/21/DevOps/Docker/211221-Using%20Node(3)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/21/DevOps/Docker/211221-Using%20Node(3)/" class="post-title-link" itemprop="url">Using Node(3)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-21 21:34:27 / Modified: 21:34:44" itemprop="dateCreated datePublished" datetime="2021-12-21T21:34:27+09:00">2021-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="develop-app"><a href="#develop-app" class="headerlink" title="develop app"></a>develop app</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>이전 섹션에서 구축한 애플리케이션을 위한 로컬 개발 환경을 설정하는 과정을 살펴본다.</p>
<h2 id="Local-database-and-containers"><a href="#Local-database-and-containers" class="headerlink" title="Local database and containers"></a>Local database and containers</h2><p>이번 섹션에서는 MongoDB를 사용한다. MongoDB를 직접 다운로드 하는것 대신에 Docker 공식 이미지를 사용하도록 한다. </p>
<p>MongoDB Container 를 실행하기 전에 Data를 저장할 수 있는 볼륨을 설정한다. Docker 가 제공하는 volumes 기능을 사용한다.</p>
<p>data와 MongoDB 설정 볼륨을 만든다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker volume create mongodb</span><br><span class="line">$ docker volume create mongodb_config</span><br></pre></td></tr></table></figure>

<p>애플케이션과 database가 소통할 네트워크를 생성한다. 네트워크는 사용자 정의 브리지 네트워크라고 하며 컨테이너간 소통할때 사용할 수 있는 DNS 조회 서비스를 제공한다. (mongodb 로 접속할 수 있게 DNS 제공)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker network create mongodb</span><br></pre></td></tr></table></figure>

<p>이제 컨테이너에서 mongoDB를 실행하고 볼륨과 네트워크를 연결한다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it --rm -d -v mongodb:/data/db \</span><br><span class="line">	-v mongodb_config:/data/configdb -p 21017:21017 \</span><br><span class="line">	--network mongodb \</span><br><span class="line">	--name mongodb \</span><br><span class="line">mongo</span><br></pre></td></tr></table></figure>

<p><code>server.js</code> 를 수정해서 mongoDB를 사용하도록 한다. <code>process.env.CONNECTIONSTRING</code> 과 같이 환경 변수를 조회하고 있는데 나중에 컨테이너를 실행시킬때 <code>CONNECTIONSTRING</code> 이라는 이름에 환경변수를 추가할 수 있다. </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ronin     = <span class="built_in">require</span>( <span class="string">&#x27;ronin-server&#x27;</span> )</span><br><span class="line"><span class="keyword">const</span> mocks     = <span class="built_in">require</span>( <span class="string">&#x27;ronin-mocks&#x27;</span> )</span><br><span class="line"><span class="keyword">const</span> database  = <span class="built_in">require</span>( <span class="string">&#x27;ronin-database&#x27;</span> )</span><br><span class="line"><span class="keyword">const</span> server = ronin.server()</span><br><span class="line"></span><br><span class="line">database.connect( process.env.CONNECTIONSTRING )</span><br><span class="line">server.use( <span class="string">&#x27;/&#x27;</span>, mocks.server( server.Router(), <span class="literal">false</span>, <span class="literal">false</span> ) )</span><br><span class="line">server.start()</span><br></pre></td></tr></table></figure>

<p><code>ronin-database</code> 를 추가했으므로 설치한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i ronin-database</span><br></pre></td></tr></table></figure>

<p>build 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build --tag node-docker .</span><br></pre></td></tr></table></figure>

<p>컨테이너를 실행시킨다. 여기서 <code>CONNECTIONSTRING</code> 환경변수를 추가해서 애플리케이션이 어떻게 데이터베이스에 접근해야 하는지 알려준다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ docker run \</span><br><span class="line">  -it --rm -d \</span><br><span class="line">  --network mongodb \</span><br><span class="line">  --name rest-server \</span><br><span class="line">  -p 8000:8000 \</span><br><span class="line">  -e CONNECTIONSTRING=mongodb://mongodb:27017/yoda_notes \</span><br><span class="line">  node-docker</span><br></pre></td></tr></table></figure>

<h2 id="Use-Compose-to-develop-locally"><a href="#Use-Compose-to-develop-locally" class="headerlink" title="Use Compose to develop locally"></a>Use Compose to develop locally</h2><p>하나의 명령으로 node-docker 와 MongoDB를 시작하는 Compose 파일을 생성해 본다. 또한 컴포즈 파일로 node-docker 를 시작할때 debug mode로 시작하게 해서 실행중인 프로세스에 디버거를 연결할 수 도 있다. </p>
<p><code>docker-compose.dev.yml</code> 파일을 만들어서 다음 내용을 복사한다. </p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"> notes:</span><br><span class="line">  build:</span><br><span class="line">   context: .</span><br><span class="line">  ports:</span><br><span class="line">   - <span class="number">8000</span>:<span class="number">8000</span></span><br><span class="line">   - <span class="number">9229</span>:<span class="number">9229</span></span><br><span class="line">  environment:</span><br><span class="line">   - SERVER_PORT=<span class="number">8000</span></span><br><span class="line">   - CONNECTIONSTRING=mongodb://mongo:<span class="number">27017</span>/notes</span><br><span class="line">  volumes:</span><br><span class="line">   - ./:/app</span><br><span class="line">  command: npm <span class="keyword">run</span><span class="bash"> debug</span></span><br><span class="line"></span><br><span class="line"> mongo:</span><br><span class="line">  image: mongo:<span class="number">4.2</span>.<span class="number">8</span></span><br><span class="line">  ports:</span><br><span class="line">   - <span class="number">27017</span>:<span class="number">27017</span></span><br><span class="line">  volumes:</span><br><span class="line">   - mongodb:/data/db</span><br><span class="line">   - mongodb_config:/data/configdb</span><br><span class="line">volumes:</span><br><span class="line"> mongodb:</span><br><span class="line"> mongodb_config:</span><br></pre></td></tr></table></figure>

<p>compose 파일을 이용하면 docker run 할때 사용했던 여러가지 파라미터를 컴포즈 파일에 명시함으로써 생략할 수 있다.</p>
<ul>
<li>디버거를 연결할 수 있는 9229 포트를 노출한다.</li>
<li>services 에서 설정한 이름을 서비스에서 설정할 수 있다. 이경우에는 <code>mongo</code> 가 된다.</li>
<li>디버거 모드로 실행하기 위해서 <code>package.json</code> 에 스크립트를 추가한다.</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;debug&quot;</span> : <span class="string">&quot;nodemon --inspect=0.0.0.0:9229 server.js&quot;</span></span><br></pre></td></tr></table></figure>

<p>nodemon을 사용함으로 nodemon을 설치한다 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i nodemon </span><br></pre></td></tr></table></figure>

<p>애플리케이션을 시작한다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose -f docker-compose.dev.yml up --build</span><br></pre></td></tr></table></figure>

<p>docker 이미지를 컴파일한 다음 시작하도록 —build 플래그를 전달한다. </p>
<p>디버깅 모드로도 실행되고 8000 번 포트로 접근할 수 도 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --request GET --url http://localhost:8000/notes</span><br></pre></td></tr></table></figure>

<h2 id="Connect-a-debugger"><a href="#Connect-a-debugger" class="headerlink" title="Connect a debugger"></a>Connect a debugger</h2><p>크롬 브라우저와 함께 제공되는 디버거를 사용할 수 있다. 크롬을 열고 주소창에 <code>about:inspect</code> 를 입력한다.</p>
<h2 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h2><p>어떤 컨테이너는 다른 컨테이너의 의존해서 실행 순서가 나중이어야 하는 경우가 있다. mysql을 사용하면서 특정 테이블이 생성되기 전에 server에서 접근하면 에러가 발생하는데 이런경우 mysql 컨테이너가 테이블을 만드는 시점보다 server 가 실행되는 시점이 더 빠르기 때문이다. 의존성을 추가하고 싶다면 <code>depends_on</code> 을 사용하여 의존성을 명시해준다. </p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">  notes:</span><br><span class="line">    depends_on:</span><br><span class="line">      - mysqldb</span><br><span class="line">    build:</span><br><span class="line">      context: .</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="number">443</span>:<span class="number">8080</span></span><br><span class="line">      - <span class="number">9229</span>:<span class="number">9229</span></span><br><span class="line">    environment:</span><br><span class="line">      - SERVER_PORT=<span class="number">8080</span></span><br><span class="line">      - DB_PORT=<span class="number">3306</span></span><br><span class="line">      - MYSQL_DATABASE=test</span><br><span class="line">      - <span class="keyword">USER</span>=root</span><br><span class="line">      - MYSQL_ROOT_PASSWORD=<span class="number">1</span>q2w3e</span><br><span class="line">      - HOST=mysqldb</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/app</span><br><span class="line">    command: yarn <span class="keyword">run</span><span class="bash"> debug</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/17/DevOps/Docker/211216-Using%20Node(2)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/17/DevOps/Docker/211216-Using%20Node(2)/" class="post-title-link" itemprop="url">Using Node(2)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-12-17 13:25:07" itemprop="dateCreated datePublished" datetime="2021-12-17T13:25:07+09:00">2021-12-17</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-12-21 21:34:00" itemprop="dateModified" datetime="2021-12-21T21:34:00+09:00">2021-12-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Run-Containers"><a href="#Run-Containers" class="headerlink" title="Run Containers"></a>Run Containers</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>컨테이너는 host 와는 격리된 자기 자신만의 파일시스템, 네트워크 프로세스를 가지고 있다. 저번 시간에 이어서 이미지를 실행 보도록 한다,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run node-docker</span><br></pre></td></tr></table></figure>

<p>하지만 이렇게 하면 요청이 거부 된다는 결과만 나온다. 이유는 docker 컨테이너는 host 와 격리되어 있기 때문이다. 따라서 포트를 매핑 시켜야 제대로 실행시킬 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --publish 8080:8080 node-docker</span><br></pre></td></tr></table></figure>

<p>-p 로 축약해서 사용 가능하다.</p>
<h2 id="Run-in-detached-mode"><a href="#Run-in-detached-mode" class="headerlink" title="Run in detached mode"></a>Run in detached mode</h2><p>detached모드로 백그라운드에서 실행시킬수도 있다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ocker run -d -p 8080:8080 node-docker</span><br></pre></td></tr></table></figure>

<p>-d 와 -p 옵션을 합쳐서 -dp로 사용 가능하다. </p>
<h2 id="List-containers"><a href="#List-containers" class="headerlink" title="List containers"></a>List containers</h2><p>현제 실행되고 컨테이너 갯수와 어떤 컨네이너가 실행되어 있는지는 <code>docker ps</code> 로 확인할 수 있다.</p>
<p><code>docker stop</code> 으로 컨테이너 id 나 이름을 주어서 컨테이너를 종료시킬 수 있다.</p>
<h2 id="Stop-start-and-name-containers"><a href="#Stop-start-and-name-containers" class="headerlink" title="Stop, start, and name containers"></a>Stop, start, and name containers</h2><p><code>docker ps</code> 에 기본값은 실행중인 컨테이너를 보여주는 것이다. <code>docker ps -a</code> 플래그를 넣어주면 모든 컨테이너 상태를 볼 수 있다. </p>
<ul>
<li><code>docker restart</code> 에 아이디나 종료된 컨테이너의 이름을 넣어주면 도커 컨테이너를 재실행 시킬 수 있다. restart 를 실행하면 처음 실행할 때 사용했던 플래그나 커맨드를 똑같이 사용한다.</li>
</ul>
<p>이제 컨테이너의 이름이 랜덤으로 바뀌는 이슈를 고쳐 보자. 컨테이너 이미지를 기본적으로 실행하면 랜덤한 이름이 정해진다.</p>
<p>기존에 실행해서 랜덤하게 생성되었던 컨테이너를 지운다. </p>
<ul>
<li><code>docker rm &lt;컨테이너 이름&gt;</code></li>
</ul>
<p>여러 이름을 한꺼번에 넣을 수 도 있다.</p>
<p>이제 컨테이너의 이름을 랜덤이 아닌 정해진 것으로 설정해 보자. 개발할때 변수에 이름을 짖는것처럼 식별하기 쉽고 읽기 쉽게 정하는 것이 좋다. 이름을 설정하기 위해서는 단순히 —name 플래그를 더해주기만 하면 된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -dp 8080:8080 --name naver-api node-docker</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/17/DevOps/Docker/211216-Docker%20tutorial(2)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/17/DevOps/Docker/211216-Docker%20tutorial(2)/" class="post-title-link" itemprop="url">Docker tutorial(2)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-17 13:20:02 / Modified: 13:20:22" itemprop="dateCreated datePublished" datetime="2021-12-17T13:20:02+09:00">2021-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Sample-application"><a href="#Sample-application" class="headerlink" title="Sample application"></a>Sample application</h1><h2 id="Build-the-app’s-Container-image"><a href="#Build-the-app’s-Container-image" class="headerlink" title="Build the app’s Container image"></a>Build the app’s Container image</h2><p>Dockerfile은 컨테이미지를 만드는 구조의 스크립트이다. Dockerfile을 통해서 이미지를 만들어 본다. </p>
<ol>
<li>create file named Dockerfile in the same folder as the file <code>package.json</code> with the follwing contents.</li>
</ol>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">12</span>-alpine</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk add --no-cache python3 g++ make</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yarn install --production</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;node&quot;</span>, <span class="string">&quot;src/index.js&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<ol>
<li>Dockerfile이 있는 폴더로 이동한 후에 build 를 시작</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t getting-started .</span><br></pre></td></tr></table></figure>

<p>이 커멘드는 Dockerfile 을 사용해서 컨테이너 이미지를 만든다.</p>
<h2 id="Start-an-app-container"><a href="#Start-an-app-container" class="headerlink" title="Start an app container"></a>Start an app container</h2><ol>
<li><code>docker run</code> 을 통해 이미지를 실행시킨다. </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -dp 3000:3000 getting-started</span><br></pre></td></tr></table></figure>

<p>다시한번 설명하자면 : </p>
<ul>
<li>-d : background 실행</li>
<li>-p : 포트 매핑 host 3000 번 을 docker image 의 3000번 포트로</li>
</ul>
<ol>
<li><a target="_blank" rel="noopener" href="http://localhost:3000/">localhost:3000</a> 으로 접속하면 내용을 확인할 수 있다.</li>
</ol>
<p>Docker Dashboard 에서 continaer 탭을 살펴보면 여러가지 컨테이너가 실행중인 것을 불수 있다. 다음에는 컨테이너를 관리 하는 방법을 살펴본다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/16/DevOps/Docker/211215-Docker%20tutorial(1)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/16/DevOps/Docker/211215-Docker%20tutorial(1)/" class="post-title-link" itemprop="url">Docker tutorial(1)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-16 20:11:58 / Modified: 20:13:10" itemprop="dateCreated datePublished" datetime="2021-12-16T20:11:58+09:00">2021-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h1><h2 id="배우는-것"><a href="#배우는-것" class="headerlink" title="배우는 것"></a>배우는 것</h2><ul>
<li>이미지를 컨테이너로 빌드 및 실행</li>
<li>Docker hub를 통해서 이미지 공유</li>
<li>여러개의 컨테이너를 포함하는 Docker applications 배포</li>
<li>Docker Compose 를 통한 applications 실행</li>
</ul>
<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><p><code>docker run -d -p 80:80 docker/getting-started</code> </p>
<ul>
<li>docker/getting-started 를 실행시킴. 로컬에 없으면 registry에서 pull 한다음 실행하는 것과 동일</li>
<li>-d : backgroudn 로 실행시킴</li>
<li>-p 80:80 : host 에 80 포트를 컨테이너의 80포트로 매핑함.</li>
</ul>
<p>⇒ db로 flag를 줄일수 있음.</p>
<h2 id="What-is-a-container"><a href="#What-is-a-container" class="headerlink" title="What is a container?"></a>What is a container?</h2><p>간단히 말하면, 호스트 머신과 분리된 sandboxed process 이다. </p>
<ul>
<li>실행 가능한 이미지의 인스턴스이다. create, start, stop, move or delete를 Docker API나 CLI를 사용해서 할 수 있다.</li>
<li>로컬이나 클라우드 가상 머신 어디든지 실행 가능하다.</li>
<li>어떤 os 든지 실행 가능하다.</li>
<li>컨테이너는 서로 격리되어 있으며 자체 소프트웨어, 바이너리 및 구성을 실행한다.</li>
</ul>
<h2 id="What-is-a-container-image"><a href="#What-is-a-container-image" class="headerlink" title="What is a container image?"></a>What is a container image?</h2><p>컨테이널르 실행할때 격리된 파일 시스템을 사용하고 이미미지는 컨테이너의 파일 시스템을 포함한다. 또한 컨테이너를 실행시키는데 필요한 어떤 설정이다. 의존성, 바이너리, 스크립트 등도 포함한다.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/16/DevOps/Docker/211215-Using%20Node(1)%3CBuildImage%3E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/16/DevOps/Docker/211215-Using%20Node(1)%3CBuildImage%3E/" class="post-title-link" itemprop="url">Using Node(1)<BuildImage></a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-12-16 20:11:58" itemprop="dateCreated datePublished" datetime="2021-12-16T20:11:58+09:00">2021-12-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-12-21 21:34:05" itemprop="dateModified" datetime="2021-12-21T21:34:05+09:00">2021-12-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Build-your-Node-image"><a href="#Build-your-Node-image" class="headerlink" title="Build your Node image"></a>Build your Node image</h1><h2 id="Enable-BuildKit"><a href="#Enable-BuildKit" class="headerlink" title="Enable BuildKit"></a>Enable BuildKit</h2><p>BuildKit을 활성화 해서 이미지를 효과적으로 빌드 할것을 추천한다. Docker Desktop을 사용한다면 자동으로 설정 되어 있다.</p>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>이미지에는 애플리케이션을 실행하는 데 필요한 모든것(코드, 바이너리, 런타임, 종속성 및 기타 필요한 파일 시스템 개체)이 포함된다.</p>
<h2 id="Create-a-Dockerfile-for-Node-js"><a href="#Create-a-Dockerfile-for-Node-js" class="headerlink" title="Create a Dockerfile for Node.js"></a>Create a Dockerfile for Node.js</h2><p>Dockerfile 은 Docker image를 모으는 지침을 포함하는 텍스트 파일이다. <code>docker build</code> 와 같은 명령어를 사용하면 Dockerfile에서 읽어서 실행한다. </p>
<ul>
<li>프로젝트 root 경로에 Dockerfile을 만든다.</li>
<li><code>#syntax</code> 를 적용한다. build 하기 전에 항상 최신 버전을 사용하는 등의 작업을 수행하게 할 수 있다. <code>docker/dockerfile:1</code> 은 항상 최신버전을 가르킨다.</li>
</ul>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br></pre></td></tr></table></figure>

<ul>
<li>base image 파일을 설정한다.</li>
</ul>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">12.18</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>상속 가능하다. 즉, 직접 만든 것도 사용 가능 하지만 다른 이미지를 사용할 수 도 있다. 따라서 어플리케이션에 필요한 기능이 모두 담긴 이미지를 base image로 설정할 수 도 있다. 상속과 마찬가지로 <code>FROM</code> 을 사용하면 해당 이미지에 모든 기능을 사용하는 다른 이미지를 만들 수 있다. </p>
<ul>
<li>환경을 설정한다. 주로 production 이다 development 가 될 수 있다.</li>
</ul>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ENV</span> NODE_ENV=production</span><br></pre></td></tr></table></figure>

<ul>
<li>다른 명령을 쉽게 실행 시키기 위해서 working dir을 설정한다. 기본 패스로 사용해서 다른  명령어를 입력할때 모든 패스를 사용하지 않아도 된다.</li>
</ul>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br></pre></td></tr></table></figure>

<ul>
<li>node 프로젝트에서는 의존성을 설치하기 위해 package.json을 사용하는데 이미지 파일에도 package.json을 옮겨야 한다. <code>COPY</code> 명령을 사용하고 인자로 <code>src</code> 와 <code>dest</code> 를 받는다. src 는 복사하고 싶은 파일을 의미하고, dest는 복사하고 싶은 곳을 의미한다.</li>
</ul>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> [<span class="string">&quot;package.json&quot;</span>, <span class="string">&quot;package-lock.json*&quot;</span>, <span class="string">&quot;./&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>의존성을 설치하는 명령을 실행한다.</li>
</ul>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install --production</span></span><br></pre></td></tr></table></figure>

<ul>
<li>이제 모든 파일을 복사한다. 이미지 파일로 복사한다.</li>
</ul>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br></pre></td></tr></table></figure>

<ul>
<li>컨텐스트 로드 시간을 줄이기 위해서 .dockerignore 파일을 생성한다.</li>
</ul>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br></pre></td></tr></table></figure>

<h2 id="build-image"><a href="#build-image" class="headerlink" title="build image"></a>build image</h2><p><code>docker build</code> 명령을 실행시켜서 build 할 수 있다. <code>--tag</code> 옵션을 주면 이미지에 이름을 줄 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build --tag node-docker .</span><br></pre></td></tr></table></figure>

<p>이미지는 manifest와 layer로 구성된다</p>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">14.16</span>.<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> [<span class="string">&quot;package.json&quot;</span>, <span class="string">&quot;yarn.lock&quot;</span>, <span class="string">&quot;./&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yarn install </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;yarn&quot;</span>, <span class="string">&quot;start&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>NODE_ENV 는 따로 설정 안해서 뺐음</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jayoonkoo.github.io/2021/12/16/TIL/211215-211215/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JayoonKoo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="티끌모아 태산">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/16/TIL/211215-211215/" class="post-title-link" itemprop="url">211215</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-16 20:07:09 / Modified: 20:07:16" itemprop="dateCreated datePublished" datetime="2021-12-16T20:07:09+09:00">2021-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/TIL/" itemprop="url" rel="index"><span itemprop="name">TIL</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="211215"><a href="#211215" class="headerlink" title="211215"></a>211215</h1><h2 id="백엔드"><a href="#백엔드" class="headerlink" title="백엔드"></a>백엔드</h2><ul>
<li>유효성 검사 어디에서 하는게 좋을까?<ul>
<li>서버에서 검증을 빨리 하는것이 좋은데 네트워크를 소비하지 않도록 클라이언트에서 검증을 해도 좋다. 하지만 서버에서 검증하는 절차는 필수적이다.</li>
</ul>
</li>
<li>유효성 검사를 위해서 expres-validator 를 이용할 수 있다.</li>
<li>Sanitization 이란 ? 유효성 검사 후에 해야 하는데 예를 들어 2 글자 이상의 벨리데이션이 있었다면, 공백만 3글자로 입력해도 통과 됨. 이런것도 다 잡아줘야 함 → 이경우에는 맨 처음 trim()을 사용해서 해결 가능. express-validator 다양한 Sanitization 을 관련 API를 제공한다. ⇒ 데이터를 일관성있게 적용될 수 있도록</li>
<li>validation 관련한 함수는 middleware로 따로 관리한다 controller는 비즈니스 관련 핵심 로직만 관리 할 수 있도록 한다.</li>
<li>Contract Testing: Client-Server 통신시 test, 나중에 공부해보자.</li>
</ul>
<h2 id="프론트"><a href="#프론트" class="headerlink" title="프론트"></a>프론트</h2><ul>
<li>react-query: server 에 상태를 캐쉬해서 network 비용을 줄일 수 있게 해준다. redux 를 사용하면 client 에 상태는 잘 관리할 수 있지만 server의 상태를 관리하려면 캐쉬등 여러가지 해주어야 할 작업이 있다. 이 책임을 reqct-query 에게 줌으로써 개발자는 다른 것에 집중해서 개발할수 있다.</li>
<li>데이터를 처음 가져올때는 state를 통해 loading, success, error 와 같은 상태를 사용할 수 있고, 두번째로 가져올 때부터는 server 상태와 동기화 되서 다를때만 가져오고 나마저는 캐쉬된 상태를 사용할수 있게 함으로써 사용자 경험을 높인다.</li>
<li>전역 state는 어떻게? → ContextAPI를 사용하여 전역 상태를 관리 할 수도 있다. 요즘은 redux 에 비중을 줄이고 context 와 react-query에 조합을 많이 사용하기도 한다.</li>
</ul>
<h2 id="리액트-네이티브"><a href="#리액트-네이티브" class="headerlink" title="리액트 네이티브"></a>리액트 네이티브</h2><ul>
<li>react-native-safe-area-context : safe area 나머지 부분에 여백에 관한 설정을 할수 있는 라이브러리</li>
<li>안드로이드에 경우 자동으로 서드파티 라이브러를 불러와서 사용할 수 있지만 ios에 경우에는 cocoapods 의 도움을 받아야 네이티브 모듈의 적용할 수 있다. ios 폴더 이동후 pod install 을 실행한다.</li>
<li>react-native-safe-area-context 의 useSafeAreaInsets() hook을 이용하면  반환 값으로 각 safeArea 구성의 필요한 각 모서리에 공백을 top, bottom, left, right로 받아올 수 있다.</li>
<li>statusBar 의 barStyle props를 전달할 수 있다. dark-content(어두운 내용), light_content(밝은 내용), default(시스템 기본 설정) → 참고로 안드로이드 ios 공통으로 사용할 수 있다.</li>
<li>리액트 네이티브에서 스타일링할 때 크기는 모두 dp로 설정한다. (Density-independent Pixel) → 1인치당 픽셀 밀도에 따라 크기가 일관된 UI를 보여줄 수 있는 단위이다.<ul>
<li>dp = px * 160 / ppi</li>
<li>px = dp * ppi / 160</li>
</ul>
</li>
<li>시뮬레이터 디바이스를 변경하는 방법 → <code>xcrun simctl list devices</code> 를 통해 실행 가능한 디바이스 목록을 확인할 수 있고, <code>yarn react-native run-ios- simulator=&quot;iPhone 5s</code> 와 같은 방법으로 동작 시킬 수 있다. 안드로이드의 경우에는 Android Virtula Device Manager를 열어서 Create Virtual Device 버튼을 눌러 새 디바이스를 추가하면 된다.</li>
<li>이미지를 리사이즈 해서 실제 이미지와 크기가 달라질때, resizeMode를 설정할 수 있다.<ul>
<li>cover: 기본값, 가로 세로 비율을 유지한채로 리사이징, 뷰가 더 작으면 이미지가 잘린다.</li>
<li>contain: 가로 세로 비율을 유지한 체로 리사이징 하며 무조건 영역에 모두 들어오도록 한다.</li>
<li>stretch: 뷰의 크기대로 이미지를 리사이징 한다. 비율이 달라진다.</li>
<li>repeat: 바둑판식으로 이미지를 반복한다.</li>
<li>center: 이미지를 뷰 중앙에 둔다. contain과 마찬가지 이고, 뷰가 이미지보다 크면 이미지의 크기가 커지지 않고 원본 사이즈를 유지한다.</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JayoonKoo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
